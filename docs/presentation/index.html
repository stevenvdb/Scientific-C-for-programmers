<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-6172778a27b0bfa6b3b3f65992e46a92.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.9.3">

  <meta name="author" content="Steven Vandenbrande">
  <title>Scientific C for programmers</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-534cd8e3a96973385dffff3f4709048d.css">
  <link rel="stylesheet" href="styles.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="site_libs/quarto-diagram/mermaid.min.js"></script>
  <script src="site_libs/quarto-diagram/mermaid-init.js"></script>
  <link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Scientific C for programmers</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Steven Vandenbrande 
</div>
</div>
</div>

</section>
<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>

</section>
<section id="who-am-i" class="slide level2">
<h2>Who am I?</h2>
<p>Main lecturer: Steven Vandenbrande</p>
<ul>
<li>Member of the HPC Support Team of ICTS</li>
<li>HPC (High Performance Computing):<br> KU Leuven offers Tier-2 cluster to researchers,<br> part of the Vlaams Supercomputer Centrum (VSC <sup>1</sup>)</li>
<li>Background in molecular modeling</li>
</ul>
<p>Support during hands-on sessions from Jan De Laet</p>
<aside><ol class="aside-footnotes"><li id="fn1"><p><a href="https://www.vscentrum.be/">https://www.vscentrum.be</a></p></li></ol></aside></section>
<section id="who-are-you" class="slide level2">
<h2>Who are you?</h2>
<p>Please present yourself:</p>
<ul>
<li>Your name</li>
<li>Your scientific background</li>
<li>Your programming background</li>
<li>Why you want to learn scientific C</li>
</ul>
</section>
<section id="practical-aspects" class="slide level2">
<h2>Practical aspects</h2>
<ul>
<li>Four sessions of 3 hours (with a break)</li>
<li>Course website:<br><a href="https://stevenvdb.github.io/Scientific-C-for-programmers/" class="uri">https://stevenvdb.github.io/Scientific-C-for-programmers/</a></li>
<li>Hands on: make sure you have a working C environment</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>First run of this course, feedback is much appreciated.</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>These slides are not intended as a reference manual, but to accompany a talk. A book like <a href="https://en.wikipedia.org/wiki/The_C_Programming_Language">The C programming language</a> is better suited as a reference.</p>
</div>
</div>
</div>
</div>
</section>
<section id="outline" class="slide level2">
<h2>Outline</h2>
<div style="display: flex; gap: 1em; flex-wrap: wrap;">
<div style="flex: 1 1 45%;">
<h3>
Day 1
</h3>
<details>
<summary>
Introduction
</summary>
<ul>
<li>
Motivation
</li>
<li>
Context
</li>
<li>
Course overview
</li>
</ul>
</details>
<details>
<summary>
Jumping in
</summary>
<ul>
<li>
Hello, world
</li>
<li>
Temperature conversion
</li>
<li>
Logistic map
</li>
</ul>
</details>
<h3>
Day 2
</h3>
<details>
<summary>
Basics of C
</summary>
<ul>
<li>
Types and operators
</li>
<li>
Control flow
</li>
<li>
Functions
</li>
</ul>
</details>
</div>
<div style="flex: 1 1 45%;">
<h3>
Day 3
</h3>
<details>
<summary>
Advanced C
</summary>
<ul>
<li>
Arrays and pointers
</li>
<li>
Structures
</li>
<li>
Input and output
</li>
</ul>
</details>
<h3>
Day 4
</h3>
<details>
<summary>
Beyond the core of C
</summary>
<ul>
<li>
External libraries
</li>
<li>
Segmentation faults
</li>
<li>
C standards
</li>
</ul>
</details>
<details>
<summary>
Wrapping up
</summary>
</details>
</div>
</div>
</section></section>
<section>
<section id="motivation" class="title-slide slide level1 center">
<h1>Motivation</h1>

</section>
<section id="why-learn-to-program-in-c" class="slide level2">
<h2>Why learn to program in C?</h2>
</section>
<section id="why-learn-to-program-in-c-1" class="slide level2">
<h2>Why learn to program <del>in C</del>?</h2>
<p>Didn’t AI agents take over programming? In my opinion:</p>
<ul>
<li>AI agents are invaluable assistants</li>
<li>Still benefit greatly from a prompter with expertise because:
<ul>
<li>They will confidently write code that is wrong</li>
<li>They will often produce sub-optimal code (speed, maintainability, …)</li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>This opinion might be outdated very soon.</p>
</div>
</div>
</div>
</div>
</section>
<section id="why-learn-to-program-in-c-2" class="slide level2">
<h2>Why learn to program <del>in C</del>?</h2>
<p>I encourage you to use AI assistance during this course</p>
<ul>
<li>You will use it in real-life coding</li>
<li>You need to learn how to use it</li>
</ul>
<p>with two caveats:</p>
<ul>
<li>The exercises are educational,<br>AI might perform better than for your real problems</li>
<li>Don’t cheat on yourself,<br>try to understand the answers to learn something</li>
</ul>
</section>
<section id="why-learn-to-program-in-c-3" class="slide level2">
<h2>Why learn to program in C?</h2>
<ul>
<li class="fragment">Relatively low level, close to hardware
<ul>
<li class="fragment">Popular to write system software (OS for example)</li>
<li class="fragment">Gives insight into computer architecture</li>
</ul></li>
<li class="fragment">Potentially gives good performance
<ul>
<li class="fragment">Fairly popular in scientific computing</li>
</ul></li>
<li class="fragment">Small and stable language, syntax can be learned quickly</li>
<li class="fragment">Good basis to learn other programming languages</li>
<li class="fragment">You inherited a project written in C
<ul>
<li class="fragment">Not a good intrinsic motivation, but a reality</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="context-the-landscape-of-scientific-programming" class="title-slide slide level1 center">
<h1>Context:<br>the landscape of<br>scientific programming</h1>

</section>
<section id="scientific-programming-landscape" class="slide level2">
<h2>Scientific programming landscape</h2>

<img data-src="images/scientific_programming_languages_landscape.png" class="r-stretch"></section>
<section id="assembly" class="slide level2">
<h2>Assembly</h2>
<ul>
<li>Very low level, essentially machine code in readable format</li>
<li>Machine dependent, specific to each architecture</li>
<li>Used in performance-critical parts of low-level libraries</li>
<li>If you are not sure you need it, you don’t</li>
</ul>

<img src="images/assembly.jpg" width="20%" class="r-stretch"><div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The <a href="https://godbolt.org/">godbolt</a> project gives a taste of what assembly looks like.</p>
</div>
</div>
</div>
</div>
</section>
<section id="c" class="slide level2">
<h2>C</h2>
<ul>
<li>First appeared in 1972, successor of B</li>
<li>First standard in 1989, four revisions since</li>
<li>Compiled language with static typing</li>
<li>Small language and standard library</li>
<li>Gives a lot of low-level control (e.g., memory management)</li>
</ul>

<img src="images/c.png" width="20%" class="r-stretch"></section>
<section id="c-1" class="slide level2">
<h2>C++</h2>
<ul>
<li>Extension of C, adding object-oriented features</li>
<li>Compiled language with static typing</li>
<li>Allows better and more complex project constructs</li>
<li>More syntax and much larger standard library</li>
<li>In principle retains all benefits from C,<br>in practice you program differently</li>
</ul>

<img src="images/cpp.png" width="20%" class="r-stretch"></section>
<section id="rust" class="slide level2 smaller">
<h2>Rust</h2>
<ul>
<li>“Modern” version of C/C++</li>
<li>Very different approach to memory management:
<ul>
<li>C/C++ are prone to bugs causing safety issues</li>
<li>Rust is proposed as an alternative, see <a href="https://www.darpa.mil/research/programs/translating-all-c-to-rust">DARPA: Translating all C to Rust</a></li>
<li>Not as problematic for programs you run locally</li>
</ul></li>
<li>Ecosystem for scientific computing not as advanced as <span style="white-space:nowrap">C/C++</span>, but efforts are under way
<ul>
<li>Example of a project for high-performance data manipulation: <a href="https://pola.rs/">Polars dataframes</a></li>
</ul></li>
</ul>

<img data-src="images/rust.png" class="r-stretch"></section>
<section id="fortran" class="slide level2">
<h2>Fortran</h2>
<ul>
<li>Fortran (Formula Translating System) appeared in 1957</li>
<li>Compiled language with static typing</li>
<li>Object-oriented features added in 2003 standard</li>
<li>Still a lot of Fortran compilers produce fast code</li>
<li>Good fit for mathematical applications</li>
<li>Since the 2008 standard: <a href="https://docs.nersc.gov/development/programming-models/coarrays/">coarrays</a> as a built-in parallel programming model</li>
</ul>

<img data-src="images/fortran.png" class="r-stretch"></section>
<section id="java" class="slide level2">
<h2>Java</h2>
<ul>
<li>Syntax influenced by C/C++, supports object orientation</li>
<li>Source code compiled to Java bytecode which runs in virtual machine
<ul>
<li>in principle slower code execution</li>
</ul></li>
<li>Memory safety and automatic garbage collection</li>
<li>Quite often used in bio informatics</li>
</ul>

<img data-src="images/java.png" class="r-stretch"></section>
<section id="scientific-programming-landscape-1" class="slide level2">
<h2>Scientific programming landscape <sup>1</sup></h2>
<p><img data-src="images/scientific_programming_languages_landscape.png"></p>
<aside><ol class="aside-footnotes"><li id="fn2"><p>The line between compiled and interpreted is not as clear as indicated in this picture</p></li></ol></aside></section>
<section id="julia" class="slide level2">
<h2>Julia</h2>
<ul>
<li>Designed for technical and numerical computing</li>
<li>Dynamically typed, supports multiple paradigms</li>
<li>Scripted language with some support for compiling</li>
<li>Designed for parallel computing</li>
</ul>

<img data-src="images/julia.png" class="r-stretch"></section>
<section id="python" class="slide level2">
<h2>Python</h2>
<ul>
<li>Scripting language, runs in Python interpreter</li>
<li>Dynamically typed, garbage collection</li>
<li>Perceived as easy to learn</li>
<li>Not very efficient (unless actual work is done by C/Fortran)</li>
<li>Popular in scientific computing, including machine learning <sup>1</sup></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn3"><p>The heavy computational lifting is usually <em>not</em> done in Python</p></li></ol></aside></section>
<section id="r" class="slide level2">
<h2>R</h2>
<ul>
<li>Aimed at statistical computing and visualization</li>
<li>Interpreted language, runs in R interpreter</li>
<li>Similar in many aspects to Python</li>
<li>Popular in some fields such as social sciences and economics</li>
</ul>

<img data-src="images/R.png" class="r-stretch"></section>
<section id="matlab" class="slide level2">
<h2>Matlab</h2>
<ul>
<li>Proprietary numeric computing environment</li>
<li>Extensive built-in functions for linear algebra, signal processing, optimization, and statistics</li>
</ul>

<img data-src="images/matlab.png" class="r-stretch"></section>
<section id="scientific-programming-landscape-2" class="slide level2">
<h2>Scientific programming landscape</h2>

<img data-src="images/scientific_programming_languages_landscape.png" class="r-stretch"></section>
<section id="programming-accelerators" class="slide level2">
<h2>Programming accelerators</h2>
<ul>
<li>Thus far: general-purpose programming languages for CPUs</li>
<li>GPUs (originally for visualization) are well suited for scientific computing
<ul>
<li>Require dedicated programming languages</li>
<li>CUDA for NVIDIA GPUs</li>
<li>ROCm for AMD GPUs</li>
<li>OpenCL/OpenMP/… support multiple devices</li>
</ul></li>
</ul>
</section>
<section id="parallelization" class="slide level2">
<h2>Parallelization</h2>
<ul>
<li>High performance computing (HPC) is all about parallelization</li>
<li>Nearly all programming languages are inherently serial,<br>parallelization has to be added</li>
<li>Several paradigms:
<ul>
<li>pthreads (OS level)</li>
<li>OpenMP: shared-memory parallel programming in C/C++ and Fortran</li>
<li>MPI: message passing interface for communication between processes</li>
</ul></li>
</ul>
</section>
<section id="scientific-programming-landscape-3" class="slide level2">
<h2>Scientific programming landscape</h2>
<p><strong>Conclusions</strong>:</p>
<ul>
<li>Knowing multiple languages is useful
<ul>
<li>Allows you to use the right tool for the right job</li>
<li>For example, C for computationally-intensive parts, Python for post processing</li>
</ul></li>
<li>Select a few languages in which you become an expert</li>
<li>Look beyond intrinsic properties, the ecosystem and support is important</li>
</ul>
</section></section>
<section>
<section id="course-overview" class="title-slide slide level1 center">
<h1>Course overview</h1>

</section>
<section id="what-you-will-learn-in-this-course" class="slide level2">
<h2>What you will learn in this course</h2>
<ul>
<li>the place of C in the landscape of scientific programming languages</li>
<li>learn (most of) the C syntax <sup>1</sup></li>
<li>write and run basic C programs with a focus on programming concepts encountered in science</li>
<li>how to use external libraries when writing C code</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn4"><p>Based on “The C Programming Language” second edition by Kernighan and Ritchie</p></li></ol></aside></section>
<section id="what-you-will-not-learn-in-this-course" class="slide level2">
<h2>What you will <strong>not</strong> learn in this course <sup>1</sup></h2>
<ul>
<li class="fragment">How to do HPC =&gt; <a href="https://hpcleuven.github.io/HPC-intro">HPC intro</a> and <a href="https://hpcleuven.github.io/Linux-for-HPC/">Linux for HPC</a></li>
<li class="fragment">Build systems =&gt; <a href="https://hpcleuven.github.io/CMake-intro/">CMake intro</a> and <a href="https://hpcleuven.github.io/Makefile-intro/">Makefile intro</a></li>
<li class="fragment">Version control =&gt; <a href="https://github.com/gjbex/Version-control-with-git">Version control with git</a></li>
<li class="fragment">Optimizing code =&gt; <a href="https://gjbex.github.io/Code-optimization/">Code optimization</a></li>
<li class="fragment">Debugging code =&gt; <a href="https://gjbex.github.io/Defensive_programming_and_debugging/">Defensive programming and debugging</a></li>
<li class="fragment">Parallel programming =&gt; <a href="https://github.com/gjbex/Parallel-programming">Parallel programming</a></li>
<li class="fragment">Setting up an Integrated Development Environment (IDE)</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn5"><p>Do not worry if you currently do not understand all terminology, we will come back to this at the end of the course</p></li></ol></aside></section>
<section id="what-you-will-not-learn-in-this-course-1" class="slide level2">
<h2>What you will <strong>not</strong> learn in this course <sup>1</sup></h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The calendar of VSC Training sessions can be found at <a href="https://www.vscentrum.be/vsctraining">https://www.vscentrum.be/vsctraining</a>. Learning paths that show connections between training sessions can be found at <a href="https://gjbex.github.io/Training-sessions">https://gjbex.github.io/Training-sessions</a>.</p>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn6"><p>Do not worry if you currently do not understand all terminology, we will come back to this at the end of the course</p></li></ol></aside></section>
<section id="outline-1" class="slide level2">
<h2>Outline</h2>
<div style="display: flex; gap: 1em; flex-wrap: wrap;">
<div style="flex: 1 1 45%;">
<h3>
Day 1
</h3>
<details>
<summary>
Introduction
</summary>
<ul>
<li>
Motivation
</li>
<li>
Context
</li>
<li>
Course overview
</li>
</ul>
</details>
<details>
<summary>
Jumping in
</summary>
<ul>
<li>
Hello, world
</li>
<li>
Temperature conversion
</li>
<li>
Logistic map
</li>
</ul>
</details>
<h3>
Day 2
</h3>
<details>
<summary>
Basics of C
</summary>
<ul>
<li>
Types and operators
</li>
<li>
Control flow
</li>
<li>
Functions
</li>
</ul>
</details>
</div>
<div style="flex: 1 1 45%;">
<h3>
Day 3
</h3>
<details>
<summary>
Advanced C
</summary>
<ul>
<li>
Arrays and pointers
</li>
<li>
Structures
</li>
<li>
Input and output
</li>
</ul>
</details>
<h3>
Day 4
</h3>
<details>
<summary>
Beyond the core of C
</summary>
<ul>
<li>
External libraries
</li>
<li>
Segmentation faults
</li>
<li>
C standards
</li>
</ul>
</details>
<details>
<summary>
Wrapping up
</summary>
</details>
</div>
</div>
</section></section>
<section>
<section id="jumping-in" class="title-slide slide level1 smaller center">
<h1>Jumping in</h1>

</section>
<section id="the-obligatory-hello-world" class="slide level2">
<h2>The obligatory “Hello, world”</h2>
<p><strong>Goal:</strong> Print <code>Hello, world</code> on the screen</p>
<p><strong>Learning outcome:</strong> Compile and run a C program</p>
<p><strong>Instructions:</strong></p>
<ul>
<li>Open the Visual Studio Code app via <a href="https://ondemand.hpc.kuleuven.be">https://ondemand.hpc.kuleuven.be</a> if you have a VSC account</li>
<li>Use a C environment on your local machine if available</li>
<li>Create an app on <a href="https://replit.com/languages/c">https://replit.com/languages/c</a> otherwise</li>
</ul>
</section>
<section class="slide level2">

<p>Create a text file called <code>hello.c</code> containing:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a></a></span>
<span id="cb1-3"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-4"><a></a>    printf<span class="op">(</span><span class="st">"Hello, world</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb1-5"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-6"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Compile and run it in a terminal as follows:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a></a><span class="fu">gcc</span> hello.c <span class="at">-o</span> hello</span>
<span id="cb2-2"><a></a><span class="ex">./hello</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>You can use another compiler such as <code>clang</code> if you prefer, some options can be different.</p>
</div>
</div>
</div>
</section>
<section id="temperature-conversion" class="slide level2">
<h2>Temperature conversion</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Print a table with temperatures in Fahrenheit and Celcius, the formula is <span class="math inline">\(^\circ C= \frac{5}{9}(^\circ F - 32)\)</span></li>
</ul>
<p><strong>Learning outcome:</strong></p>
<ul>
<li>Exposure to variables, operators and loops</li>
<li>Correct some common errors</li>
</ul>
</section>
<section class="slide level2">

<p><strong>Instructions:</strong></p>
<ul>
<li>The training repository contains files needed for the exercises
<ul>
<li><p>Download the repository with</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a></a><span class="fu">git</span> clone https://github.com/stevenvdb/Scientific-C-for-programmers/</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Alternatively, visit <a href="https://github.com/stevenvdb/Scientific-C-for-programmers/">https://github.com/stevenvdb/Scientific-C-for-programmers/</a> in a browser</p></li>
</ul></li>
<li>This exercise is located in <code>exercises/01_temperature_conversion</code></li>
</ul>
</section>
<section class="slide level2">

<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb4-2"><a></a></span>
<span id="cb4-3"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-4"><a></a>    <span class="dt">float</span> fahr<span class="op">,</span> celcius<span class="op">;</span></span>
<span id="cb4-5"><a></a>    <span class="dt">float</span> lower<span class="op">,</span> upper<span class="op">,</span> step<span class="op">;</span></span>
<span id="cb4-6"><a></a></span>
<span id="cb4-7"><a></a>    lower <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// Lowest temperature in Fahrenheit</span></span>
<span id="cb4-8"><a></a>    upper <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="co">// Highest temperature in Fahrenheit</span></span>
<span id="cb4-9"><a></a>    step <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>   <span class="co">// Increment of temperature</span></span>
<span id="cb4-10"><a></a></span>
<span id="cb4-11"><a></a>    fahr <span class="op">=</span> lower<span class="op">;</span></span>
<span id="cb4-12"><a></a>    <span class="cf">while</span> <span class="op">(</span>fahr <span class="op">&lt;</span> upper<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-13"><a></a>        celcius <span class="op">=</span> <span class="op">(</span><span class="dv">5</span> <span class="op">/</span> <span class="dv">9</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>fahr <span class="op">-</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb4-14"><a></a>        printf<span class="op">(</span><span class="st">"</span><span class="sc">%8.1f</span><span class="st"> </span><span class="sc">%8.1f\n</span><span class="st">"</span><span class="op">,</span> fahr<span class="op">,</span> celcius<span class="op">);</span></span>
<span id="cb4-15"><a></a>        fahr <span class="op">=</span> fahr <span class="op">+</span> step</span>
<span id="cb4-16"><a></a>    <span class="op">}</span></span>
<span id="cb4-17"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-18"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Fix the problems (there are 3) to compile and run the code:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash small-code number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a></a><span class="fu">gcc</span> convert_temperatures.c <span class="at">-o</span> convert_temperatures</span>
<span id="cb5-2"><a></a><span class="ex">./convert_temperatures</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="logistic-map" class="slide level2">
<h2>Logistic map</h2>
<ul>
<li>Simple formula to model evolution of population size <span class="math inline">\(N_n\)</span>:</li>
</ul>
<p><span class="math display">\[
N_{n+1} = (a-bN_n)N_n
\]</span></p>
<ul>
<li>Intuitive explanation:
<ul>
<li><span class="math inline">\(N_{n+1} \propto N_n\)</span>: increases with more offspring</li>
<li><span class="math inline">\(N_{n+1} \propto (a-bN_n)\)</span>: decreases because of competition</li>
</ul></li>
<li>Normalized version: <span class="math inline">\(x_{n+1} = r(1-x_n)x_n\)</span> with <span class="math inline">\(0\leq x_n \leq 1\)</span></li>
</ul>
</section>
<section id="logistic-map-1" class="slide level2 smaller">
<h2>Logistic map</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Print evolution of a population according to logistic map</li>
</ul>
<p><strong>Learning outcome:</strong></p>
<ul>
<li>Write your first function</li>
<li>Learn how to read input values</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>Implement the <code>update_population</code> function</li>
<li>Read the initial population from input</li>
<li>Check README.md in <code>exercises/02_logistic_map</code></li>
</ul>
</section>
<section id="logistic-map-solution" class="slide level2">
<h2>Logistic map: solution</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb6-1"><a></a><span class="dt">double</span> update_population<span class="op">(</span><span class="dt">double</span> current_population<span class="op">,</span> <span class="dt">double</span> growth_rate<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-2"><a></a>    <span class="cf">return</span> growth_rate <span class="op">*</span> current_population <span class="op">*</span> <span class="op">(</span><span class="fl">1.0</span> <span class="op">-</span> current_population<span class="op">);</span></span>
<span id="cb6-3"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>A function can accept multiple typed arguments</li>
<li>A function can at most return 1 typed value</li>
<li>Mathematical expressions should be fairly intuitive</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb7-1"><a></a>    printf<span class="op">(</span><span class="st">"Please enter the initial population: "</span><span class="op">);</span></span>
<span id="cb7-2"><a></a>    scanf<span class="op">(</span><span class="st">"</span><span class="sc">%lf</span><span class="st">"</span><span class="op">,</span> <span class="op">&amp;</span>current_population<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Input can be read interactively with <code>scanf</code>
<ul>
<li>Be careful, you should thoroughly check input</li>
</ul></li>
</ul>
</section>
<section id="logistic-map-discussion" class="slide level2 smaller">
<h2>Logistic map: discussion</h2>
<ul>
<li>Comparison of two populations with slightly different initial populations (<span class="math inline">\(r=3.8\)</span>)</li>
<li>Initially, two populations stay relatively close</li>
<li>After a certain time they completely decorrelate =&gt; example of a chaotic system</li>
</ul>
<div style="text-align: center;">
<img src="images/logistic_map_populations.png" width="60%">
</div>
</section></section>
<section>
<section id="basics-of-c" class="title-slide slide level1 center">
<h1>Basics of C</h1>

</section>
<section id="outline-2" class="slide level2">
<h2>Outline</h2>
<div style="display: flex; gap: 1em; flex-wrap: wrap;">
<div style="flex: 1 1 45%;">
<h3>
Day 1
</h3>
<details>
<summary>
Introduction
</summary>
<ul>
<li>
Motivation
</li>
<li>
Context
</li>
<li>
Course overview
</li>
</ul>
</details>
<details>
<summary>
Jumping in
</summary>
<ul>
<li>
Hello, world
</li>
<li>
Temperature conversion
</li>
<li>
Logistic map
</li>
</ul>
</details>
<h3>
Day 2
</h3>
<details>
<summary>
Basics of C
</summary>
<ul>
<li>
Types and operators
</li>
<li>
Control flow
</li>
<li>
Functions
</li>
</ul>
</details>
</div>
<div style="flex: 1 1 45%;">
<h3>
Day 3
</h3>
<details>
<summary>
Advanced C
</summary>
<ul>
<li>
Arrays and pointers
</li>
<li>
Structures
</li>
<li>
Input and output
</li>
</ul>
</details>
<h3>
Day 4
</h3>
<details>
<summary>
Beyond the core of C
</summary>
<ul>
<li>
External libraries
</li>
<li>
Segmentation faults
</li>
<li>
C standards
</li>
</ul>
</details>
<details>
<summary>
Wrapping up
</summary>
</details>
</div>
</div>
</section></section>
<section>
<section id="data-types-operators-and-expressions" class="title-slide slide level1 center">
<h1>Data types, operators and expressions</h1>

</section>
<section id="data-types-operators-and-expressions-1" class="slide level2">
<h2>Data types, operators and expressions <sup>1</sup> <sup>2</sup></h2>
<ul>
<li>Variables are the basic data objects manipulated in a C program</li>
<li>C is <em>statically</em> typed: a variable is of a specific type defined at compile time</li>
<li>C allows manipulation of variables by expressions with operators</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn7"><p>Kernighan and Ritchie, Chapter 2, Types, operators and expressions</p></li><li id="fn8"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="the-very-basics" class="slide level2">
<h2>The very basics</h2>
<div class="columns">
<div class="column" style="width:55%;">
<ul>
<li>C statements <sup>1</sup> end with a semicolon</li>
<li>Braces <code>{}</code> are used to group statements into a code block</li>
<li>Whitespace is mostly ignored, allows to improve readability</li>
<li>Compiler ignores what comes after <code>//</code> and between <code>/*</code> and <code>*/</code></li>
</ul>
</div><div class="column" style="width:45%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-3"><a aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// Single-line comment</span></span>
<span id="cb8-4"><a aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb8-5"><a aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-6"><a aria-hidden="true" tabindex="-1"></a><span class="co">/* Multi-line</span></span>
<span id="cb8-7"><a aria-hidden="true" tabindex="-1"></a><span class="co">   comment */</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn9"><p>A statement is <em>roughly</em> a programming instruction, something to do</p></li></ol></aside></section>
<section id="names-of-data-objects-in-c" class="slide level2">
<h2>Names of data objects in C</h2>
<ul>
<li>are case sensitive</li>
<li>consist of <code>{A,...,Z,a,...,z,_,0,...,9}</code></li>
<li>start with <code>{A,...,Z,a,...,z,_}</code></li>
<li>can have any length, but at most:
<ul>
<li>variables: 31 significant, 64 for C99+</li>
<li>functions: 6 significant<sup>1</sup>, 32 for C99+</li>
</ul></li>
<li>cannot be reserved words such as <code>if</code>, <code>while</code>, <code>char</code>, <code>int</code>, …</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn10"><p>guaranteed by standard, nowadays most compilers allow longer lengths</p></li></ol></aside></section>
<section id="conventions-for-names" class="slide level2">
<h2>Conventions for names</h2>
<ul>
<li>variables, functions: start with lowercase</li>
<li>constants, type names: start with uppercase or fully capitalized</li>
<li>names reflect semantics of entity!
<ul>
<li>variables with very small scope have a short name</li>
</ul></li>
<li>camelCase (e.g., <code>nrOfRuns</code>) or underscores <code>nr_of_runs</code></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Try to be consistent within a project. If you might share code with others, try to stick to a generally accepted code style, e.g.&nbsp;the <a href="https://www.gnu.org/prep/standards/html_node/Writing-C.html">GNU coding standard</a></p>
</div>
</div>
</div>
</section>
<section id="overview-of-data-types" class="slide level2">
<h2>Overview of data types</h2>
<ul>
<li><code>char</code>: single character</li>
<li><code>int</code>: integer, allows qualifiers (<code>signed</code>, <code>long</code>, …)</li>
<li><code>float</code>/<code>double</code>/<code>long double</code>: real numbers</li>
<li><code>enum</code>: list of constants</li>
<li><code>struct</code>: structure, group of related variables</li>
</ul>
</section>
<section id="characters" class="slide level2">
<h2>Characters</h2>
<ul>
<li>a <code>char</code> holds 1 character of the local character set</li>
<li>usually 1 byte, check with the <code>sizeof</code> operator</li>
<li>limits are defined in <code>limits.h</code> header as <code>CHAR_MIN</code> and <code>CHAR_MAX</code></li>
<li><code>char</code> can be signed or unsigned
<ul>
<li>almost always irrelevant, just use <code>char</code></li>
</ul></li>
<li>Example: <code>char myChar = 'b';</code>
<ul>
<li><code>"b"</code> is a string (=array of chars)!</li>
</ul></li>
</ul>
</section>
<section id="special-characters-are-escaped-with" class="slide level2">
<h2>Special characters are escaped with <code>\</code></h2>
<ul>
<li><code>'\a'</code>: bell</li>
<li><code>'\n'</code>: new line</li>
<li><code>'\r'</code>: carriage return</li>
<li><code>'\t'</code>: horizontal tab</li>
<li><code>'\\'</code>: backslash</li>
<li><code>'\''</code>: single quote</li>
<li><code>'\"'</code>: double quote</li>
<li><code>'\0'</code>: null character (terminates strings)</li>
</ul>
</section>
<section id="strings" class="slide level2">
<h2>Strings?</h2>
<ul>
<li>C does not have a basic string type</li>
<li>There are two ways to declare a string constant:
<ul>
<li><p>An array of characters: <sup>1</sup></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb9-1"><a></a><span class="dt">char</span> amessage<span class="op">[]</span> <span class="op">=</span> <span class="st">"My first string"</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>A character pointer: <sup>2</sup></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb10-1"><a></a><span class="dt">char</span> <span class="op">*</span>pmessage <span class="op">=</span> <span class="st">"My second string"</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn11"><p>arrays are discussed later on</p></li><li id="fn12"><p>pointers are discussed later on</p></li></ol></aside></section>
<section id="strings-1" class="slide level2">
<h2>Strings?</h2>
<ul>
<li>String constants are terminated with <code>\0</code> internally
<ul>
<li>Allows to know where string ends</li>
<li>You do not need to know this if you use functions from the standard library to work with strings</li>
</ul></li>
</ul>
</section>
<section id="integers" class="slide level2">
<h2>Integers</h2>
<ul>
<li><code>int</code>: typically 4 bytes, offers <span class="math inline">\(2^{32}\)</span> distinct values</li>
<li>modifiers:
<ul>
<li><code>unsigned int</code>: only non-negative integers, natural for array indices</li>
<li><code>short int</code>/<code>long int</code>/<code>long long int</code>: different ranges compared to <em>plain</em> <code>int</code>, can be combined with <code>unsigned</code></li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The range of <code>int</code> can be a limitation in practice, think about the range you need and choose the appropriate type.</p>
</div>
</div>
</div>
</section>
<section id="fixed-size-integers" class="slide level2">
<h2>Fixed-size integers</h2>
<p>The C standard only imposes a minimal range for integers:</p>
<ul>
<li>For example, <code>int</code> should at least cover <span class="math inline">\([−32767, +32767]\)</span></li>
<li>Some platforms provide larger range =&gt; code is potentially platform dependent</li>
</ul>
<p>If you need a fixed range:</p>
<ul>
<li>Include the <code>stdint.h</code> header</li>
<li>Use <code>uint8_t</code>, <code>int16_t</code>, …, which provide exactly the specified number of <em>bits</em></li>
</ul>
</section>
<section id="real-numbers" class="slide level2">
<h2>Real numbers</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Real numbers are represented in a computer in a format very similar to exponential notation<sup>1</sup></li>
<li>Computer uses binary representation, e.g., the IEEE SP standard:
<ul>
<li>Exponent determines range</li>
<li>Mantissa determines precision</li>
</ul></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="images/float_mantissa_exponent.png"> <img data-src="images/single_precision.jpg"> <img data-src="images/ieee_single.png"></p>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn13"><p>not part of the C standard, but quite universal</p></li></ol></aside></section>
<section id="double-precision" class="slide level2">
<h2>Double precision</h2>
<div class="columns">
<div class="column" style="width:25%;">
<p><img data-src="images/double_precision_axis.png"></p>
</div><div class="column" style="width:75%;">
<ul>
<li>a <code>double</code> is usually 8 bytes and gives about 15 <em>decimal</em> digit precision</li>
<li>the <code>float.h</code> header provides:
<ul>
<li><code>DBL_MAX</code>: largest positive <code>double</code></li>
<li><code>DBL_MIN</code>: smallest positive <code>double</code></li>
<li><code>DBL_EPSILON</code>: difference between <code>1.0</code> and next representable value (<span class="math inline">\(\approx\)</span> machine precision)</li>
<li><code>BLD_DIG</code>: number of significant decimal digits</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="basic-floating-point-representations" class="slide level2">
<h2>Basic floating-point representations</h2>
<ul>
<li><code>double</code>: most often used in science</li>
<li><code>float</code>: half the number of bits compared to <code>double</code>, usually 7 <em>decimal</em> digit precision</li>
<li><code>long double</code>: usually larger range than <code>double</code>, not used often</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>In deep learning, reduced-precision formats (FP16, FP8) are often used. Only dedicated devices like GPUs give hardware support.</p>
</div>
</div>
</div>
</section>
<section id="enumeration" class="slide level2">
<h2>Enumeration</h2>
<ul>
<li><code>enum</code> makes it convenient to refer to constants symbolically</li>
<li>Using automatic integer numbering:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb11-1"><a></a><span class="kw">enum</span> Level <span class="op">=</span> <span class="op">{</span>LOW<span class="op">,</span> MEDIUM<span class="op">,</span> HIGH<span class="op">};</span></span>
<span id="cb11-2"><a></a><span class="kw">enum</span> Level myLevel <span class="op">=</span> MEDIUM<span class="op">;</span> <span class="co">// myLevel will be 1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Using custom values:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb12-1"><a></a><span class="kw">enum</span> Pieces <span class="op">=</span> <span class="op">{</span>King <span class="op">=</span> <span class="ch">'K'</span><span class="op">,</span> Queen <span class="op">=</span> <span class="ch">'Q'</span><span class="op">,</span> Rook <span class="op">=</span> <span class="ch">'R'</span><span class="op">,</span> Bishop <span class="op">=</span> <span class="ch">'B'</span><span class="op">,</span> Knight <span class="op">=</span> <span class="ch">'N'</span><span class="op">};</span></span>
<span id="cb12-2"><a></a><span class="kw">enum</span> Pieces myPiece <span class="op">=</span> Bishop<span class="op">;</span> <span class="co">// myPiece will be 'B'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="type-conversion" class="slide level2">
<h2>Type conversion</h2>
<ul>
<li>In constants, use suffix, e.g.&nbsp;<code>123456789L</code> is a <code>long int</code></li>
<li>In expressions, automatic conversion to largest type, e.g.&nbsp;<code>5/9.0</code> is interpreted as <code>5.0/9.0</code></li>
<li>Explicit casting with brackets, e.g.&nbsp;<code>(int) 5.3</code>
<ul>
<li>this evaluates to the integer 5, so information is lost</li>
</ul></li>
</ul>
</section>
<section id="accidental-type-conversion" class="slide level2">
<h2>Accidental type conversion</h2>
<ul>
<li>What do you expect the following code will do?</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb13-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb13-2"><a></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb13-3"><a></a></span>
<span id="cb13-4"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb13-5"><a></a>    <span class="dt">double</span> a <span class="op">=</span> <span class="op">-</span><span class="fl">1.6e12</span><span class="op">;</span></span>
<span id="cb13-6"><a></a>    <span class="cf">if</span> <span class="op">(</span>abs<span class="op">(</span>a<span class="op">)</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> printf<span class="op">(</span><span class="st">"abs(a) is greater than 0</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb13-7"><a></a>    <span class="cf">else</span> printf<span class="op">(</span><span class="st">"abs(a) is smaller or equal to 0</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb13-8"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<ul>
<li>Behaviour is unexpected?</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a></a><span class="ex">$</span> gcc conversion.c <span class="at">-o</span> conversion <span class="kw">&amp;&amp;</span> <span class="ex">./conversion</span></span>
<span id="cb14-2"><a></a><span class="ex">abs</span><span class="er">(</span><span class="ex">a</span><span class="kw">)</span> <span class="ex">is</span> smaller or equal to 0</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="accidental-type-conversion-1" class="slide level2">
<h2>Accidental type conversion</h2>
<ul>
<li>Compilation with <code>-Wconversion</code> flags provide a hint</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash small-code number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a></a><span class="ex">$</span> gcc <span class="at">-Wconversion</span> conversion.c  <span class="at">-o</span> conversion</span>
<span id="cb15-2"><a></a><span class="ex">conversion.c:</span> In function ‘main’:</span>
<span id="cb15-3"><a></a><span class="ex">conversion.c:6:13:</span> warning: conversion from ‘double’ to ‘int’ may change value <span class="pp">[-</span><span class="ss">Wfloat</span><span class="pp">-</span><span class="ss">conversion</span><span class="pp">]</span></span>
<span id="cb15-4"><a></a>    <span class="ex">6</span> <span class="kw">|</span>     <span class="cf">if</span> <span class="kw">(</span><span class="ex">abs</span><span class="er">(</span><span class="ex">a</span><span class="kw">)</span> <span class="op">&gt;</span> 0<span class="kw">)</span> <span class="bu">printf</span><span class="er">(</span><span class="st">"abs(a) is greater than 0\n"</span><span class="kw">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<ul>
<li>The <code>abs</code> function is for <code>int</code>, <code>double a</code> was silently converted</li>
<li>Solution: use the <code>fabs</code> function</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb16-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb16-2"><a></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb16-3"><a></a></span>
<span id="cb16-4"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb16-5"><a></a>    <span class="dt">double</span> a <span class="op">=</span> <span class="op">-</span><span class="fl">1.6e12</span><span class="op">;</span></span>
<span id="cb16-6"><a></a>    <span class="cf">if</span> <span class="op">(</span>fabs<span class="op">(</span>a<span class="op">)</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> printf<span class="op">(</span><span class="st">"abs(a) is greater than 0</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb16-7"><a></a>    <span class="cf">else</span> printf<span class="op">(</span><span class="st">"abs(a) is smaller or equal to 0</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb16-8"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="variable-declaration" class="slide level2">
<h2>Variable declaration</h2>
<ul>
<li>C is statically typed, each variable has to be declared with type information: <code>int a, b;</code></li>
<li>Can be combined with an assignment, but no automatic initalization:
<ul>
<li><code>double x = 3.2, y;</code></li>
<li><code>double z = sqrt(2.0);</code></li>
</ul></li>
<li>Constants cannot be modified during runtime, <em>must</em> be assigned on declaration: <code>const int MINUTESPERHOUR = 60;</code>
<ul>
<li>Convention: names of constants are capitalized</li>
</ul></li>
</ul>
</section>
<section id="booleans" class="slide level2">
<h2>Booleans</h2>
<ul>
<li>The original C89 standard does not have a boolean type
<ul>
<li>true: non-zero integer, non-NULL pointer</li>
<li>false: zero, NULL pointer</li>
</ul></li>
<li>The C99 standard adds the <code>bool</code> type and <code>true/false</code> keywords (after including <code>&lt;stdbool.h&gt;</code>)</li>
<li>The C23 standard provides booleans by default</li>
<li>You can get by with the C89 approach, dedicated <code>bool</code> type might be somewhat more efficient in some cases</li>
</ul>
</section>
<section id="exercise-data-type-sizes" class="slide level2 smaller">
<h2>Exercise: data type sizes</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Print information about sizes and ranges of several types</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Understand C data types</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>Extend the program provided in <code>exercises/04_data_type_sizes</code> to print information about more types and ranges</li>
<li>Explain the relation between sizes and ranges</li>
</ul>
</section>
<section id="exercise-data-type-sizes-solution" class="slide level2">
<h2>Exercise: data type sizes solution</h2>
<p>Code:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb17-1"><a></a>printf<span class="op">(</span><span class="st">"The size of int is </span><span class="sc">%zu</span><span class="st"> bytes; it ranges from </span><span class="sc">%d</span><span class="st"> to </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span></span>
<span id="cb17-2"><a></a>       <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> INT_MIN<span class="op">,</span> INT_MAX<span class="op">);</span></span>
<span id="cb17-3"><a></a>printf<span class="op">(</span><span class="st">"The size of unsigned long int is </span><span class="sc">%zu</span><span class="st"> bytes; its max is </span><span class="sc">%lu\n</span><span class="st">"</span><span class="op">,</span></span>
<span id="cb17-4"><a></a>       <span class="kw">sizeof</span><span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">int</span><span class="op">),</span> ULONG_MAX<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a></a><span class="ex">The</span> size of int is 4 bytes<span class="kw">;</span> <span class="ex">it</span> ranges from <span class="at">-2147483648</span> to 2147483647</span>
<span id="cb18-2"><a></a><span class="ex">The</span> size of unsigned long int is 8 bytes<span class="kw">;</span> <span class="ex">its</span> max is 18446744073709551615</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>4 bytes = 32 bits: <code>int</code> is in <span class="math inline">\([-2^{31}, 2^{31}-1]\)</span></li>
<li>8 bytes = 64 bits: <code>unsigned long int</code> is in <span class="math inline">\([0, 2^{64}-1]\)</span></li>
</ul>
</section>
<section id="exercise-data-type-sizes-solution-1" class="slide level2">
<h2>Exercise: data type sizes solution</h2>
<p>Code:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb19-1"><a></a>printf<span class="op">(</span><span class="st">"The largest double that can be represented is </span><span class="sc">%6.1e\n</span><span class="st">"</span><span class="op">,</span> DBL_MAX<span class="op">);</span></span>
<span id="cb19-2"><a></a>printf<span class="op">(</span><span class="st">"The smallest positive double that can be represented is </span><span class="sc">%6.1e\n</span><span class="st">"</span><span class="op">,</span> DBL_MIN<span class="op">);</span></span>
<span id="cb19-3"><a></a>printf<span class="op">(</span><span class="st">"The machine epsilon is </span><span class="sc">%6.1e\n</span><span class="st">"</span><span class="op">,</span> DBL_EPSILON<span class="op">);</span></span>
<span id="cb19-4"><a></a>printf<span class="op">(</span><span class="st">"The number of digits is </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> DBL_DIG<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a></a><span class="ex">The</span> largest double that can be represented is 1.8e+308</span>
<span id="cb20-2"><a></a><span class="ex">The</span> smallest positive double that can be represented is 2.2e-308</span>
<span id="cb20-3"><a></a><span class="ex">The</span> machine epsilon is 2.2e-16</span>
<span id="cb20-4"><a></a><span class="ex">The</span> number of digits is 15</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Exponent has 11 bits -&gt; in range [-1023,1024] -&gt; <span class="math inline">\(2^{1024} \approx 10^{308}\)</span></li>
<li>Mantissa has 52 bits -&gt; 52 significant digits in binary -&gt; <span class="math inline">\(52 \log_{10} 2 \approx 15.6\)</span></li>
</ul>
</section></section>
<section>
<section id="operators" class="title-slide slide level1 center">
<h1>Operators</h1>

</section>
<section id="overview-of-operators" class="slide level2">
<h2>Overview of operators</h2>
<ul>
<li>arithmetic operators</li>
<li>relational operators</li>
<li>logical operators</li>
<li>bitwise operators</li>
<li>assignment operators</li>
<li>incremental operators</li>
<li>conditional operator</li>
</ul>
</section>
<section id="arithmetic-operators" class="slide level2">
<h2>Arithmetic operators</h2>
<ul>
<li>addition, subtraction: <code>+</code>, <code>-</code></li>
<li>multiplication, division: <code>*</code>, <code>/</code>
<ul>
<li>integer division truncates fractional part, <code>5/9</code> equals <code>0</code></li>
</ul></li>
<li>modulo (only for integers): <code>%</code></li>
<li><code>*</code>, <code>/</code>, <code>%</code> take precedence over <code>+</code> and <code>-</code></li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Use brackets for clarity instead of relying on precedence rules</p>
</div>
</div>
</div>
</div>
</section>
<section id="relational-operators" class="slide level2">
<h2>Relational operators</h2>
<ul>
<li>order:
<ul>
<li>smaller, smaller or equal: <code>&lt;</code>, <code>&lt;=</code></li>
<li>larger, larger or equal: <code>&gt;</code>, <code>&gt;=</code></li>
</ul></li>
<li>equality:
<ul>
<li>equal to, not equal to: <code>==</code>, <code>!=</code></li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Be careful when comparing doubles, e.g.&nbsp;<code>pow(sqrt(5.0), 2) == 5.0</code> is false!</p>
</div>
</div>
</div>
</div>
</section>
<section id="logical-operators" class="slide level2">
<h2>Logical operators</h2>
<ul>
<li>logical and, logical or: <code>&amp;&amp;</code>, <code>||</code>
<ul>
<li>evaluated left to right with early stopping,<br> <code>(i &lt; N) &amp;&amp; (a[i] &gt; 0)</code> will not access <code>a[i]</code> unless <code>i &lt; N</code></li>
</ul></li>
<li>unary negation <code>!</code>
<ul>
<li>converts non-zero operand into 0 and zero operand into 1</li>
<li>zero is false, non-zero is true</li>
</ul></li>
</ul>
</section>
<section id="incrementdecrement-operators" class="slide level2">
<h2>Increment/decrement operators</h2>
<ul>
<li>C specific shorthand notation
<ul>
<li>increment: <code>i = i + 1;</code> is the same as <code>i++;</code> or <code>++i;</code></li>
<li>decrement: <code>i = i - 1;</code> is the same as <code>i--;</code> or <code>--i;</code></li>
</ul></li>
<li>post/pre increment matters when value is used, for example in assignment:
<ul>
<li><code>int j = ++i;</code>: first increment <code>i</code>, then assign it to <code>j</code></li>
<li><code>int j = i++;</code>: first assign <code>i</code> to <code>j</code>, then increment <code>i</code></li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The name C++ can be interpreted as “incremented C”</p>
</div>
</div>
</div>
</div>
</section>
<section id="bitwise-operators" class="slide level2 smaller">
<h2>Bitwise operators</h2>
<p>Manipulate bits of integers (signed and unsigned <code>char</code>, <code>int</code>, <code>long</code>, …)</p>
<ul>
<li>Bitwise and, or, xor: <code>&amp;</code>, <code>|</code>, <code>^</code>
<ul>
<li><code>0011 &amp; 0101</code> -&gt; <code>0001</code></li>
</ul></li>
<li>Shift bits left, right: <code>&lt;&lt;</code>, <code>&gt;&gt;</code>
<ul>
<li><code>0111 1000 &gt;&gt; 2</code> -&gt; <code>xx01 1110</code></li>
<li>x is zero if unsigned, undefined otherwise</li>
</ul></li>
<li>One’s complement: <code>~</code>
<ul>
<li><code>~1101</code> -&gt; <code>0010</code></li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Bitwise operators are powerful, but also tedious. Use with care!</p>
</div>
</div>
</div>
</div>
</section>
<section id="assignment-operators" class="slide level2">
<h2>Assignment operators</h2>
<ul>
<li>Simple assignment is done with <code>=</code> (do not confuse with comparison <code>==</code>)</li>
<li>Assignment operators allow to compress statements:
<ul>
<li><code>i = i + 2;</code> is the same as <code>i += 2;</code></li>
<li>Most binary operators have a corresponding assignment operator</li>
<li>More concise, but often more intuitive as well</li>
</ul></li>
</ul>
</section>
<section id="conditional-expression" class="slide level2">
<h2>Conditional expression</h2>
<p>Conditional expression is a ternary operator <code>condition ? expr_true : expr_false</code></p>
<ul>
<li>Evaluate the <code>condition</code>
<ul>
<li>If true, evaluate <code>expr_true</code> as the result</li>
<li>If false, evaluate <code>expr_false</code> as the result</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb21-1"><a></a><span class="co">// z = max(a, b)</span></span>
<span id="cb21-2"><a></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-3"><a></a>    z <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb21-4"><a></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb21-5"><a></a>    z <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb21-6"><a></a><span class="op">}</span></span>
<span id="cb21-7"><a></a><span class="co">// same thing but shorter</span></span>
<span id="cb21-8"><a></a>z <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="precedence-and-associativity" class="slide level2">
<h2>Precedence and associativity</h2>
<ul>
<li>K&amp;R provide a table with precedence rules (2.12)
<ul>
<li>Make your code readable and maintable by using brackets</li>
</ul></li>
<li>C does not specify order of evaluation for most operators:
<ul>
<li>order can even depend on compiler options</li>
<li><code>x = f() + g();</code> might evaluate <code>g</code> before <code>f</code>
<ul>
<li>important if <code>g</code> alters variable used by <code>f</code></li>
</ul></li>
<li><code>a + b + c;</code> could be <code>(a + b) + c</code> or <code>a + (b + c)</code>
<ul>
<li>floating-point arithmetic does not preserve mathematical associativity</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="exercise-operators" class="slide level2">
<h2>Exercise: operators</h2>
<p><strong>Goal:</strong> Solve a few operator-related programming questions <strong>Learning outcome:</strong> Understand the basics of C operators <strong>Instructions:</strong> See <code>exercises/05_operators</code></p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>This exercise uses the <code>assert()</code> function to check your solution. This function can be useful for debugging, but should not be used in production code.</p>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>You can easily “cheat” the <code>assert()</code> statements, but that is not the intention of course.</p>
</div>
</div>
</div>
</section>
<section id="exercise-operators-solution" class="slide level2">
<h2>Exercise: operators solution</h2>
<p>Implement a function that returns if a year is a leap year: easy to achieve by combining modulo and logical operators.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb22-1"><a></a><span class="dt">int</span> isLeapYear<span class="op">(</span><span class="dt">int</span> year<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-2"><a></a>    <span class="co">/* Return 1 if year is a leap year and return 0 otherwise</span></span>
<span id="cb22-3"><a></a><span class="co">       A year is a leap year if:</span></span>
<span id="cb22-4"><a></a><span class="co">       - it is divisible by 4 but not by 100 OR</span></span>
<span id="cb22-5"><a></a><span class="co">       - it is disisible by 400</span></span>
<span id="cb22-6"><a></a><span class="co">    */</span></span>
<span id="cb22-7"><a></a>    <span class="cf">if</span> <span class="op">(</span> <span class="op">(</span>year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">||</span> <span class="op">(</span>year <span class="op">%</span> <span class="dv">400</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb22-8"><a></a>    <span class="cf">else</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb22-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="exercise-operators-solution-1" class="slide level2">
<h2>Exercise: operators solution</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb23-1"><a></a><span class="co">// Multiply i by 8 and store it in j, but without making use of the * operator</span></span>
<span id="cb23-2"><a></a><span class="co">// Hint: use a bitwise operator</span></span>
<span id="cb23-3"><a></a><span class="dt">int</span> i <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb23-4"><a></a><span class="dt">int</span> j <span class="op">=</span> i <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb23-5"><a></a>assert<span class="op">(</span>j <span class="op">==</span> <span class="dv">40</span><span class="op">);</span></span>
<span id="cb23-6"><a></a></span>
<span id="cb23-7"><a></a><span class="co">// Compute c as the minimal value of a and b without using an if-else statement</span></span>
<span id="cb23-8"><a></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">126</span><span class="op">;</span></span>
<span id="cb23-9"><a></a><span class="dt">int</span> b <span class="op">=</span> <span class="dv">45</span><span class="op">;</span></span>
<span id="cb23-10"><a></a><span class="dt">int</span> c <span class="op">=</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span>
<span id="cb23-11"><a></a>assert<span class="op">(</span>c <span class="op">==</span> b<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="control-flow" class="title-slide slide level1 center">
<h1>Control flow</h1>

</section>
<section id="control-flow-1" class="slide level2">
<h2>Control flow <sup>1</sup> <sup>2</sup></h2>
<ul>
<li>Control flow statements specify order in which computations are performed</li>
<li>Often multiple ways to achieve the same end result
<ul>
<li>Involves an element of personal preference</li>
<li>One way might provide faster code than another</li>
</ul></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn14"><p>Kernighan and Ritchie, Chapter 3, Control Flow</p></li><li id="fn15"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="statements-and-blocks" class="slide level2 smaller">
<h2>Statements and blocks</h2>
<ul>
<li>Use <code>;</code> to terminate a statement</li>
<li>Group multiple statements in blocks with braces <code>{}</code>
<ul>
<li><p>blocks can be nested</p></li>
<li><p>variables can be redeclared and have block scope</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb24-1"><a></a><span class="op">{</span></span>
<span id="cb24-2"><a></a>   <span class="dt">int</span> i <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// from here, i is 3</span></span>
<span id="cb24-3"><a></a>   <span class="op">{</span></span>
<span id="cb24-4"><a></a>      <span class="dt">int</span> i <span class="op">=</span> <span class="dv">5</span><span class="op">;</span> <span class="co">//from here, i is 5</span></span>
<span id="cb24-5"><a></a>   <span class="op">}</span></span>
<span id="cb24-6"><a></a>   <span class="co">// from here, i is 3 again</span></span>
<span id="cb24-7"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Use blocks to make your code <em>more</em> readable, unless you want to participate in the <a href="https://www.ioccc.org/">The International Obfuscated C Code Contest</a></p>
</div>
</div>
</div>
</section>
<section id="if-else-statement" class="slide level2">
<h2>if-else statement</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb25-1"><a></a><span class="cf">if</span> <span class="op">(</span>expression <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-2"><a></a>    statement_true<span class="op">;</span></span>
<span id="cb25-3"><a></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb25-4"><a></a>    statement_false<span class="op">;</span></span>
<span id="cb25-5"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:60%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    B{expression != 0} --&gt;|true| C[statement_true]
    B --&gt;|false| E[statement_false]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div></div>
<ul>
<li>The <code>else</code> clause is optional</li>
<li>For a single-line statement, braces are optional</li>
<li>Indentation is only for style, but helps for readability</li>
<li><code>if (expression)</code> is the same as <code>if (expression != 0)</code></li>
</ul>
</section>
<section id="else-if-statement" class="slide level2">
<h2>else-if statement</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb26-1"><a></a><span class="cf">if</span> <span class="op">(</span>expression1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-2"><a></a>    statement1<span class="op">;</span></span>
<span id="cb26-3"><a></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>expression2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-4"><a></a>    statement2<span class="op">;</span></span>
<span id="cb26-5"><a></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb26-6"><a></a>    statement3<span class="op">;</span></span>
<span id="cb26-7"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:60%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    B{expression1} --&gt;|true| C[statement1]
    B --&gt;|false| E{expression2}
    E --&gt;|true| F[statement2]
    E --&gt;|false| G[statement3]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div></div>
<ul>
<li>General way to write a multi-way decision</li>
<li>The <code>else</code> clause is optional</li>
</ul>
</section>
<section id="switch" class="slide level2">
<h2>Switch</h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb27-1"><a aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>expression<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-2"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dt">const</span><span class="op">-</span>expr1<span class="op">:</span> statements1</span>
<span id="cb27-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dt">const</span><span class="op">-</span>expr2<span class="op">:</span> statements2</span>
<span id="cb27-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span> statements3</span>
<span id="cb27-5"><a aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:55%;">

</div></div>
<ul>
<li>Multi-way decision to branch based on comparison with constant integer values</li>
<li>Fall through: execution goes to next case
<ul>
<li>You can leave a <code>switch</code> with <code>break</code> or <code>return</code></li>
</ul></li>
<li>Case expressions must be constant and unique</li>
<li><code>default</code> is optional</li>
</ul>
</section>
<section id="switch-example" class="slide level2">
<h2>Switch example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb28-1"><a aria-hidden="true" tabindex="-1"></a><span class="co">// Count occurrence of odd and even digits in a string</span></span>
<span id="cb28-2"><a aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb28-3"><a aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="ch">'0'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'2'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'4'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'6'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'8'</span><span class="op">:</span></span>
<span id="cb28-4"><a aria-hidden="true" tabindex="-1"></a>    neven<span class="op">++;</span></span>
<span id="cb28-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span><span class="op">;</span></span>
<span id="cb28-6"><a aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="ch">'1'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'3'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'5'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'7'</span><span class="op">:</span> <span class="cf">case</span> <span class="ch">'9'</span><span class="op">:</span></span>
<span id="cb28-7"><a aria-hidden="true" tabindex="-1"></a>    nodd<span class="op">++;</span></span>
<span id="cb28-8"><a aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="for-loop" class="slide level2">
<h2>For loop</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb29-1"><a></a><span class="co">// General for loop</span></span>
<span id="cb29-2"><a></a><span class="cf">for</span> <span class="op">(</span>expr1<span class="op">;</span> expr2<span class="op">;</span> expr3<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-3"><a></a>    statements<span class="op">;</span></span>
<span id="cb29-4"><a></a><span class="op">}</span></span>
<span id="cb29-5"><a></a><span class="co">// Most common usage</span></span>
<span id="cb29-6"><a></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> N<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb29-7"><a></a>    statements<span class="op">;</span></span>
<span id="cb29-8"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><code>expr1</code>: executed once at start, typically for initialization</li>
<li><code>expr2</code>: evaluated at start of each iteration, for loop stops if false</li>
<li><code>expr3</code>: evaluated at end of each iteration</li>
</ul>
</section>
<section id="for-loop-1" class="slide level2">
<h2>For loop</h2>
<ul>
<li><em>Should</em> be used when number of repetitions is known or computed</li>
<li>Each expression is optional, <code>for (;;) {}</code> is an infinite loop</li>
<li><code>break</code> in loop body terminates loop</li>
<li><code>continue</code> in loop body goes to next iteration</li>
</ul>
</section>
<section id="while-loop" class="slide level2">
<h2>While loop</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb30-1"><a></a><span class="co">// General while loop</span></span>
<span id="cb30-2"><a></a><span class="cf">while</span> <span class="op">(</span>expression<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-3"><a></a>    statements<span class="op">;</span></span>
<span id="cb30-4"><a></a><span class="op">}</span></span>
<span id="cb30-5"><a></a><span class="co">// Check if str contains c</span></span>
<span id="cb30-6"><a></a><span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> strlen<span class="op">(</span>str<span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-7"><a></a>    <span class="cf">if</span> <span class="op">(</span>str<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> c<span class="op">)</span></span>
<span id="cb30-8"><a></a>        found <span class="op">=</span> True<span class="op">;</span></span>
<span id="cb30-9"><a></a>    <span class="cf">else</span></span>
<span id="cb30-10"><a></a>        i<span class="op">++;</span></span>
<span id="cb30-11"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><code>statements</code> are executed zero or more times, as long as <code>expression</code> is true</li>
<li><em>should</em> be used when number of repetitions is unknown</li>
</ul>
</section>
<section id="do-while-loop" class="slide level2">
<h2>Do-While loop</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb31-1"><a></a><span class="co">// General while loop</span></span>
<span id="cb31-2"><a></a><span class="cf">do</span> <span class="op">{</span></span>
<span id="cb31-3"><a></a>    statements<span class="op">;</span></span>
<span id="cb31-4"><a></a><span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>expression<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><code>statements</code> are executed at least once, until <code>expression</code> is false</li>
<li>Similar to <code>while</code> loop, but <code>expression</code> is evaluated at end of iteration</li>
</ul>
</section>
<section id="goto-and-labels" class="slide level2 x-slide">
<h2>Goto and labels</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb32-1"><a></a><span class="cf">goto</span> label<span class="op">;</span></span>
<span id="cb32-2"><a></a><span class="op">...</span></span>
<span id="cb32-3"><a></a>label<span class="op">:</span></span>
<span id="cb32-4"><a></a>    statements<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><code>goto</code> allows to branch to a specified <code>label</code></li>
<li>never necessary, often makes code hard to read</li>
<li>even C inventors discourage it, do do not use it</li>
</ul>
</section></section>
<section>
<section id="functions-and-program-structure" class="title-slide slide level1 center">
<h1>Functions and Program Structure</h1>

</section>
<section id="functions-and-program-structure-1" class="slide level2">
<h2>Functions and Program Structure <sup>1</sup> <sup>2</sup></h2>
<ul>
<li>Functions break large computing tasks into smaller ones</li>
<li>Help to bring structure into code</li>
<li>Hide implementations details</li>
<li>Make it easier to reuse existing code</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn16"><p>Kernighan and Ritchie, Chapter 4, Functions and Program Structure</p></li><li id="fn17"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="basics-of-functions" class="slide level2 smaller">
<h2>Basics of functions</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb33-1"><a></a><span class="co">// General function definition</span></span>
<span id="cb33-2"><a></a><span class="cf">return</span><span class="op">-</span>type function<span class="op">-</span>name<span class="op">(</span>type1 arg1<span class="op">,</span> type2 arg2<span class="op">,</span> <span class="op">...)</span> <span class="op">{</span></span>
<span id="cb33-3"><a></a>    declarations and statements<span class="op">;</span></span>
<span id="cb33-4"><a></a>    <span class="cf">return</span> expression<span class="op">;</span></span>
<span id="cb33-5"><a></a><span class="op">}</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>A function can have no arguments: <code>int myFunction(void);</code></li>
<li>A function can return nothing: <code>void myFunction(int A);</code>
<ul>
<li>No <code>return</code> statement in body required</li>
</ul></li>
<li>The compiler requires a function to be <em>known</em> before it can process a call
<ul>
<li>Declare the function: <code>return-type function-name(type1 arg1, type2 arg2);</code></li>
<li>Declaration is promise to provide implementation later</li>
</ul></li>
</ul>
</section>
<section id="function-examples" class="slide level2">
<h2>Function examples</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb34-1"><a></a><span class="co">// The most minimal (useless) function</span></span>
<span id="cb34-2"><a></a>dummy<span class="op">()</span> <span class="op">{}</span></span>
<span id="cb34-3"><a></a><span class="co">// Compute the square of a floating-point number</span></span>
<span id="cb34-4"><a></a><span class="dt">double</span> square<span class="op">(</span><span class="dt">double</span> a<span class="op">)</span> <span class="op">{</span></span>
<span id="cb34-5"><a></a>    <span class="cf">return</span> a <span class="op">*</span> a<span class="op">;</span></span>
<span id="cb34-6"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="return-statements" class="slide level2 smaller">
<h2>Return statement(s)</h2>
<ul>
<li>A return statements returns a value (or nothing), but also returns control to the caller</li>
<li>A function can have multiple return statements, but at most one is executed in each call</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb35-1"><a></a><span class="dt">int</span> index<span class="op">(</span><span class="dt">char</span> c<span class="op">,</span> <span class="dt">char</span> s<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb35-2"><a></a>    <span class="dt">unsigned</span> i<span class="op">;</span></span>
<span id="cb35-3"><a></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> strlen<span class="op">(</span>s<span class="op">);</span> i<span class="op">++)</span></span>
<span id="cb35-4"><a></a>        <span class="cf">if</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> c<span class="op">)</span></span>
<span id="cb35-5"><a></a>            <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb35-6"><a></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb35-7"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>The returned expression is converted to function’s return type</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb36-1"><a></a><span class="co">// Valid, but dubious</span></span>
<span id="cb36-2"><a></a><span class="dt">int</span> returnInt<span class="op">()</span> <span class="op">{</span></span>
<span id="cb36-3"><a></a>    <span class="dt">double</span> a <span class="op">=</span> <span class="fl">5.0</span><span class="op">;</span></span>
<span id="cb36-4"><a></a>    <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb36-5"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="more-on-functions" class="slide level2 smaller">
<h2>More on functions</h2>
<ul>
<li><code>main</code> function is special: always the entry point of the program</li>
<li>C passes arguments by value, inside the function a local copy is made
<ul>
<li>changes to values are invisible outside of function</li>
<li>pointers (see Day 3) allow to circumvent limitations</li>
</ul></li>
<li>A function can only return one variable
<ul>
<li>pack multiple values in a <code>struct</code></li>
<li>use pointers (see Day 3) to pass out values</li>
<li>external variables (usually a bad idea)</li>
</ul></li>
</ul>
</section>
<section id="return-code-of-main-function" class="slide level2" data-background-color="lightgrey">
<h2>Return code of main function</h2>
<ul>
<li>The return code of <code>main</code> is passed as exit code to calling process</li>
<li>Convention is to return <code>0</code> in case of success, non-zero otherwise</li>
<li>Allows chaining dependent commands, for example in bash:
<ul>
<li><code>&amp;&amp;</code> only executes next command if previous one had exit code <code>0</code></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a></a><span class="ex">compile</span> <span class="kw">&amp;&amp;</span> <span class="ex">execute</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="return-code-of-main-function-1" class="slide level2" data-background-color="lightgrey">
<h2>Return code of main function</h2>
<ul>
<li><code>stdlib.h</code> defines some macros</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38" style="font-size:70%" data-code-line-numbers="10,17"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb38-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb38-2"><a></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb38-3"><a></a></span>
<span id="cb38-4"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb38-5"><a></a><span class="op">{</span></span>
<span id="cb38-6"><a></a>    <span class="dt">FILE</span><span class="op">*</span> fp <span class="op">=</span> fopen<span class="op">(</span><span class="st">"data.txt"</span><span class="op">,</span> <span class="st">"r"</span><span class="op">);</span></span>
<span id="cb38-7"><a></a>    <span class="cf">if</span> <span class="op">(</span>fp <span class="op">==</span> NULL<span class="op">)</span></span>
<span id="cb38-8"><a></a>    <span class="op">{</span></span>
<span id="cb38-9"><a></a>       fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"fopen() failed in file </span><span class="sc">%s</span><span class="st"> at line #</span><span class="sc">%d</span><span class="st">"</span><span class="op">,</span> __FILE__<span class="op">,</span> __LINE__<span class="op">);</span></span>
<span id="cb38-10"><a></a>       exit<span class="op">(</span>EXIT_FAILURE<span class="op">);</span></span>
<span id="cb38-11"><a></a>    <span class="op">}</span></span>
<span id="cb38-12"><a></a></span>
<span id="cb38-13"><a></a>    <span class="co">/* Normal processing continues here. */</span></span>
<span id="cb38-14"><a></a>    fclose<span class="op">(</span>fp<span class="op">);</span></span>
<span id="cb38-15"><a></a>    printf<span class="op">(</span><span class="st">"Normal Return</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb38-16"><a></a></span>
<span id="cb38-17"><a></a>    <span class="cf">return</span> EXIT_SUCCESS<span class="op">;</span></span>
<span id="cb38-18"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="external-variables" class="slide level2">
<h2>External variables</h2>
<ul>
<li>internal variable: defined <em>inside</em> function
<ul>
<li>lifetime and scope limited to function call</li>
</ul></li>
<li>external variable: defined <em>outside</em> function
<ul>
<li>bigger scope: globally accessible inside any function</li>
<li>longer lifetime: keeps value between calls</li>
<li>alternative for long list of function arguments</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>External variables typically make code less reusable, so generally they should be avoided</p>
</div>
</div>
</div>
</section>
<section id="external-variables-example" class="slide level2">
<h2>External variables example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb39-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb39-2"><a></a><span class="dt">int</span> external_variable<span class="op">;</span></span>
<span id="cb39-3"><a></a></span>
<span id="cb39-4"><a></a><span class="dt">void</span> someFunction<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb39-5"><a></a>    printf<span class="op">(</span><span class="st">"In someFunction, external variable is </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> external_variable<span class="op">);</span></span>
<span id="cb39-6"><a></a>    external_variable<span class="op">++;</span></span>
<span id="cb39-7"><a></a>    <span class="op">}</span></span>
<span id="cb39-8"><a></a></span>
<span id="cb39-9"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb39-10"><a></a>    external_variable <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb39-11"><a></a>    someFunction<span class="op">();</span></span>
<span id="cb39-12"><a></a>    printf<span class="op">(</span><span class="st">"in main, external variable is </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> external_variable<span class="op">);</span></span>
<span id="cb39-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb39-14"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<p>Value of <code>external_variable</code> persists:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a></a><span class="ex">$</span> ./a.out</span>
<span id="cb40-2"><a></a><span class="ex">In</span> someFunction, external variable is 1</span>
<span id="cb40-3"><a></a><span class="er">in</span> <span class="ex">main,</span> external variable is 2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="scope" class="slide level2">
<h2>Scope</h2>
<p>The <em>scope</em> of a variable or function is the part of the program where the variable of function can be used</p>
<ul>
<li>Local variables
<ul>
<li>From definition until end of block</li>
<li>Includes function arguments</li>
</ul></li>
<li>External variables
<ul>
<li>From definition until end of file</li>
<li>Can be used in multiple files by <em>declaring</em> with <code>extern</code> (not covered)</li>
</ul></li>
</ul>
</section>
<section id="header-files-and-build-systems" class="slide level2" data-background-color="lightgrey">
<h2>Header files and build systems</h2>
<ul>
<li>So far: small programs in one <code>.c</code> file: easy to compile</li>
<li>Larger projects: many source files
<ul>
<li>Order of compilation can matter because of dependencies</li>
<li>Difficult to remember compilation commands (linking and flags)</li>
<li>Editing one file does not require recompiling entirely</li>
</ul></li>
</ul>
</section>
<section id="header-files-and-build-systems-1" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Header files and build systems</h2>
<ul>
<li>Use header files:
<ul>
<li><code>.h</code> files containing shared definitions and declarations</li>
<li><code>#include "example.h"</code> or <code>#include &lt;stdio.h&gt;</code></li>
</ul></li>
<li>Use a build system (not covered here)
<ul>
<li>Makefile (<a href="https://github.com/hpcleuven/Makefile-intro">https://github.com/hpcleuven/Makefile-intro</a>]</li>
<li>CMake (<a href="https://github.com/hpcleuven/CMake-intro">https://github.com/hpcleuven/CMake-intro</a>]</li>
<li>Meson</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Most exercises can be compiled by running the <code>make</code> command in the exercise directory</p>
</div>
</div>
</div>
</section>
<section id="static-variables" class="slide level2">
<h2>Static variables</h2>
<ul>
<li>Internal variables with <code>static</code> declaration
<ul>
<li>Remain in existing across function calls</li>
<li>Provide permanent private storage within a single function</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb41-1"><a></a><span class="dt">unsigned</span> uniqueIdentifier<span class="op">()</span> <span class="op">{</span></span>
<span id="cb41-2"><a></a>    <span class="co">// id Indicates how many times the function has been called</span></span>
<span id="cb41-3"><a></a>    <span class="dt">static</span> <span class="dt">unsigned</span> id <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb41-4"><a></a>    <span class="cf">return</span> id<span class="op">++;</span></span>
<span id="cb41-5"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="static-functions" class="slide level2">
<h2>Static functions</h2>
<ul>
<li>Functions with <code>static</code> declaration
<ul>
<li>A static function is only visible within the file where it is declared</li>
<li>A <em>normal</em> function is visible everywhere</li>
</ul></li>
<li>External variables with <code>static</code> declaration
<ul>
<li>Can only be used in file where they are declared</li>
</ul></li>
</ul>
</section>
<section id="initialization" class="slide level2">
<h2>Initialization</h2>
<ul>
<li>Automatic internal variables
<ul>
<li>Without explicit initialization (such as <code>int x;</code>), values are “garbage”</li>
<li>Initial value can come from expression: <code>double y = sqrt(6.0);</code></li>
<li>Re-initialized each time the block is entered</li>
<li>Compiler can warn about uninitialized variables
<ul>
<li>E.g., <code>-Wuninitialized</code> for gcc (not perfect)</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="initialization-1" class="slide level2">
<h2>Initialization</h2>
<ul>
<li>Static internal variables
<ul>
<li>Guaranteed to initialize to zero</li>
<li>Initialization first time it is encountered</li>
<li>Expression or constant expression</li>
</ul></li>
<li>External variables
<ul>
<li>Guaranteed to initialize to zero</li>
<li>Initialized at start of execution</li>
<li>Constant expression</li>
</ul></li>
</ul>
</section>
<section id="recursion" class="slide level2 smaller">
<h2>Recursion</h2>
<p>Functions can call themselves (i.e.&nbsp;recursion)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb42-1"><a></a><span class="dt">unsigned</span> <span class="dt">long</span> fac<span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb42-2"><a></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> n <span class="op">==</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb42-3"><a></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb42-4"><a></a>    <span class="cf">else</span></span>
<span id="cb42-5"><a></a>        <span class="cf">return</span> n<span class="op">*</span>fac<span class="op">(</span>n<span class="op">-</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb42-6"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Each function call has overhead (pushing frame on stack)</li>
<li>Often not the fastest or lowest footprint
<ul>
<li>Deep recursion levels can even cause stack overflow</li>
</ul></li>
<li>Often closer to mathematical description</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>When turning on compiler optimizations, recursive functions might be automatically converted to a loop, especially in case of tail recursion (where the recursive call is the last statement).</p>
</div>
</div>
</div>
</div>
</section>
<section id="the-c-preprocessor" class="slide level2">
<h2>The C Preprocessor</h2>
<p>A few statements are processed <em>before</em> compilation</p>
<ul>
<li><code>#include "filename"</code> or <code>include &lt;filename&gt;</code></li>
<li><code>#define name replacement</code></li>
<li>conditional inclusions with <code>#if</code>, <code>#elif</code>, <code>#else</code>, <code>#endif</code></li>
</ul>
<p>In your head, do not interpret these as C code, but imagine their impact on the code presented to compiler.</p>
</section>
<section id="the-c-preprocessor-1" class="slide level2">
<h2>The C Preprocessor</h2>
<ul>
<li><code>#include "myheader.h"</code>: includes content from <code>myheader.h</code> in current directory verbatim</li>
<li><code>#include &lt;math.h&gt;</code>: includes content from <code>math.h</code> in include directory verbatim</li>
<li>guarantees all source files have same definitions and variable declarations</li>
</ul>
</section>
<section id="the-c-preprocessor-2" class="slide level2">
<h2>The C Preprocessor</h2>
<p>A macro substitution replaces each occurrence of a <code>name</code> with a <code>replacement</code>, for example <code>#define max(A, B) ((A) &gt; (B) ? (A) : (B))</code></p>
<ul>
<li>Every occurence of <code>max(x, y)</code> will be replaced</li>
<li>Use with care, can make code more readable, but also obfuscate when reading code for the first time</li>
<li>Macros avoid overhead associated with function call</li>
</ul>
</section>
<section id="the-c-preprocessor-3" class="slide level2">
<h2>The C Preprocessor</h2>
<p>Conditional inclusion gives control over preprocessor statements</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb43-1"><a></a><span class="co">// Prevent redefinition</span></span>
<span id="cb43-2"><a></a><span class="pp">#ifndef FOUR_PI</span></span>
<span id="cb43-3"><a></a><span class="pp">#define FOUR_PI </span><span class="dv">4</span><span class="pp"> </span><span class="op">*</span><span class="pp"> M_PI</span></span>
<span id="cb43-4"><a></a><span class="pp">#endif</span></span>
<span id="cb43-5"><a></a><span class="co">// Use SYSTEM to decide which header is included</span></span>
<span id="cb43-6"><a></a><span class="pp">#if SYSTEM == SYSV</span></span>
<span id="cb43-7"><a></a>    <span class="pp">#define HDR </span><span class="st">"sysv.h"</span></span>
<span id="cb43-8"><a></a><span class="pp">#elif SYSTEM == MSDOS</span></span>
<span id="cb43-9"><a></a>    <span class="pp">#define HDR </span><span class="st">"msdos.h"</span></span>
<span id="cb43-10"><a></a><span class="pp">#else</span></span>
<span id="cb43-11"><a></a>    <span class="pp">#define HDR </span><span class="st">"default.h"</span></span>
<span id="cb43-12"><a></a><span class="pp">#endif</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="variadic-functions" class="slide level2">
<h2>Variadic functions</h2>
<ul>
<li>C allows variable-length argument lists (variadic functions)</li>
<li>The <code>printf</code> function is an example we already encountered</li>
<li><code>stdarg.h</code> header provides utilities like <code>va_list,va_start,va_arg,va_end</code></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Use sparingly, variadic functions are somewhat unconventional</p>
</div>
</div>
</div>
</section>
<section id="variadic-functions-1" class="slide level2">
<h2>Variadic functions</h2>
<ul>
<li>Example: add variable number of integers:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb44-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb44-2"><a></a></span>
<span id="cb44-3"><a></a><span class="dt">int</span> add_integers<span class="op">(</span><span class="dt">int</span> count<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb44-4"><a></a><span class="op">{</span></span>
<span id="cb44-5"><a></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb44-6"><a></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb44-7"><a></a>    va_start<span class="op">(</span>args<span class="op">,</span> count<span class="op">);</span> <span class="co">// count can be omitted since C23</span></span>
<span id="cb44-8"><a></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-9"><a></a>        result <span class="op">+=</span> va_arg<span class="op">(</span>args<span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb44-10"><a></a>    <span class="op">}</span></span>
<span id="cb44-11"><a></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb44-12"><a></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb44-13"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="exercises" class="title-slide slide level1 center">
<h1>Exercises</h1>

</section>
<section id="compute-pi-using-monte-carlo" class="slide level2 smaller">
<h2>Compute <span class="math inline">\(\pi\)</span> using Monte Carlo</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program that approximates <span class="math inline">\(\pi\)</span> by using a Monte Carlo algorithm</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Write a loop and use control flow</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>The quarter unit circle in the first quadrant has area <span class="math inline">\(\frac{\pi}{4}\)</span>. Approximate this area by generating uniformly distributed points in <span class="math inline">\([0,1] \times [0,1]\)</span> (<code>get_random_double</code> is provided) and selecting points inside a unit circle</li>
<li>How does the estimate converge with the number of samples?</li>
<li>See <code>exercises/06_mc_pi</code>.</li>
</ul>
</section>
<section id="compute-pi-using-monte-carlo-1" class="slide level2 smaller">
<h2>Compute <span class="math inline">\(\pi\)</span> using Monte Carlo</h2>

<img data-src="images/mc_pi.png" class="r-stretch"></section>
<section id="compiler-optimization" class="slide level2" data-background-color="lightgrey">
<h2>Compiler optimization</h2>
<ul>
<li>Most compilers have flags to control to which extent executable is optimized</li>
<li>Examples of optimizations
<ul>
<li>Function inlining</li>
<li>Eliminating common subexpressions</li>
<li>Vectorization</li>
<li>Statements of source code are reordered</li>
<li>Loop reordering</li>
</ul></li>
</ul>
</section>
<section id="gcc-optimization-levels" class="slide level2 smaller" data-background-color="lightgrey">
<h2>GCC optimization levels</h2>
<ul>
<li><code>-O0</code>:
<ul>
<li>No optimization, machine code stays close to source code</li>
<li>Fast compilation, but slow at runtime</li>
<li>Good for debugging, <strong>never</strong> use for production runs!</li>
</ul></li>
<li><code>-O2</code> or <code>-O3</code>:
<ul>
<li>Optimize, but comply with standards</li>
<li>Slower compilation, but fast at runtime</li>
<li>Usually the best option for production runs</li>
</ul></li>
<li><code>-Ofast</code>:
<ul>
<li>Optimize and possibly ignore standards compliance</li>
<li>In principle the fastest execution</li>
<li><strong>Never</strong> use without checking results!</li>
</ul></li>
</ul>
</section>
<section id="monte-carlo-pi-timings" class="slide level2" data-background-color="lightgrey">
<h2>Monte Carlo <span class="math inline">\(\pi\)</span> timings</h2>
<ul>
<li><p>Compilation without optimizations:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a></a><span class="ex">$</span> gcc <span class="at">-O0</span> <span class="at">-o</span> mc_pi mc_pi.c <span class="kw">&amp;&amp;</span> <span class="ex">./mc_pi</span></span>
<span id="cb45-2"><a></a><span class="ex">Walltime</span> =    2.490s,      4.0e+07 iterations/s</span>
<span id="cb45-3"><a></a><span class="ex">Nsamples</span> = 100000000 Estimated pi =   3.14169792 Error =   1.0527e-04</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Compilation with optimizations:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a></a><span class="ex">$</span> gcc <span class="at">-O2</span> <span class="at">-o</span> mc_pi mc_pi.c <span class="kw">&amp;&amp;</span> <span class="ex">./mc_pi</span></span>
<span id="cb46-2"><a></a><span class="ex">Walltime</span> =    1.768s,      5.7e+07 iterations/s</span>
<span id="cb46-3"><a></a><span class="ex">Nsamples</span> = 100000000 Estimated pi =   3.14169792 Error =   1.0527e-04</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Main optimization in this case is probably inlining <code>get_random_double</code></p></li>
</ul>
</section>
<section id="fibonacci" class="slide level2 smaller">
<h2>Fibonacci</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program to compute the Fibonacci sequence</li>
</ul>
<p><strong>Learning outcome:</strong></p>
<ul>
<li>Write (recursive) functions</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>The Fibonacci sequence is defined by <span class="math inline">\({\displaystyle F_{n}=F_{n-1}+F_{n-2}}\)</span> and <span class="math inline">\(F_0=0, F_1=1\)</span></li>
<li>Compute the nth element by using a recursive function</li>
<li>Try to trigger a stack overflow for large n</li>
<li>Write a function without recursion</li>
<li>See <code>exercises/07_recursion</code></li>
</ul>
</section></section>
<section>
<section id="advanced-c" class="title-slide slide level1 center">
<h1>Advanced C</h1>

</section>
<section id="outline-3" class="slide level2">
<h2>Outline</h2>
<div style="display: flex; gap: 1em; flex-wrap: wrap;">
<div style="flex: 1 1 45%;">
<h3>
Day 1
</h3>
<details>
<summary>
Introduction
</summary>
<ul>
<li>
Motivation
</li>
<li>
Context
</li>
<li>
Course overview
</li>
</ul>
</details>
<details>
<summary>
Jumping in
</summary>
<ul>
<li>
Hello, world
</li>
<li>
Temperature conversion
</li>
<li>
Logistic map
</li>
</ul>
</details>
<h3>
Day 2
</h3>
<details>
<summary>
Basics of C
</summary>
<ul>
<li>
Types and operators
</li>
<li>
Control flow
</li>
<li>
Functions
</li>
</ul>
</details>
</div>
<div style="flex: 1 1 45%;">
<h3>
Day 3
</h3>
<details>
<summary>
Advanced C
</summary>
<ul>
<li>
Arrays and pointers
</li>
<li>
Structures
</li>
<li>
Input and output
</li>
</ul>
</details>
<h3>
Day 4
</h3>
<details>
<summary>
Beyond the core of C
</summary>
<ul>
<li>
External libraries
</li>
<li>
Segmentation faults
</li>
<li>
C standards
</li>
</ul>
</details>
<details>
<summary>
Wrapping up
</summary>
</details>
</div>
</div>
</section></section>
<section>
<section id="pointers-and-arrays" class="title-slide slide level1 center">
<h1>Pointers and arrays</h1>

</section>
<section id="pointers-and-arrays-1" class="slide level2">
<h2>Pointers and arrays <sup>1</sup> <sup>2</sup></h2>
<ul>
<li>C <strong>arrays</strong> store multiple values of the same type in a single variable</li>
<li>C <strong>pointers</strong> contain a memory address of a variable</li>
<li>Pointers and arrays are closely related in C</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn18"><p>Kernighan and Ritchie, Chapter 5, Pointers and arrays</p></li><li id="fn19"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="memory-management" class="slide level2">
<h2>Memory management</h2>
<ul>
<li class="fragment">Memory is one of the fundamental building blocks of current computer architectures (see von Neumann model)</li>
<li class="fragment">In many programming languages, memory management is transparent to programmer
<ul>
<li class="fragment">A variable is stored somewhere in memory, but the programmer does not know where</li>
<li class="fragment">Variables are referenced symbolically by programmer, program figures out memory location</li>
</ul></li>
<li class="fragment">C does allow managing memory yourself, so it needs a concept to allow working with memory addresses</li>
</ul>
</section>
<section id="pointer-basics" class="slide level2">
<h2>Pointer basics</h2>
<ul>
<li>A pointer is a variable that contains the memory location (address) of another variable</li>
<li>The <code>&amp;</code> operator gives the memory address of a variable</li>
<li>The <code>*</code> operator gives the value of the variable a pointer points to (dereferencing)</li>
<li>There are different types of pointers, depending on which type they point to</li>
<li>Declarations like <code>int *px</code> indicate that <code>px</code> is a pointer and <code>*px</code> is an <code>int</code></li>
</ul>
</section>
<section id="virtual-memory-layout" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Virtual memory layout</h2>
<div class="columns">
<div class="column" style="width:55%;">
<ul>
<li>I represent virtual memory as a table with three columns
<ul>
<li>Address column in hexadecimal format</li>
<li>Value column in decimal format</li>
<li>Variable column makes it easier to read, not present in actual implementation</li>
<li>Remember that internally it’s all binary</li>
<li>Some variables take up more than one address</li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>Variable</th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>int x</code></td>
<td><code>0x0000</code></td>
<td><code>42</code></td>
</tr>
<tr class="even">
<td><code>int y</code></td>
<td><code>0x0004</code></td>
<td><code>43</code></td>
</tr>
<tr class="odd">
<td><code>double a</code></td>
<td><code>0x0008</code></td>
<td><code>12.6e10</code></td>
</tr>
<tr class="even">
<td><code>double a</code></td>
<td><code>0x000c</code></td>
<td></td>
</tr>
<tr class="odd">
<td><code>float b</code></td>
<td><code>0x0010</code></td>
<td><code>3.14</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-naive-approach" class="slide level2">
<h2>Swapping variables: naive approach</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47" data-code-line-numbers="10"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb47-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb47-2"><a></a></span>
<span id="cb47-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb47-5"><a></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb47-6"><a></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb47-7"><a></a><span class="op">}</span></span>
<span id="cb47-8"><a></a></span>
<span id="cb47-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb47-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb47-11"><a></a>    swap<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb47-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb47-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb47-14"><a></a><span class="op">}</span></span>
<span id="cb47-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-naive-approach-1" class="slide level2">
<h2>Swapping variables: naive approach</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48" data-code-line-numbers="10,11,3"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb48-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb48-2"><a></a></span>
<span id="cb48-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb48-5"><a></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb48-6"><a></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb48-7"><a></a><span class="op">}</span></span>
<span id="cb48-8"><a></a></span>
<span id="cb48-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb48-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb48-11"><a></a>    swap<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb48-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb48-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb48-14"><a></a><span class="op">}</span></span>
<span id="cb48-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-naive-approach-2" class="slide level2">
<h2>Swapping variables: naive approach</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49" data-code-line-numbers="10,11,3,4"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb49-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb49-2"><a></a></span>
<span id="cb49-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb49-5"><a></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb49-6"><a></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb49-7"><a></a><span class="op">}</span></span>
<span id="cb49-8"><a></a></span>
<span id="cb49-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb49-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb49-11"><a></a>    swap<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb49-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb49-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb49-14"><a></a><span class="op">}</span></span>
<span id="cb49-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>temp</code></td>
<td><code>0x110</code></td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-naive-approach-3" class="slide level2">
<h2>Swapping variables: naive approach</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50" data-code-line-numbers="10,11,3-5"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb50-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb50-2"><a></a></span>
<span id="cb50-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb50-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb50-5"><a></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb50-6"><a></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb50-7"><a></a><span class="op">}</span></span>
<span id="cb50-8"><a></a></span>
<span id="cb50-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb50-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb50-11"><a></a>    swap<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb50-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb50-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb50-14"><a></a><span class="op">}</span></span>
<span id="cb50-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>10</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>temp</code></td>
<td><code>0x110</code></td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-naive-approach-4" class="slide level2">
<h2>Swapping variables: naive approach</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51" data-code-line-numbers="10,11,3-6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb51-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb51-2"><a></a></span>
<span id="cb51-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb51-5"><a></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb51-6"><a></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb51-7"><a></a><span class="op">}</span></span>
<span id="cb51-8"><a></a></span>
<span id="cb51-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb51-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb51-11"><a></a>    swap<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb51-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb51-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-14"><a></a><span class="op">}</span></span>
<span id="cb51-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>10</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>5</code></td>
</tr>
<tr class="odd">
<td><code>temp</code></td>
<td><code>0x110</code></td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-naive-approach-5" class="slide level2">
<h2>Swapping variables: naive approach</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52" data-code-line-numbers="10-12"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb52-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb52-2"><a></a></span>
<span id="cb52-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb52-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb52-5"><a></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb52-6"><a></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb52-7"><a></a><span class="op">}</span></span>
<span id="cb52-8"><a></a></span>
<span id="cb52-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb52-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb52-11"><a></a>    swap<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb52-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb52-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-14"><a></a><span class="op">}</span></span>
<span id="cb52-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb53"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb53-1"><a></a><span class="ex">x</span> = 5, y = 10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="working-with-large-arrays" class="slide level2">
<h2>Working with large arrays</h2>
<ul>
<li class="fragment">Suppose you construct vectors using a <code>struct</code> (see later)</li>
<li class="fragment">You want a function <code>double innerProduct(struct vector v1, struct vector v2)</code> that computes the inner product</li>
<li class="fragment">Since C uses pass-by-value, those objects would be copied when function is called</li>
<li class="fragment">Memory access is slow, this would give bad performance for large cases</li>
</ul>
<p>=&gt; This is also addressed by pointers</p>
</section>
<section id="pointer-basics-1" class="slide level2">
<h2>Pointer basics</h2>
<ul>
<li>A pointer is a variable that contains the address of a variable</li>
<li>Pointer arguments allow modifying object in the called function</li>
<li>There are different pointer types, depending on the variable they point to, for example, <code>int *px;</code> or <code>double *pa;</code></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Mnemonic: read <code>int *px</code> as “<code>*px</code> is of type <code>int</code>”. Sometimes people also use <code>int* px</code> to declare an integer pointer.</p>
</div>
</div>
</div>
</section>
<section id="pointer-basics-2" class="slide level2">
<h2>Pointer basics</h2>
<ul>
<li>The <code>&amp;</code> operator gives the address of a variable</li>
<li>The <code>*</code> operator dereferences a pointer, i.e., gives the value of the variable that is pointed to</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb54-1"><a></a><span class="dt">int</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">;</span></span>
<span id="cb54-2"><a></a><span class="dt">int</span> <span class="op">*</span>px<span class="op">;</span></span>
<span id="cb54-3"><a></a></span>
<span id="cb54-4"><a></a>px <span class="op">=</span> <span class="op">&amp;</span>x<span class="op">;</span> <span class="co">// px now points to x, i.e. it holds the address of x</span></span>
<span id="cb54-5"><a></a>y <span class="op">=</span> <span class="op">*</span>px<span class="op">;</span> <span class="co">// y now holds the value of the object px points to, i.e. y = 1</span></span>
<span id="cb54-6"><a></a><span class="op">*</span>px <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="co">// the value of the object px points to is set, i.e. x = 10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="swapping-variables-pointers" class="slide level2">
<h2>Swapping variables: pointers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb55" data-code-line-numbers="10"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb55-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb55-2"><a></a></span>
<span id="cb55-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb55-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb55-5"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb55-6"><a></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb55-7"><a></a><span class="op">}</span></span>
<span id="cb55-8"><a></a></span>
<span id="cb55-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb55-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb55-11"><a></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb55-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb55-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb55-14"><a></a><span class="op">}</span></span>
<span id="cb55-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-pointers-1" class="slide level2">
<h2>Swapping variables: pointers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56" data-code-line-numbers="10,11,3"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb56-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb56-2"><a></a></span>
<span id="cb56-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb56-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb56-5"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb56-6"><a></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb56-7"><a></a><span class="op">}</span></span>
<span id="cb56-8"><a></a></span>
<span id="cb56-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb56-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb56-11"><a></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb56-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb56-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb56-14"><a></a><span class="op">}</span></span>
<span id="cb56-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>0x100</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>0x104</code></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-pointers-2" class="slide level2">
<h2>Swapping variables: pointers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb57" data-code-line-numbers="10,11,3-4"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb57-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb57-2"><a></a></span>
<span id="cb57-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb57-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb57-5"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb57-6"><a></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb57-7"><a></a><span class="op">}</span></span>
<span id="cb57-8"><a></a></span>
<span id="cb57-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb57-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb57-11"><a></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb57-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb57-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb57-14"><a></a><span class="op">}</span></span>
<span id="cb57-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>5</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>0x100</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>0x104</code></td>
</tr>
<tr class="odd">
<td><code>temp</code></td>
<td><code>0x110</code></td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-pointers-3" class="slide level2">
<h2>Swapping variables: pointers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb58" data-code-line-numbers="10,11,3-5"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb58-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb58-2"><a></a></span>
<span id="cb58-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb58-5"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb58-6"><a></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb58-7"><a></a><span class="op">}</span></span>
<span id="cb58-8"><a></a></span>
<span id="cb58-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb58-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb58-11"><a></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb58-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb58-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb58-14"><a></a><span class="op">}</span></span>
<span id="cb58-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>10</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>10</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>0x100</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>0x104</code></td>
</tr>
<tr class="odd">
<td><code>temp</code></td>
<td><code>0x110</code></td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-pointers-4" class="slide level2">
<h2>Swapping variables: pointers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59" data-code-line-numbers="10,3-6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb59-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb59-2"><a></a></span>
<span id="cb59-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb59-5"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb59-6"><a></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb59-7"><a></a><span class="op">}</span></span>
<span id="cb59-8"><a></a></span>
<span id="cb59-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb59-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb59-11"><a></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb59-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb59-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb59-14"><a></a><span class="op">}</span></span>
<span id="cb59-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>10</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>5</code></td>
</tr>
<tr class="odd">
<td><code>a</code></td>
<td><code>0x108</code></td>
<td><code>0x100</code></td>
</tr>
<tr class="even">
<td><code>b</code></td>
<td><code>0x10C</code></td>
<td><code>0x104</code></td>
</tr>
<tr class="odd">
<td><code>temp</code></td>
<td><code>0x110</code></td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="swapping-variables-pointers-5" class="slide level2">
<h2>Swapping variables: pointers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb60" data-code-line-numbers="10-12"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb60-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb60-2"><a></a></span>
<span id="cb60-3"><a></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb60-4"><a></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb60-5"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb60-6"><a></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb60-7"><a></a><span class="op">}</span></span>
<span id="cb60-8"><a></a></span>
<span id="cb60-9"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb60-10"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb60-11"><a></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb60-12"><a></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb60-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb60-14"><a></a><span class="op">}</span></span>
<span id="cb60-15"><a></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb61"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a></a><span class="ex">x</span> = 10, y = 5</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th>Address</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td><code>0x100</code></td>
<td><code>10</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td><code>0x104</code></td>
<td><code>5</code></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>&nbsp;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="arrays" class="slide level2">
<h2>Arrays</h2>
<ul>
<li>An array is a block of consecutive objects of a specified type
<ul>
<li><code>int a[10];</code> declares 10 consecutive <code>int</code> objects</li>
<li>The i-th element can be accessed as <code>a[i]</code></li>
</ul></li>
<li>Pointers are a natural way to loop over arrays</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb62-1"><a></a><span class="dt">int</span> a<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb62-2"><a></a><span class="dt">int</span> <span class="op">*</span>pa<span class="op">;</span></span>
<span id="cb62-3"><a></a>pa <span class="op">=</span> <span class="op">&amp;</span>a<span class="op">[</span><span class="dv">0</span><span class="op">];</span> <span class="co">// pa points to first element of a</span></span>
<span id="cb62-4"><a></a>pa<span class="op">++;</span> <span class="co">// pa now points to second element of a</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>When pointing to array elements, incrementing a pointer <em>always</em> means going to the next object irrespective of the object type!</p>
</div>
</div>
</div>
</section>
<section id="array-indexing-sourcery" class="slide level2">
<h2>Array indexing sourcery</h2>
<ul>
<li class="fragment">In C, the name of an array is a synonym for the memory address of the initial element
<ul>
<li class="fragment"><code>int *pa = &amp;a[0]</code> is identical to <code>int *pa = a</code></li>
</ul></li>
<li class="fragment">Access to the i-th element <code>a[i]</code> is translated to <code>*(a+i)</code></li>
<li class="fragment">Because integer addition is commutative, <code>a[i]</code> is identical to <code>i[a]</code>!</li>
</ul>
</section>
<section id="arrays-as-function-arguments" class="slide level2">
<h2>Arrays as function arguments</h2>
<ul>
<li>When passing an array to a function, the location of the initial element is passed</li>
<li>Within the called function, the corresponding local variable is a pointer</li>
<li>You can pass a part of an array to a function
<ul>
<li><code>f(&amp;a[2])</code> passes the subarray that starts at <code>a[2]</code></li>
</ul></li>
</ul>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>You cannot pass a <em>slice</em> of an array, the called function is responsible to respect the bounds of the array. This is one of the reasons why C programs are often considered at risk for unsafe memory management.</p>
</div>
</div>
</div>
</section>
<section id="array-decay" class="slide level2 smaller">
<h2>Array decay</h2>
<ul>
<li>When passed to a function, an array decays into a pointer to its first element</li>
<li><code>sizeof(arr)</code> inside function gives size of pointer, not array</li>
<li>Array length information is lost</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb63"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb63-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb63-2"><a></a></span>
<span id="cb63-3"><a></a><span class="dt">void</span> foo<span class="op">(</span><span class="dt">int</span> arr<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb63-4"><a></a>    printf<span class="op">(</span><span class="st">"sizeof(arr) = </span><span class="sc">%zu\n</span><span class="st">"</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">));</span> <span class="co">// prints size of pointer</span></span>
<span id="cb63-5"><a></a><span class="op">}</span></span>
<span id="cb63-6"><a></a></span>
<span id="cb63-7"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb63-8"><a></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb63-9"><a></a>    printf<span class="op">(</span><span class="st">"sizeof(arr) = </span><span class="sc">%zu\n</span><span class="st">"</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">));</span> <span class="co">// prints size of array</span></span>
<span id="cb63-10"><a></a>    foo<span class="op">(</span>arr<span class="op">);</span></span>
<span id="cb63-11"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb64"><pre class="sourceCode numberSource bash small-code number-lines code-with-copy"><code class="sourceCode bash"><span id="cb64-1"><a></a><span class="ex">sizeof</span><span class="er">(</span><span class="ex">arr</span><span class="kw">)</span> <span class="ex">=</span> 40</span>
<span id="cb64-2"><a></a><span class="ex">sizeof</span><span class="er">(</span><span class="ex">arr</span><span class="kw">)</span> <span class="ex">=</span> 8</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="character-pointers" class="slide level2">
<h2>Character pointers</h2>
<ul>
<li>C does not have a basic string type</li>
<li>An array of characters is very similar to a string</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb65-1"><a></a><span class="dt">char</span> amessage<span class="op">[]</span> <span class="op">=</span> <span class="st">"My first string"</span><span class="op">;</span></span>
<span id="cb65-2"><a></a><span class="dt">char</span> <span class="op">*</span>pmessage <span class="op">=</span> <span class="st">"My second string"</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>String constants are terminated with <code>\0</code> internally
<ul>
<li>Allows to know where string ends</li>
<li>You do not need to know this if you use functions from the standard library to work with strings</li>
</ul></li>
</ul>
</section>
<section id="dynamic-memory-allocation" class="slide level2 smaller">
<h2>Dynamic memory allocation</h2>
<ul>
<li>The C89 standard does not allow variable length arrays
<ul>
<li>Array size must be known at compile time</li>
<li><code>size_t len = 5; int a[len];</code> is strictly speaking invalid</li>
<li>Since C99 it is supported and many compilers allow it by default</li>
</ul></li>
<li>Even if you can have VLAs, there are some downsides
<ul>
<li>Allocated on stack, so limited in size</li>
<li>Scope is local, similar as other variables</li>
<li>VLA <em>might</em> be less efficient</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Variable length refers to the fact that length is only known at runtime, a variable length array remains of the same size during its lifetime.</p>
</div>
</div>
</div>
</section>
<section id="dynamic-memory-allocation-1" class="slide level2 smaller">
<h2>Dynamic memory allocation</h2>
<ul>
<li class="fragment">Memory for arrays can be dynamically allocated on the heap
<ul>
<li class="fragment">Heap is a large area of memory used at runtime</li>
<li class="fragment">Signature: <code>void *malloc(size_t size);</code></li>
<li class="fragment"><code>size</code> is in bytes: make use of <code>sizeof</code></li>
<li class="fragment">returns <code>void</code> pointer, cast it to correct pointer type</li>
<li class="fragment">if memory cannot be allocated, null pointer is returned</li>
<li class="fragment"><em>always</em> <code>free()</code> the memory <em>exactly</em> once!</li>
<li class="fragment"><code>calloc</code>: includes initializing to zero (so slower than <code>malloc</code>)</li>
</ul></li>
</ul>
</section>
<section id="dynamic-memory-allocation-2" class="slide level2">
<h2>Dynamic memory allocation</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb66-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb66-2"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">**</span>argv<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-3"><a></a>    <span class="dt">size_t</span> len <span class="op">=</span> atoi<span class="op">(</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb66-4"><a></a>    <span class="dt">double</span> <span class="op">*</span>pa <span class="op">=</span> <span class="op">(</span><span class="dt">double</span> <span class="op">*)</span> malloc<span class="op">(</span>len <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb66-5"><a></a>    <span class="cf">if</span> <span class="op">(</span>pa <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;}</span></span>
<span id="cb66-6"><a></a>    free<span class="op">(</span>pa<span class="op">);</span></span>
<span id="cb66-7"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb66-8"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="multidimensional-arrays" class="slide level2">
<h2>Multidimensional arrays</h2>
<ul>
<li>C supports multidimensional arrays by using multiple <code>[]</code></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb67"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb67-1"><a></a><span class="dt">int</span> matrix<span class="op">[</span><span class="dv">2</span><span class="op">][</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb67-2"><a></a>    <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">},</span></span>
<span id="cb67-3"><a></a>    <span class="op">{</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">}</span></span>
<span id="cb67-4"><a></a><span class="op">};</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Indexing is done with <code>[i][j]</code> (not <code>[i,j]</code>)</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb68-1"><a></a><span class="dt">int</span> x <span class="op">=</span> matrix<span class="op">[</span><span class="dv">1</span><span class="op">][</span><span class="dv">2</span><span class="op">]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>C uses row-major storage: last dimension is fastest in memory</li>
</ul>
</section>
<section id="pointers-to-pointers" class="slide level2">
<h2>Pointers to pointers</h2>
<ul>
<li>A pointer is also a variable -&gt; another pointer can point to its address</li>
<li>In contrast to multidimensional arrays, we can now have irregular structures</li>
<li>Example: storing an upper triangular matrix</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb69-1"><a></a><span class="dt">double</span> <span class="op">**</span>lower<span class="op">;</span></span>
<span id="cb69-2"><a></a>lower <span class="op">=</span> <span class="op">(</span><span class="dt">double</span> <span class="op">**)</span>malloc<span class="op">(</span> n <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span> <span class="op">*))</span></span>
<span id="cb69-3"><a></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb69-4"><a></a>    lower<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="dt">double</span> <span class="op">*)</span>malloc<span class="op">(</span> <span class="op">(</span>n <span class="op">-</span> i<span class="op">)</span> <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb69-5"><a></a><span class="op">}</span></span>
<span id="cb69-6"><a></a><span class="op">...</span></span>
<span id="cb69-7"><a></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb69-8"><a></a>    free<span class="op">(</span>lower<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb69-9"><a></a><span class="op">}</span></span>
<span id="cb69-10"><a></a>free<span class="op">(</span>lower<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="arrays-of-pointers" class="slide level2">
<h2>Arrays of pointers</h2>
<ul>
<li>By now it should be clear pointers and arrays are very similar</li>
<li>The previous example as an array of pointers:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb70"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb70-1"><a></a><span class="dt">double</span> <span class="op">*</span>lower<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb70-2"><a></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb70-3"><a></a>    lower<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="dt">double</span> <span class="op">*)</span>malloc<span class="op">(</span> <span class="op">(</span>n <span class="op">-</span> i<span class="op">)</span> <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb70-4"><a></a><span class="op">}</span></span>
<span id="cb70-5"><a></a><span class="op">...</span></span>
<span id="cb70-6"><a></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb70-7"><a></a>    free<span class="op">(</span>lower<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb70-8"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pointers-to-functions" class="slide level2">
<h2>Pointers to functions</h2>
<ul>
<li>Example
<ul>
<li>When <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are close, the integral <span class="math inline">\(\int_a^{b} f(x) dx \approx \frac{1}{2} \frac{f(a) + f(b)}{b-a}\)</span></li>
<li>This rule can be written for any <span class="math inline">\(f(x)\)</span> as:</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb71"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb71-1"><a></a><span class="dt">double</span> trapezoidRule <span class="op">(</span><span class="dt">double</span> <span class="op">(*</span>f<span class="op">)(</span><span class="dt">double</span><span class="op">),</span> <span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb71-2"><a></a>    <span class="cf">return</span> <span class="op">(</span>b<span class="op">-</span>a<span class="op">)*(</span>f<span class="op">(</span>a<span class="op">)</span> <span class="op">+</span> f<span class="op">(</span>b<span class="op">))/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb71-3"><a></a><span class="op">}</span></span>
<span id="cb71-4"><a></a><span class="dt">double</span> trap <span class="op">=</span> trapezoidRule<span class="op">(</span>cos<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> M_PI<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="exercises-1" class="title-slide slide level1 center">
<h1>Exercises</h1>

</section>
<section id="quadrature" class="slide level2 smaller">
<h2>Quadrature</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program that can numerically integrate arbitrary functions</li>
</ul>
<p><strong>Learning outcome:</strong></p>
<ul>
<li>Use pointers to let functions operate on arrays and functions</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>Write a function that allocates an array, with evenly spaced real numbers in a chosen interval as entries</li>
<li>Write a function that approximates the integral of <code>sin</code> and <code>cos^2</code> on the chosen interval</li>
<li>See <code>exercises/08_quadrature</code></li>
</ul>
</section>
<section id="heat-equation" class="slide level2 smaller">
<h2>Heat equation</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program that solves the 2D heat equation</li>
</ul>
<p><strong>Learning outcome:</strong></p>
<ul>
<li>Learn to work with multi-dimensional arrays</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>See <code>exercises/09_heat_equation</code></li>
</ul>
</section>
<section id="heat-equation-memory-leak" class="slide level2">
<h2>Heat equation memory leak</h2>
<ul>
<li>The provided code allocated memory at <strong>each</strong> iteration without ever freeing it</li>
<li>This is a memory leak: for larger grids and/or more steps, you would run out of memory</li>
<li>Make sure to <strong>always</strong> free memory you allocated with <code>malloc/calloc</code></li>
<li>In this case the allocation only has to be done once (outside of the loop)</li>
</ul>
</section></section>
<section>
<section id="structures" class="title-slide slide level1 center">
<h1>Structures</h1>

</section>
<section id="structures-1" class="slide level2">
<h2>Structures <sup>1</sup> <sup>2</sup></h2>
<ul>
<li>A structure is a collection of one or more variables, possibly of different types</li>
<li>Makes it convenient to organize and handle complicated data</li>
<li>A very lightweight class (but do not call C object-oriented):
<ul>
<li>No inheritance</li>
<li>No class methods</li>
</ul></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn20"><p>Kernighan and Ritchie, Chapter 6, Structures</p></li><li id="fn21"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="structure-example" class="slide level2">
<h2>Structure example</h2>
<ul>
<li>A structure is defined with <code>struct</code>, usually followed by a tag as a name</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb72"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb72-1"><a></a><span class="kw">struct</span> particle <span class="op">{</span></span>
<span id="cb72-2"><a></a>    <span class="dt">double</span> x<span class="op">;</span></span>
<span id="cb72-3"><a></a>    <span class="dt">double</span> y<span class="op">;</span></span>
<span id="cb72-4"><a></a>    <span class="dt">double</span> z<span class="op">;</span></span>
<span id="cb72-5"><a></a>    <span class="dt">double</span> mass<span class="op">;</span></span>
<span id="cb72-6"><a></a>    <span class="dt">char</span> symbol<span class="op">;</span></span>
<span id="cb72-7"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>The variables named in the <code>struct</code> are members and can be accessed with the <code>.</code> operator</li>
</ul>
</section>
<section id="structure-example-1" class="slide level2">
<h2>Structure example</h2>
<ul>
<li>A <code>struct</code> can be initialized directly or member-by-member</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb73-1"><a></a><span class="kw">struct</span> particle p1<span class="op">;</span></span>
<span id="cb73-2"><a></a>p1<span class="op">.</span>x <span class="op">=</span> <span class="fl">1.0</span><span class="op">;</span></span>
<span id="cb73-3"><a></a>p1<span class="op">.</span>y <span class="op">=</span> <span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb73-4"><a></a>p1<span class="op">.</span>z <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span>
<span id="cb73-5"><a></a>p1<span class="op">.</span>mass <span class="op">=</span> <span class="fl">1.000784</span><span class="op">;</span></span>
<span id="cb73-6"><a></a>p1<span class="op">.</span>symbol <span class="op">=</span> <span class="ch">'H'</span><span class="op">;</span></span>
<span id="cb73-7"><a></a><span class="kw">struct</span> particle p2 <span class="op">=</span> <span class="op">{</span><span class="fl">2.0</span><span class="op">,</span> <span class="fl">4.0</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">,</span> <span class="fl">12.011</span><span class="op">,</span> <span class="ch">'C'</span><span class="op">};</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Initializing member-by-member is a bit more robust when the <code>struct</code> definition changes</p>
</div>
</div>
</div>
</div>
</section>
<section id="structures-and-functions" class="slide level2">
<h2>Structures and functions</h2>
<ul>
<li>Functions can operate on structures much the same way as basic types</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb74"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb74-1"><a></a><span class="kw">struct</span> particle centerOfMass<span class="op">(</span><span class="kw">struct</span> particle p1<span class="op">,</span> <span class="kw">struct</span> particle p2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb74-2"><a></a>    <span class="dt">double</span> mass <span class="op">=</span> p1<span class="op">.</span>m <span class="op">+</span> p2<span class="op">.</span>m<span class="op">;</span></span>
<span id="cb74-3"><a></a>    <span class="kw">struct</span> particle com<span class="op">;</span></span>
<span id="cb74-4"><a></a>    com<span class="op">.</span>x <span class="op">=</span> <span class="op">(</span>p1<span class="op">.</span>x <span class="op">*</span> p1<span class="op">.</span>m <span class="op">+</span> p2<span class="op">.</span>x <span class="op">*</span> p2<span class="op">.</span>m<span class="op">)</span> <span class="op">/</span> mass<span class="op">;</span></span>
<span id="cb74-5"><a></a>    com<span class="op">.</span>y <span class="op">=</span> <span class="op">(</span>p1<span class="op">.</span>y <span class="op">*</span> p1<span class="op">.</span>m <span class="op">+</span> p2<span class="op">.</span>y <span class="op">*</span> p2<span class="op">.</span>m<span class="op">)</span> <span class="op">/</span> mass<span class="op">;</span></span>
<span id="cb74-6"><a></a>    com<span class="op">.</span>z <span class="op">=</span> <span class="op">(</span>p1<span class="op">.</span>z <span class="op">*</span> p1<span class="op">.</span>m <span class="op">+</span> p2<span class="op">.</span>z <span class="op">*</span> p2<span class="op">.</span>m<span class="op">)</span> <span class="op">/</span> mass<span class="op">;</span></span>
<span id="cb74-7"><a></a>    com<span class="op">.</span>mass <span class="op">=</span> mass</span>
<span id="cb74-8"><a></a>    <span class="cf">return</span> com<span class="op">;</span></span>
<span id="cb74-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="arrays-of-structures" class="slide level2">
<h2>Arrays of structures</h2>
<ul>
<li>Arrays can be made up of <code>struct</code>s</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb75"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb75-1"><a></a><span class="co">// Make an array with n particles</span></span>
<span id="cb75-2"><a></a><span class="kw">struct</span> particle particles<span class="op">[</span>n<span class="op">];</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<ul>
<li>Defined in this way, accessing all <code>x</code> coordinates would give strided memory access
<ul>
<li>Having a struct with arrays can be more efficient than an array of structs</li>
<li>Depends on the specific application</li>
</ul></li>
</ul>
</div>
</section>
<section id="structures-and-pointers" class="slide level2">
<h2>Structures and pointers</h2>
<ul>
<li>Structures are variables, so you can point to their address</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb76"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb76-1"><a></a><span class="dt">void</span> translateX<span class="op">(</span><span class="kw">struct</span> particle <span class="op">*</span>p<span class="op">,</span> <span class="dt">double</span> distance<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-2"><a></a>    <span class="op">(*</span>p<span class="op">).</span>x <span class="op">+=</span> distance<span class="op">;</span></span>
<span id="cb76-3"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<ul>
<li>A member of a pointer can be accessed with <code>-&gt;</code>
<ul>
<li>If <code>p</code> is a pointer to a <code>struct particle</code>, <code>(*p).x</code> is the same as <code>p-&gt;x</code></li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb77-1"><a></a><span class="dt">void</span> translateX<span class="op">(</span><span class="kw">struct</span> particle <span class="op">*</span>p<span class="op">,</span> <span class="dt">double</span> distance<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-2"><a></a>    p<span class="op">-&gt;</span>x <span class="op">+=</span> distance<span class="op">;</span></span>
<span id="cb77-3"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="structures-and-pointers-1" class="slide level2">
<h2>Structures and pointers</h2>
<ul>
<li>The <code>.</code> and <code>-&gt;</code> operators have highest precedence:
<ul>
<li><code>*p.x</code> would be interpreted as <code>*(p.x)</code> (unwanted in our example)</li>
<li>use brackets to make your intention clear</li>
</ul></li>
</ul>
</section>
<section id="common-data-structures" class="slide level2 smaller">
<h2>Common data structures</h2>
<ul>
<li class="fragment">Multidimensional arrays
<ul>
<li class="fragment">Regular and fixed structure, only members of a single type</li>
</ul></li>
<li class="fragment">Linked lists
<ul>
<li class="fragment">Allow dynamic lengths and make insertion easy</li>
</ul></li>
<li class="fragment">Trees
<ul>
<li class="fragment">Represent hierarchical data</li>
</ul></li>
<li class="fragment">Graph
<ul>
<li class="fragment">More general than trees, allow more complicated topologies</li>
</ul></li>
</ul>
</section>
<section id="typedef" class="slide level2 smaller">
<h2>Typedef</h2>
<p>The <code>typedef</code> keyword creates an alias for an existing data type</p>
<ul>
<li class="fragment"><p>To abbreviate a long type name:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb78"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb78-1"><a></a><span class="kw">typedef</span> <span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">int</span> ULINT<span class="op">;</span></span>
<span id="cb78-2"><a></a>ULINT i<span class="op">;</span> <span class="co">// Equivalent to unsigned long int i;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li class="fragment"><p>To facilitate switching between precisions or improve portability:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb79-1"><a></a><span class="pp">#ifdef REDUCED_PRECISION</span></span>
<span id="cb79-2"><a></a><span class="kw">typedef</span> <span class="dt">float</span> MYFLOAT<span class="op">;</span></span>
<span id="cb79-3"><a></a><span class="pp">#else</span></span>
<span id="cb79-4"><a></a><span class="kw">typedef</span> <span class="dt">double</span> MYFLOAT<span class="op">;</span></span>
<span id="cb79-5"><a></a><span class="pp">#endif</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li class="fragment"><p>To have a type name closer to its semantical meaning</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb80"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb80-1"><a></a><span class="kw">typedef</span> <span class="kw">struct</span> Item <span class="op">*</span> Item<span class="op">;</span></span>
<span id="cb80-2"><a></a><span class="kw">typedef</span> <span class="kw">struct</span> Item <span class="op">*</span> List<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>[look up linked-list implementation to better understand this one]</p></li>
</ul>
</section>
<section id="unions" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Unions</h2>
<ul>
<li><p>A <code>union</code> can hold objects of different types, but only one at a time</p>
<ul>
<li>Only the last assigned member is guaranteed to hold a valid value</li>
</ul></li>
<li><p>Similar to a <code>struct</code>, but in a union, members share the same memory</p></li>
<li><p>Can be used to have some pseudo-polymorphism in C</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb81"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb81-1"><a></a><span class="kw">union</span> MyUnion <span class="op">{</span><span class="dt">int</span> myInt<span class="op">;</span> <span class="dt">double</span> myDouble<span class="op">;};</span></span>
<span id="cb81-2"><a></a><span class="kw">union</span> MyUnion u<span class="op">;</span></span>
<span id="cb81-3"><a></a>u<span class="op">.</span>myInt <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb81-4"><a></a>u<span class="op">.</span>myDouble <span class="op">=</span> <span class="fl">2.0</span><span class="op">;</span> <span class="co">// From here, u.myInt has invalid value</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Sometimes used to make low-level access easier, for instance interpret a 4-byte int as 4 1-byte chars</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb82"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb82-1"><a></a><span class="kw">typedef</span> <span class="kw">union</span></span>
<span id="cb82-2"><a></a><span class="op">{</span></span>
<span id="cb82-3"><a></a>  <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb82-4"><a></a>      <span class="dt">unsigned</span> <span class="dt">char</span> byte1<span class="op">,</span> byte2<span class="op">,</span> byte3<span class="op">,</span> byte4<span class="op">;</span></span>
<span id="cb82-5"><a></a>  <span class="op">}</span> bytes<span class="op">;</span></span>
<span id="cb82-6"><a></a>  <span class="dt">unsigned</span> <span class="dt">int</span> dword<span class="op">;</span></span>
<span id="cb82-7"><a></a><span class="op">}</span> HW_Register<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section></section>
<section>
<section id="exercises-2" class="title-slide slide level1 center">
<h1>Exercises</h1>

</section>
<section id="size-of-structure" class="slide level2 smaller">
<h2>Size of structure</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program centered around a <code>Person</code> structure</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Define a structure and functions operating on it</li>
<li>Think about memory alignment</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>Create a <code>Person</code> structure with members height, weight, year of birth, and first letter of name</li>
<li>Check the size of the structure in memory and explain the result</li>
<li>Write a function that computes the total weight of a group of persons [hint: see variadic functions]</li>
<li>See <code>exercises/10_struct_basics</code></li>
</ul>
</section>
<section id="dna-sequencing" class="slide level2 smaller">
<h2>DNA sequencing</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program to detect motifs in a DNA sequence associated with an increased risk of a hypothetical disease</li>
</ul>
<p><strong>Learning Outcomes:</strong></p>
<ul>
<li>Define and use <code>struct</code>s for organizing biological data</li>
<li>Work with arrays of structs</li>
<li>Implement string search algorithms in C</li>
</ul>
</section>
<section id="dna-sequencing-1" class="slide level2 smaller">
<h2>DNA sequencing</h2>
<ul>
<li><p>Consider the following hypothetical DNA sequences:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>ID</th>
<th>Name</th>
<th>Sequence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>seq1</td>
<td>Alice</td>
<td>ATCGGGTAATCG</td>
</tr>
<tr class="even">
<td>seq2</td>
<td>Bob</td>
<td>GGTAATCGGGTA</td>
</tr>
<tr class="odd">
<td>seq3</td>
<td>Carol</td>
<td>ATCGATCGGGTA</td>
</tr>
<tr class="even">
<td>seq4</td>
<td>Dave</td>
<td>GGGGATCGATCG</td>
</tr>
<tr class="odd">
<td>seq5</td>
<td>Eve</td>
<td>ATCGGGGGGGTA</td>
</tr>
</tbody>
</table>
<p>Imagine that the number of times one of the following motifs is present, increases the risk to carry a certain disease:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Motif</th>
<th>Disease</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ATCG</td>
<td>Disease1</td>
</tr>
<tr class="even">
<td>GGTA</td>
<td>Disease2</td>
</tr>
</tbody>
</table></li>
</ul>
</section>
<section id="dna-sequencing-2" class="slide level2 smaller">
<h2>DNA sequencing</h2>
<ul>
<li>Construct <code>struct</code>s to represent DNA sequences and motifs</li>
<li>Compute for each sequence and for each disease the risk factor</li>
</ul>
<p>See <code>exercises/11_dna_sequencing</code></p>
</section></section>
<section>
<section id="input-and-output" class="title-slide slide level1 center">
<h1>Input and output</h1>

</section>
<section id="input-and-output-1" class="slide level2">
<h2>Input and output <sup>1</sup> <sup>2</sup></h2>
<ul>
<li class="fragment">Input/output is not part of C, but of standard library =&gt; need for <code>#include &lt;stdio.h&gt;</code></li>
<li class="fragment">Converting input/output can be tedious (use AI assistant?)</li>
<li class="fragment">Make use of dedicated libraries/formats such as HDF5, NetCDF, Zarr</li>
<li class="fragment">Annotate data with metadata (units, meaning, etc…)</li>
<li class="fragment">Limited coverage in this course, see K&amp;R Appendix B</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn22"><p>Kernighan and Ritchie, Chapter 7, Input and Output</p></li><li id="fn23"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="writing-to-standard-out-stdout" class="slide level2">
<h2>Writing to standard out (stdout)</h2>
<p><code>printf</code> allows to print internal values as characters in terminal</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb83"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb83-1"><a></a><span class="co">// int with minimal width 5</span></span>
<span id="cb83-2"><a></a>printf<span class="op">(</span><span class="st">"a = </span><span class="sc">%5d\n</span><span class="st">"</span><span class="op">,</span> a<span class="op">);</span> <span class="co">// a =    10</span></span>
<span id="cb83-3"><a></a><span class="co">// int with minimal width 5 and zero padding</span></span>
<span id="cb83-4"><a></a>printf<span class="op">(</span><span class="st">"a = </span><span class="sc">%05d\n</span><span class="st">"</span><span class="op">,</span> a<span class="op">);</span> <span class="co">// a = 00010</span></span>
<span id="cb83-5"><a></a><span class="co">// double with 8 digits after comma</span></span>
<span id="cb83-6"><a></a>printf<span class="op">(</span><span class="st">"pi = </span><span class="sc">%.8f\n</span><span class="st">"</span><span class="op">,</span> M_PI<span class="op">);</span> <span class="co">// pi = 3.14159265</span></span>
<span id="cb83-7"><a></a><span class="co">// double in exponential notation</span></span>
<span id="cb83-8"><a></a>printf<span class="op">(</span><span class="st">"pi = </span><span class="sc">%8.2e\n</span><span class="st">"</span><span class="op">,</span> M_PI<span class="op">);</span> <span class="co">// pi = 3.14e+00</span></span>
<span id="cb83-9"><a></a><span class="co">// fixed-width string</span></span>
<span id="cb83-10"><a></a>printf<span class="op">(</span><span class="st">"</span><span class="sc">%.10s\n</span><span class="st">"</span><span class="op">,</span> <span class="st">"Hello, world"</span><span class="op">);</span> <span class="co">// Hello, wor</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="reading-from-standard-in-stdin" class="slide level2">
<h2>Reading from standard in (stdin)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb84"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb84-1"><a></a><span class="dt">int</span> day<span class="op">;</span></span>
<span id="cb84-2"><a></a><span class="dt">char</span> month<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb84-3"><a></a>printf<span class="op">(</span><span class="st">"Enter data in format '01 January'</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb84-4"><a></a>scanf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%s</span><span class="st">"</span><span class="op">,</span> <span class="op">&amp;</span>day<span class="op">,</span> month<span class="op">);</span> <span class="co">// Make sure to check values!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><code>scanf</code>:</p>
<ul>
<li>returns number of matched items</li>
<li>stops when format string is exhausted or input fails to match specification</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>To run non-interactively, you can redirect file contents to stdin on Linux with <code>./a.out &lt;inputfile</code></p>
</div>
</div>
</div>
</section>
<section id="command-line-arguments" class="slide level2">
<h2>Command-line arguments</h2>
<ul>
<li>Command-line arguments are passed to <code>main</code></li>
<li>First argument: number of command-line arguments + 1 (typically <code>argc</code>)</li>
<li>Second argument: pointer to array of character strings (typically <code>argv</code>)
<ul>
<li>First array element (at index 0) has name of program</li>
</ul></li>
</ul>
</section>
<section id="command-line-arguments-1" class="slide level2">
<h2>Command-line arguments</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb85"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb85-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb85-2"><a></a></span>
<span id="cb85-3"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb85-4"><a></a>    printf<span class="op">(</span><span class="st">"There are </span><span class="sc">%d</span><span class="st"> command-line arguments</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> argc<span class="op">);</span></span>
<span id="cb85-5"><a></a>    printf<span class="op">(</span><span class="st">"The program is called </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> argv<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb85-6"><a></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> argc<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb85-7"><a></a>        printf<span class="op">(</span><span class="st">"Command-line argument </span><span class="sc">%d</span><span class="st"> is </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> i<span class="op">,</span> argv<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb85-8"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb85-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb86"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb86-1"><a></a><span class="ex">$</span> ./a.out Hello World</span>
<span id="cb86-2"><a></a><span class="ex">There</span> are 3 command-line arguments</span>
<span id="cb86-3"><a></a><span class="ex">The</span> program is called ./a.out</span>
<span id="cb86-4"><a></a><span class="ex">Command-line</span> argument 1 is Hello</span>
<span id="cb86-5"><a></a><span class="ex">Command-line</span> argument 2 is World</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="file-access" class="slide level2">
<h2>File access</h2>
<ul>
<li>Files are accessed using a <code>FILE</code> structure defined in <code>stdio.h</code>:
<ul>
<li><code>FILE *fp; fp = fopen(name, mode);</code></li>
</ul></li>
<li><code>mode</code> can be read <code>r</code>, append <code>a</code>, or write <code>w</code></li>
<li>Make sure to check if <code>fopen</code> was succesful by comparing with <code>NULL</code> pointer</li>
<li>Make sure to close file again with <code>fclose(fp)</code>;</li>
</ul>
</section>
<section id="file-access-example" class="slide level2">
<h2>File access example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb87"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb87-1"><a></a>    <span class="dt">FILE</span> <span class="op">*</span>values <span class="op">=</span> fopen<span class="op">(</span><span class="st">"values.txt"</span><span class="op">,</span> <span class="st">"r"</span><span class="op">);</span></span>
<span id="cb87-2"><a></a>    <span class="cf">if</span> <span class="op">(</span>values <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-3"><a></a>        printf<span class="op">(</span><span class="st">"Failed to open values.txt</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb87-4"><a></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb87-5"><a></a>    <span class="op">}</span></span>
<span id="cb87-6"><a></a>    <span class="dt">char</span> line<span class="op">[</span><span class="dv">256</span><span class="op">];</span></span>
<span id="cb87-7"><a></a>    <span class="cf">while</span> <span class="op">(</span>fgets<span class="op">(</span>line<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>line<span class="op">),</span> values<span class="op">))</span> <span class="op">{</span></span>
<span id="cb87-8"><a></a>        <span class="dt">double</span> value<span class="op">;</span></span>
<span id="cb87-9"><a></a>        <span class="cf">if</span> <span class="op">(</span>sscanf<span class="op">(</span>line<span class="op">,</span> <span class="st">"</span><span class="sc">%lf</span><span class="st">"</span><span class="op">,</span> <span class="op">&amp;</span>value<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-10"><a></a>            printf<span class="op">(</span><span class="st">"Read value </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb87-11"><a></a>        <span class="op">}</span></span>
<span id="cb87-12"><a></a>    <span class="op">}</span></span>
<span id="cb87-13"><a></a>    fclose<span class="op">(</span>values<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb88"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb88-1"><a></a><span class="ex">$</span> cat values.txt</span>
<span id="cb88-2"><a></a><span class="ex">42</span></span>
<span id="cb88-3"><a></a><span class="ex">3.14</span></span>
<span id="cb88-4"><a></a><span class="ex">981.12</span></span>
<span id="cb88-5"><a></a><span class="ex">$</span> ./a.out</span>
<span id="cb88-6"><a></a><span class="ex">Read</span> value 42.000000</span>
<span id="cb88-7"><a></a><span class="ex">Read</span> value 3.140000</span>
<span id="cb88-8"><a></a><span class="ex">Read</span> value 981.120000</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="exercise-regression" class="slide level2">
<h2>Exercise: regression</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program that reads temperature anomalies and predicts future values using simple linear regression</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Learn how to read numbers from a structured input file and process them</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>See <code>exercises/12_regression</code></li>
</ul>
</section>
<section id="outline-4" class="slide level2">
<h2>Outline</h2>
<div style="display: flex; gap: 1em; flex-wrap: wrap;">
<div style="flex: 1 1 45%;">
<h3>
Day 1
</h3>
<details>
<summary>
Introduction
</summary>
<ul>
<li>
Motivation
</li>
<li>
Context
</li>
<li>
Course overview
</li>
</ul>
</details>
<details>
<summary>
Jumping in
</summary>
<ul>
<li>
Hello, world
</li>
<li>
Temperature conversion
</li>
<li>
Logistic map
</li>
</ul>
</details>
<h3>
Day 2
</h3>
<details>
<summary>
Basics of C
</summary>
<ul>
<li>
Types and operators
</li>
<li>
Control flow
</li>
<li>
Functions
</li>
</ul>
</details>
</div>
<div style="flex: 1 1 45%;">
<h3>
Day 3
</h3>
<details>
<summary>
Advanced C
</summary>
<ul>
<li>
Arrays and pointers
</li>
<li>
Structures
</li>
<li>
Input and output
</li>
</ul>
</details>
<h3>
Day 4
</h3>
<details>
<summary>
Beyond the core of C
</summary>
<ul>
<li>
External libraries
</li>
<li>
Segmentation faults
</li>
<li>
C standards
</li>
</ul>
</details>
<details>
<summary>
Wrapping up
</summary>
</details>
</div>
</div>
</section></section>
<section>
<section id="external-libraries" class="title-slide slide level1 center">
<h1>External libraries</h1>

</section>
<section id="external-libraries-1" class="slide level2">
<h2>External libraries</h2>
<ul>
<li class="fragment">There are literally hundreds of potentially useful scientific libraries</li>
<li class="fragment">The ones discussed here are by no means exhaustive or representative for your case</li>
<li class="fragment">The intention is to get a feel for how you can proceed to use libraries in general</li>
</ul>
</section>
<section id="external-libraries-overview" class="slide level2 smaller">
<h2>External libraries overview</h2>
<div class="fragment">
<ul>
<li>External libraries extend C’s capabilities — especially useful in scientific computing (e.g., linear algebra, FFT, plotting)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Common scientific libraries:
<ul>
<li><strong>GSL</strong> (GNU Scientific Library)</li>
<li><strong>BLAS/LAPACK</strong> (Linear Algebra)</li>
<li><strong>FFTW</strong> (Fast Fourier Transforms)</li>
<li><strong>HDF5</strong> (Hierarchical data format)</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Benefits:
<ul>
<li>Avoid reinventing the wheel</li>
<li>Leverage optimized, tested code</li>
<li>Improve performance and portability</li>
</ul></li>
</ul>
</div>
</section>
<section id="using-external-libraries" class="slide level2">
<h2>Using external libraries</h2>
<ul>
<li>Before you can include calls to external libraries in your code, you typically need to include relevant header files
<ul>
<li>Header files define signatures of functions, structs, constants</li>
</ul></li>
<li>To compile code relying on an external library into an executable, you need to link that library
<ul>
<li>Typically <code>-l&lt;libname&gt;</code>, check library documentation</li>
</ul></li>
</ul>
</section>
<section id="static-vs-dynamic-libraries" class="slide level2 smaller">
<h2>Static vs Dynamic Libraries</h2>
<table class="caption-top">
<colgroup>
<col style="width: 23%">
<col style="width: 36%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Static Library (.a/.lib)</th>
<th>Dynamic Library (.so/.dll)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Linking time</td>
<td>Compile time</td>
<td>Runtime</td>
</tr>
<tr class="even">
<td>Binary size</td>
<td>Larger (library included)</td>
<td>Smaller (library separate)</td>
</tr>
<tr class="odd">
<td>Portability</td>
<td>Easier to distribute</td>
<td>Requires library on target system</td>
</tr>
<tr class="even">
<td>Updates</td>
<td>Recompile to update</td>
<td>Can update without recompiling</td>
</tr>
<tr class="odd">
<td>Performance</td>
<td>Slightly faster (no indirection)</td>
<td>May have overhead at runtime</td>
</tr>
</tbody>
</table>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Use <code>gcc -static</code> for static linking, or <code>-l&lt;libname&gt;</code> with <code>-L&lt;path&gt;</code> for dynamic linking</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Details differ from library to library: check the specific documentation</p>
</div>
</div>
</div>
</div>
</section>
<section id="gnu-scientific-library" class="slide level2 smaller">
<h2>GNU Scientific Library</h2>
<ul>
<li>The <a href="https://www.gnu.org/software/gsl/">GNU Scientific Library</a> (GSL) provides a wide range of mathematical routines</li>
<li>How to get it:
<ul>
<li>On the cluster: load it as a module, <code>module load GSL/2.8-GCC-13.3.0</code> for example</li>
<li>On your machine: install it as a system package, <code>apt-get install libgsl-dev</code> for example</li>
</ul></li>
<li>How to use it:
<ul>
<li>Include the relevant headers in your code</li>
<li>Find relevant link flags with <code>pkg-config --libs gsl</code> for example</li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>By loading a module on the cluster, some variables are set to make it easier to use libraries. For instance <code>CPATH</code> will include the path of the header files, <code>LD_LIBRARY_PATH</code> will include the path of the libraries.</p>
</div>
</div>
</div>
</div>
</section>
<section id="minimizing-a-function-with-gsl" class="slide level2">
<h2>Minimizing a function with GSL</h2>
<p>See <a href="https://www.gnu.org/software/gsl/doc/html/min.html">https://www.gnu.org/software/gsl/doc/html/min.html</a> for documentation about one dimensional minimization</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb89"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb89-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb89-2"><a></a><span class="pp">#include </span><span class="im">&lt;gsl/gsl_errno.h&gt;</span></span>
<span id="cb89-3"><a></a><span class="pp">#include </span><span class="im">&lt;gsl/gsl_min.h&gt;</span></span>
<span id="cb89-4"><a></a><span class="pp">#include </span><span class="im">&lt;gsl/gsl_math.h&gt;</span></span>
<span id="cb89-5"><a></a></span>
<span id="cb89-6"><a></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb89-7"><a></a>    <span class="dt">double</span> a<span class="op">,</span> b<span class="op">,</span> sigma<span class="op">;</span></span>
<span id="cb89-8"><a></a><span class="op">}</span> Params<span class="op">;</span></span>
<span id="cb89-9"><a></a></span>
<span id="cb89-10"><a></a><span class="co">// Define a function f according to the GSL rules</span></span>
<span id="cb89-11"><a></a><span class="dt">double</span> f<span class="op">(</span><span class="dt">double</span> x<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>params<span class="op">)</span> <span class="op">{</span></span>
<span id="cb89-12"><a></a>    Params <span class="op">*</span>p <span class="op">=</span> <span class="op">(</span>Params <span class="op">*)</span> params<span class="op">;</span></span>
<span id="cb89-13"><a></a>    <span class="cf">return</span> exp<span class="op">(-</span>p<span class="op">-&gt;</span>sigma<span class="op">*</span>x<span class="op">*</span>x<span class="op">)*</span>sin<span class="op">(</span>p<span class="op">-&gt;</span>a <span class="op">+</span> p<span class="op">-&gt;</span>b<span class="op">*</span>x<span class="op">);</span></span>
<span id="cb89-14"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="minimizing-a-function-with-gsl-1" class="slide level2 smaller">
<h2>Minimizing a function with GSL</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb90"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb90-1"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb90-2"><a></a>    Params params <span class="op">=</span> <span class="op">{</span><span class="fl">0.3</span><span class="op">,</span> <span class="fl">1.0</span><span class="op">,</span> <span class="fl">0.05</span><span class="op">};</span></span>
<span id="cb90-3"><a></a></span>
<span id="cb90-4"><a></a>    <span class="dt">double</span> minimum <span class="op">=</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">,</span> lower <span class="op">=</span> <span class="op">-</span><span class="fl">3.0</span><span class="op">,</span> upper <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb90-5"><a></a>    <span class="dt">int</span> iter <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> maxIter <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> status<span class="op">;</span></span>
<span id="cb90-6"><a></a></span>
<span id="cb90-7"><a></a>    <span class="dt">const</span> gsl_min_fminimizer_type <span class="op">*</span>T <span class="op">=</span> gsl_min_fminimizer_brent<span class="op">;</span></span>
<span id="cb90-8"><a></a>    gsl_min_fminimizer <span class="op">*</span>minimizer <span class="op">=</span> gsl_min_fminimizer_alloc<span class="op">(</span>T<span class="op">);</span></span>
<span id="cb90-9"><a></a>    gsl_function F<span class="op">;</span></span>
<span id="cb90-10"><a></a>    F<span class="op">.</span>function <span class="op">=</span> <span class="op">&amp;</span>f<span class="op">;</span></span>
<span id="cb90-11"><a></a>    F<span class="op">.</span>params <span class="op">=</span> <span class="op">(</span><span class="dt">void</span> <span class="op">*)</span> <span class="op">&amp;</span>params<span class="op">;</span></span>
<span id="cb90-12"><a></a></span>
<span id="cb90-13"><a></a>    gsl_min_fminimizer_set<span class="op">(</span>minimizer<span class="op">,</span> <span class="op">&amp;</span>F<span class="op">,</span> minimum<span class="op">,</span> lower<span class="op">,</span> upper<span class="op">);</span></span>
<span id="cb90-14"><a></a></span>
<span id="cb90-15"><a></a>    <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb90-16"><a></a>        gsl_min_fminimizer_iterate<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb90-17"><a></a>        lower <span class="op">=</span> gsl_min_fminimizer_x_lower<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb90-18"><a></a>        upper <span class="op">=</span> gsl_min_fminimizer_x_upper<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb90-19"><a></a>        status <span class="op">=</span> gsl_min_test_interval<span class="op">(</span>lower<span class="op">,</span> upper<span class="op">,</span> <span class="fl">1.0e-6</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span></span>
<span id="cb90-20"><a></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>status <span class="op">==</span> GSL_CONTINUE <span class="op">&amp;&amp;</span> <span class="op">++</span>iter <span class="op">&lt;</span> maxIter<span class="op">);</span></span>
<span id="cb90-21"><a></a></span>
<span id="cb90-22"><a></a>    <span class="cf">if</span> <span class="op">(</span>status <span class="op">==</span> GSL_SUCCESS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-23"><a></a>        minimum <span class="op">=</span> gsl_min_fminimizer_x_minimum<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb90-24"><a></a>        printf<span class="op">(</span><span class="st">"f reached the minimum </span><span class="sc">%.6f</span><span class="st"> at </span><span class="sc">%.6f</span><span class="st"> after </span><span class="sc">%d</span><span class="st"> iterations</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> f<span class="op">(</span>minimum<span class="op">,</span> F<span class="op">.</span>params<span class="op">),</span> minimum<span class="op">,</span> iter<span class="op">);</span></span>
<span id="cb90-25"><a></a>    <span class="op">}</span></span>
<span id="cb90-26"><a></a></span>
<span id="cb90-27"><a></a>    gsl_min_fminimizer_free<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb90-28"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb90-29"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="blas-basic-linear-algebra-subprograms" class="slide level2">
<h2>BLAS: Basic Linear Algebra Subprograms</h2>
<ul>
<li>Low-level routines for vector and matrix operations</li>
<li>Levels:
<ul>
<li>Level 1: Vector-vector (e.g., dot product)</li>
<li>Level 2: Matrix-vector (e.g., solving triangular systems)</li>
<li>Level 3: Matrix-matrix (e.g., matrix multiplication)</li>
</ul></li>
</ul>
</section>
<section id="lapack-linear-algebra-package" class="slide level2">
<h2>LAPACK: Linear Algebra PACKage</h2>
<ul>
<li>Built on top of BLAS</li>
<li>High-level routines for:
<ul>
<li>Solving linear systems</li>
<li>Eigenvalue problems</li>
<li>Singular value decomposition</li>
</ul></li>
</ul>
</section>
<section id="blas-lapack" class="slide level2 smaller">
<h2>BLAS &amp; LAPACK</h2>
<div class="fragment">
<ul>
<li>Why use them?
<ul>
<li>Highly optimized for performance</li>
<li>Portable across platforms</li>
<li>Widely used in scientific and engineering applications</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Many implementations are available
<ul>
<li>OpenBLAS - Intel MKL - ATLAS</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Often implemented (partially) in Fortran and assembly
<ul>
<li>C bindings nearly always available though</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Link typically happens with <code>-lblas -llapack</code>, but this can be different for optimized implementations like OpenBLAS, Intel MKL, or ATLAS.</p>
</div>
</div>
</div>
</div>
</section>
<section id="dot-product-in-blas" class="slide level2 smaller">
<h2>Dot product in BLAS</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb91"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb91-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb91-2"><a></a><span class="pp">#include </span><span class="im">&lt;cblas.h&gt;</span></span>
<span id="cb91-3"><a></a></span>
<span id="cb91-4"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb91-5"><a></a>    <span class="dt">double</span> x<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">};</span></span>
<span id="cb91-6"><a></a>    <span class="dt">double</span> y<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">4.0</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">,</span> <span class="fl">6.0</span><span class="op">};</span></span>
<span id="cb91-7"><a></a>    <span class="dt">double</span> result <span class="op">=</span> cblas_ddot<span class="op">(</span><span class="dv">3</span><span class="op">,</span> x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb91-8"><a></a>    printf<span class="op">(</span><span class="st">"Dot product: </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb91-9"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-10"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb92"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb92-1"><a></a>$ gcc dotproduct<span class="op">.</span>c <span class="op">-</span>o dotproduct <span class="op">-</span>lblas <span class="op">&amp;&amp;</span> <span class="op">./</span>dotproduct</span>
<span id="cb92-2"><a></a>Dot product<span class="op">:</span> <span class="fl">32.000000</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>On the cluster, use <code>module load OpenBLAS/0.3.27-GCC-13.3.0</code> and link with <code>-lopenblas</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="hdf5-managing-scientific-data-in-c" class="slide level2 smaller">
<h2>HDF5: Managing Scientific Data in C</h2>
<ul>
<li>HDF5 (Hierarchical Data Format v5)
<ul>
<li>Designed for storing and organizing large, complex datasets</li>
<li>Supports n-dimensional arrays, tables, images, and metadata</li>
<li>Common in physics, climate modeling, bioinformatics, and engineering</li>
</ul></li>
<li>Features
<ul>
<li>Portable and self-describing binary format</li>
<li>Hierarchical structure: groups and datasets (like folders and files)</li>
<li>Supports compression, parallel I/O, and chunking</li>
</ul></li>
</ul>
</section>
<section id="hdf5-schematic-view-of-an-hdf5-file" class="slide level2">
<h2>HDF5: schematic view of an HDF5 file</h2>

<img data-src="images/hdf5_structure4.jpg" class="r-stretch"></section>
<section id="hdf5-writing-a-dataset" class="slide level2">
<h2>HDF5: writing a dataset</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb93"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb93-1"><a></a><span class="pp">#include </span><span class="im">"hdf5.h"</span></span>
<span id="cb93-2"><a></a></span>
<span id="cb93-3"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb93-4"><a></a>    hid_t file_id<span class="op">,</span> dataset_id<span class="op">,</span> dataspace_id<span class="op">;</span></span>
<span id="cb93-5"><a></a>    hsize_t dims<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">};</span></span>
<span id="cb93-6"><a></a>    <span class="dt">double</span> data<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span> <span class="co">/* initialize with values */</span> <span class="op">};</span></span>
<span id="cb93-7"><a></a></span>
<span id="cb93-8"><a></a>    file_id <span class="op">=</span> H5Fcreate<span class="op">(</span><span class="st">"example.h5"</span><span class="op">,</span> H5F_ACC_TRUNC<span class="op">,</span> H5P_DEFAULT<span class="op">,</span> H5P_DEFAULT<span class="op">);</span></span>
<span id="cb93-9"><a></a>    dataspace_id <span class="op">=</span> H5Screate_simple<span class="op">(</span><span class="dv">2</span><span class="op">,</span> dims<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb93-10"><a></a>    dataset_id <span class="op">=</span> H5Dcreate<span class="op">(</span>file_id<span class="op">,</span> <span class="st">"/mydata"</span><span class="op">,</span> H5T_NATIVE_DOUBLE<span class="op">,</span> dataspace_id<span class="op">,</span></span>
<span id="cb93-11"><a></a>                           H5P_DEFAULT<span class="op">,</span> H5P_DEFAULT<span class="op">,</span> H5P_DEFAULT<span class="op">);</span></span>
<span id="cb93-12"><a></a>    H5Dwrite<span class="op">(</span>dataset_id<span class="op">,</span> H5T_NATIVE_DOUBLE<span class="op">,</span> H5S_ALL<span class="op">,</span> H5S_ALL<span class="op">,</span> H5P_DEFAULT<span class="op">,</span> data<span class="op">);</span></span>
<span id="cb93-13"><a></a>    H5Dclose<span class="op">(</span>dataset_id<span class="op">);</span></span>
<span id="cb93-14"><a></a>    H5Sclose<span class="op">(</span>dataspace_id<span class="op">);</span></span>
<span id="cb93-15"><a></a>    H5Fclose<span class="op">(</span>file_id<span class="op">);</span></span>
<span id="cb93-16"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb93-17"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="exercises-3" class="title-slide slide level1 center">
<h1>Exercises</h1>

</section>
<section id="solve-a-linear-system-of-equations-with-gsl" class="slide level2 smaller">
<h2>Solve a linear system of equations with GSL</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program that balances a chemical equation by solving a linear system of equations using GSL.</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Learn how to call functions in GSL.</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>Consider the chemical equation <span class="math inline">\(a C_3H_8 + b O_2 \leftrightarrow c CO_2 + d H_2O\)</span>. Write a program that determines values for a,b,c,d such that the equation is balanced (i.e., each element appears as often on the left hand side as on the right hand side). Make use of <a href="http://gnu.ist.utl.pt/software/gsl/manual/html_node/Linear-Algebra-Examples.html">GSL linear algebra functions</a> to do this.</li>
<li>Bonus: Find a way to make sure the coefficients are integer</li>
</ul>
</section>
<section id="handwriting-recognition" class="slide level2 smaller">
<h2>Handwriting recognition</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Train a model that can recognize handwritten digits</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Learn how to read “production” C code without understanding all details</li>
<li>Work with HDF5 and BLAS libraries</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>It is not necessary or even wanted to fully understand the mathematics of the model. The following slides contain the essential things you need to know.</p>
</div>
</div>
</div>
</div>
</section>
<section id="handwriting-recognition-1" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Handwriting recognition</h2>
<h3 id="supervised-machine-learning-models">Supervised machine learning models:</h3>
<ul>
<li class="fragment">Propose a model <span class="math inline">\(y = f(x; A)\)</span> that relates the input <span class="math inline">\(x\)</span> to the output <span class="math inline">\(y\)</span> with a function <span class="math inline">\(f\)</span> that depends on (currently unknown) parameters <span class="math inline">\(A\)</span></li>
<li class="fragment">Collect a training set of known input-output pairs of <span class="math inline">\(\{x, y\}\)</span> and determine the parameters <span class="math inline">\(A\)</span> such that the model predicts the expected outputs for the training set
<ul>
<li class="fragment">Technically: minimize a cost function using gradient descent</li>
</ul></li>
<li class="fragment">Use the estimated parameters to compute output for new inputs (inference)</li>
</ul>
</section>
<section id="handwriting-recognition-2" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Handwriting recognition</h2>
<ul>
<li>Input <span class="math inline">\(\mathbf{x}\)</span>: vector of size <span class="math inline">\(784\)</span> representing grayscale values of an image of <span class="math inline">\(28 \times 28\)</span> pixels</li>
<li>Output <span class="math inline">\(\mathbf{y}\)</span>: vector of size <span class="math inline">\(10\)</span>, representing probabilities that image is classified as integer <span class="math inline">\(\{ 0, 1, ..., 9\}\)</span></li>
<li>Model <span class="math inline">\(\mathbf{y} = \sigma \left( W \mathbf{x} + \mathbf{B} \right)\)</span>
<ul>
<li>Perceptron: neuron whose activation depends on weights, biases and inputs</li>
<li><span class="math inline">\(\sigma\)</span> is an activation function, in this case a softmax</li>
</ul></li>
<li>Parameters: <span class="math inline">\(W\)</span> (<span class="math inline">\(782 \times 10\)</span>) matrix and <span class="math inline">\(\mathbf{B}\)</span> (vector of size 10)</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>This is not a state-of-the art model, but does demonstrate the essence of even very modern machine learning.</p>
</div>
</div>
</div>
</div>
</section>
<section id="handwriting-recognition-3" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Handwriting recognition</h2>
<p>An excellent tutorial is available at <a href="https://www.3blue1brown.com/lessons/neural-networks">https://www.3blue1brown.com/lessons/neural-networks</a> (it uses multiple layers, so more parameters than in our case)</p>

<img data-src="images/neural-network-function.png" class="r-stretch"></section>
<section id="handwriting-recognition-4" class="slide level2 smaller">
<h2>Handwriting recognition</h2>
<p><strong>Instructions:</strong></p>
<ul>
<li>Use <a href="https://github.com/AndrewCarterUK/mnist-neural-network-plain-c">https://github.com/AndrewCarterUK/mnist-neural-network-plain-c</a> as a starting point</li>
<li>Go through the code and try to get a high-level overview, without getting lost in the implementation details</li>
<li>Add checkpointing: allow storing parameters at the end of training in HDF5 format. Also allow reading them back in as initial guess to resume training</li>
<li>Replace the linear algebra operations by calls to BLAS. Compare the performance with the original implementation</li>
<li>Write a companion program that does inference by using precalculated parameters</li>
<li>Implement your own feature that you think would improve the code</li>
</ul>
</section>
<section id="handwriting-recognition-discussion" class="slide level2 smaller">
<h2>Handwriting recognition discussion</h2>
<ul>
<li>After training for 500 epochs: accuracty for test set is about 90%</li>
<li>Inference for examples outside of test set:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="images/digitA_3.png"></p>
</div><div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb94"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb94-1"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb94-2"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span>   0.01%</span>
<span id="cb94-3"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span>   0.11%</span>
<span id="cb94-4"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span>  99.81%</span>
<span id="cb94-5"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb94-6"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span>   0.02%</span>
<span id="cb94-7"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb94-8"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb94-9"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span>   0.05%</span>
<span id="cb94-10"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb94-11"><a></a><span class="ex">Digit</span> prediction: 3</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
</section>
<section id="handwriting-recognition-discussion-1" class="slide level2 smaller">
<h2>Handwriting recognition discussion</h2>
<ul>
<li>After training for 500 epochs: accuracty for test set is about 90%</li>
<li>Inference for examples outside of test set:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="images/digitB_6.png"></p>
</div><div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb95"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb95-1"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span>   0.05%</span>
<span id="cb95-2"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb95-3"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span>   0.01%</span>
<span id="cb95-4"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span>  96.88%</span>
<span id="cb95-5"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb95-6"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span>   3.06%</span>
<span id="cb95-7"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb95-8"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb95-9"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb95-10"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb95-11"><a></a><span class="ex">Digit</span> prediction: 3</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
</section>
<section id="handwriting-recognition-discussion-2" class="slide level2 smaller">
<h2>Handwriting recognition discussion</h2>
<ul>
<li>After training for 500 epochs: accuracty for test set is about 90%</li>
<li>Inference for examples outside of test set:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="images/digitC_6.png"></p>
</div><div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb96"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb96-1"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb96-2"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span>   0.08%</span>
<span id="cb96-3"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span>   0.68%</span>
<span id="cb96-4"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span>   0.01%</span>
<span id="cb96-5"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb96-6"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb96-7"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span>  99.08%</span>
<span id="cb96-8"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb96-9"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span>   0.14%</span>
<span id="cb96-10"><a></a><span class="ex">P</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb96-11"><a></a><span class="ex">Digit</span> prediction: 6</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
</section></section>
<section>
<section id="segmentation-faults" class="title-slide slide level1 center">
<h1>Segmentation faults</h1>

</section>
<section id="segmentation-faults-1" class="slide level2">
<h2>Segmentation faults</h2>
<ul>
<li>A <strong>segmentation fault</strong> occurs when a program accesses memory it <strong>does not own</strong>.</li>
<li>Common causes:
<ul>
<li>Dereferencing <strong>NULL</strong> or <strong>uninitialized pointers</strong></li>
<li>Accessing memory <strong>out of bounds</strong> (arrays, strings)</li>
<li>Writing to <strong>read-only memory</strong></li>
</ul></li>
</ul>
</section>
<section id="segmentation-fault-example" class="slide level2 smaller">
<h2>Segmentation fault example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb97"><pre class="sourceCode numberSource c small-code number-lines code-with-copy"><code class="sourceCode c"><span id="cb97-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb97-2"><a></a> </span>
<span id="cb97-3"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb97-4"><a></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb97-5"><a></a>    <span class="dt">int</span> A<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb97-6"><a></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"A[</span><span class="sc">%5d</span><span class="st">] = </span><span class="sc">%12d\n</span><span class="st">"</span><span class="op">,</span> i<span class="op">,</span> A<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb97-7"><a></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"A[</span><span class="sc">%5d</span><span class="st">] = </span><span class="sc">%12d\n</span><span class="st">"</span><span class="op">,</span> i <span class="op">*</span> <span class="dv">30000</span><span class="op">,</span> A<span class="op">[</span>i <span class="op">*</span> <span class="dv">30000</span><span class="op">]);</span></span>
<span id="cb97-8"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb97-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>What will happen when you compile and run this program?</p>
<ul>
<li>The program will not compile</li>
<li>The program will crash when accessing <code>A[0]</code> since its value is not initialized</li>
<li>The program will crash when accessing <code>A[4]</code> since it is outside of the array</li>
<li>The program <em>might</em> crash when accessing any element outside of the array</li>
<li>The program will always run to completion</li>
</ul>
</section>
<section id="segmentation-fault-example-1" class="slide level2 smaller">
<h2>Segmentation fault example</h2>
<p>Invalid array access gives undefined behavior, the result can depend on the system</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb98"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb98-1"><a></a><span class="va">A</span><span class="op">[</span>    0<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb98-2"><a></a><span class="va">A</span><span class="op">[</span>    1<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb98-3"><a></a><span class="va">A</span><span class="op">[</span>    2<span class="op">]</span> <span class="ex">=</span>      4199005</span>
<span id="cb98-4"><a></a><span class="va">A</span><span class="op">[</span>    3<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb98-5"><a></a><span class="va">A</span><span class="op">[</span>    4<span class="op">]</span> <span class="ex">=</span>  <span class="at">-2103564768</span></span>
<span id="cb98-6"><a></a><span class="va">A</span><span class="op">[</span><span class="dv">30000</span><span class="op">]</span> <span class="ex">=</span>   1818850658</span>
<span id="cb98-7"><a></a><span class="va">A</span><span class="op">[</span><span class="dv">60000</span><span class="op">]</span> <span class="ex">=</span>    774974819</span>
<span id="cb98-8"><a></a><span class="ex">Segmentation</span> fault <span class="er">(</span><span class="ex">core</span> dumped<span class="kw">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Some elements of the array (<code>A[2]</code>) have a <em>garbage</em> value
<ul>
<li>Makes sense, elements were not initialized</li>
</ul></li>
<li>Some elements outside of array (<code>A[30000]</code>) have a garbage value
<ul>
<li>Makes sense, you just get what happens to be in memory at <code>(A + 30000)</code></li>
</ul></li>
<li>The access of <code>A[90000]</code> gives a segmentation fault
<ul>
<li>???</li>
</ul></li>
</ul>
</section>
<section id="virtual-vs-physical-memory" class="slide level2 smaller" data-background-color="lightgrey">
<h2>Virtual vs physical memory</h2>
<div class="columns">
<div class="column" style="width:65%;">
<ul>
<li>As a user/programmer, you see <em>virtual</em> memory</li>
<li>Virtual memory creates the illusion of a large, contiguous, uniform address space
<ul>
<li>Hides fragmentation of physical memory</li>
<li>Delegates managing memory hierarchy (caches, RAM, disk) to OS</li>
<li>Provides safety mechanism to isolate process’ address space</li>
</ul></li>
</ul>
</div><div class="column" style="width:35%;">
<p><img data-src="images/virtual_memory.svg"></p>
</div></div>
<div class="fragment">
<ul>
<li>Mapping to phyical memory in page table
<ul>
<li>Out-of-bound memory access can pick up garbage mapping address</li>
<li>You might be accessing another process’ memory, even on read access the CPU throws a segmentation fault</li>
</ul></li>
</ul>
</div>
</section>
<section id="segmentation-fault-example-2" class="slide level2 smaller">
<h2>Segmentation fault example</h2>
<p>Invalid array access gives undefined behavior, the result can depend on the system</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb99"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb99-1"><a></a><span class="va">A</span><span class="op">[</span>    0<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb99-2"><a></a><span class="va">A</span><span class="op">[</span>    1<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb99-3"><a></a><span class="va">A</span><span class="op">[</span>    2<span class="op">]</span> <span class="ex">=</span>      4199005</span>
<span id="cb99-4"><a></a><span class="va">A</span><span class="op">[</span>    3<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb99-5"><a></a><span class="va">A</span><span class="op">[</span>    4<span class="op">]</span> <span class="ex">=</span>  <span class="at">-2103564768</span></span>
<span id="cb99-6"><a></a><span class="va">A</span><span class="op">[</span><span class="dv">30000</span><span class="op">]</span> <span class="ex">=</span>   1818850658</span>
<span id="cb99-7"><a></a><span class="va">A</span><span class="op">[</span><span class="dv">60000</span><span class="op">]</span> <span class="ex">=</span>    774974819</span>
<span id="cb99-8"><a></a><span class="ex">Segmentation</span> fault <span class="er">(</span><span class="ex">core</span> dumped<span class="kw">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Some elements of the array (<code>A[2]</code>) have a <em>garbage</em> value
<ul>
<li>Makes sense, elements were not initialized</li>
</ul></li>
<li>Some elements outside of array (<code>A[30000]</code>) have a garbage value
<ul>
<li>Makes sense, you just get what happens to be in memory at <code>(A + 3000)</code></li>
</ul></li>
<li>The access of <code>A[90000]</code> gives a segmentation fault
<ul>
<li>This virtual address corresponds to a physical address that is not part of the process</li>
<li>The operating system reports this as a segmentation fault</li>
</ul></li>
</ul>
</section>
<section id="handling-segmentation-faults" class="slide level2">
<h2>Handling segmentation faults</h2>
<ul>
<li>Do not make coding mistakes :)</li>
<li>Ask the compiler to instrument executable to
<ul>
<li><code>gcc -fsanitize=bounds-strict segmentation_fault.c</code></li>
<li>Can lead to lower performance</li>
</ul></li>
<li>Run the program under a debugger such as <code>gdb</code>
<ul>
<li>Compile with debug symbols (<code>-g</code>)</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="versions-of-c" class="title-slide slide level1 center">
<h1>Versions of C</h1>

</section>
<section id="versions-of-c-1" class="slide level2">
<h2>Versions of C <sup>1</sup></h2>
<aside><ol class="aside-footnotes"><li id="fn24"><p>Adapted from https://github.com/gjbex/Scientific-C</p></li></ol></aside></section>
<section id="a-brief-history-of-c" class="slide level2">
<h2>A brief history of C</h2>
<ul>
<li>C development starts in the early 1970s</li>
<li>First standard published in 1989: ANSI C or C89</li>
<li>Update in 1999: C99 standard</li>
<li>Update in 2011: C11 standard</li>
<li>Minor bugfixes in 2017: C17 (sometimes referred to as C18)</li>
<li>Update in 2023: C23</li>
</ul>
</section>
<section id="different-c-standards" class="slide level2">
<h2>Different C standards</h2>
<ul>
<li>The C89 standard is still considered the default</li>
<li>Compiler has to be instructed to use specific standard: <code>gcc -std=c11</code>
<ul>
<li>You need a recent compiler for the most recent standard</li>
</ul></li>
<li>Compilers often do not stick <em>exactly</em> to standard
<ul>
<li><code>gcc</code> provides some C99 constructions by default</li>
<li>Options like <code>-std=c89 -pedantic</code> make it more strict</li>
</ul></li>
</ul>
</section>
<section id="the-c99-standard-additions" class="slide level2 smaller">
<h2>The C99 standard additions</h2>
<ul>
<li>Single-line comments with <code>//</code></li>
<li>Variable length arrays</li>
<li>Mark functions with <code>inline</code> to avoid call overhead</li>
<li>Use <code>restrict</code> to indicate arrays do not overlap</li>
<li>Boolean and complex types in <code>&lt;bool.h&gt;</code> and <code>&lt;complex.h&gt;</code></li>
<li>Type-generic macros in <code>&lt;tgmath.h&gt;</code></li>
<li>IEEE&nbsp;754 floating point support</li>
</ul>
</section>
<section id="inline-functions" class="slide level2 smaller">
<h2>Inline functions</h2>
<ul>
<li>Function call: expensive
<ul>
<li>call stack must be maintained</li>
<li>stack variables allocated, initialized</li>
</ul></li>
<li>Small functions, called often: lots of overhead</li>
<li>Inline functions: function code inserted in caller
<ul>
<li>good compilers try that anyway</li>
<li>helping compilers: better optimization!</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb100"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb100-1"><a></a><span class="kw">inline</span> <span class="dt">double</span> sqr<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb100-2"><a></a>    <span class="cf">return</span> x<span class="op">*</span>x<span class="op">;</span></span>
<span id="cb100-3"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="restrict-keyword-for-arrays" class="slide level2">
<h2>Restrict keyword for arrays</h2>
<ul>
<li>Arrays in C:
<ul>
<li>decay into pointers, just contain address of first element</li>
<li>no semantics for compiler</li>
</ul></li>
<li>Multiple arrays as function arguments, do they overlap?</li>
<li>Help compiler, use <code>restrict</code>
<ul>
<li>programmer assures to compiler that arrays don’t overlap</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb101"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb101-1"><a></a><span class="dt">void</span> daxpy_r<span class="op">(</span><span class="dt">double</span> <span class="op">*</span> <span class="dt">restrict</span> z<span class="op">,</span> <span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span> <span class="dt">restrict</span> x<span class="op">,</span></span>
<span id="cb101-2"><a></a>             <span class="dt">double</span> <span class="op">*</span> <span class="dt">restrict</span> y<span class="op">,</span> <span class="dt">int</span> n<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="complex-numbers" class="slide level2">
<h2>Complex numbers</h2>
<ul>
<li>Types:
<ul>
<li>float complex: single precision</li>
<li>double complex: double precision</li>
<li>long double complex: extended precision</li>
</ul></li>
<li>Declarations in complex.h
<ul>
<li>types</li>
<li>literal: I</li>
<li>functions, e.g., <code>creal</code>, <code>cimag</code>, <code>csqrt</code>, <code>cexp</code>, …</li>
</ul></li>
</ul>
</section>
<section id="type-generic-math" class="slide level2 smaller">
<h2>Type-generic math</h2>
<ul>
<li>Automatically selects the correct version of a math function:
<ul>
<li><code>float</code>, <code>double</code>, or <code>long double</code></li>
<li><code>complex</code> or <code>real</code> types</li>
</ul></li>
<li>Cleaner code: No need to manually choose <code>sinf</code>, <code>sin</code>, or <code>sinl</code>.</li>
<li>Type safety: Matches function to argument type at compile time.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb102"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb102-1"><a></a><span class="pp">#include </span><span class="im">&lt;tgmath.h&gt;</span></span>
<span id="cb102-2"><a></a></span>
<span id="cb102-3"><a></a><span class="dt">double</span> x <span class="op">=</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb102-4"><a></a><span class="dt">float</span> y <span class="op">=</span> <span class="fl">0.5</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb102-5"><a></a></span>
<span id="cb102-6"><a></a><span class="dt">double</span> result1 <span class="op">=</span> sin<span class="op">(</span>x<span class="op">);</span>  <span class="co">// uses sin()</span></span>
<span id="cb102-7"><a></a><span class="dt">float</span> result2 <span class="op">=</span> sin<span class="op">(</span>y<span class="op">);</span>   <span class="co">// uses sinf()</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="ieee-754-floating-point-support" class="slide level2">
<h2>IEEE&nbsp;754 floating point support</h2>
<ul>
<li>float: 4 byte, single precision</li>
<li>double: 8 byte, double precision</li>
<li>long double: 12 byte, extended precision</li>
<li>Rounding well-defined</li>
<li>Support for Inf, -Inf, NaN</li>
</ul>
</section>
<section id="the-c11-standard" class="slide level2">
<h2>The C11 standard</h2>
<p>The <code>_Generic</code> Keyword</p>
<ul>
<li><p>Enables <strong>type-generic programming</strong> (like <code>tgmath.h</code>)</p></li>
<li><p>Example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb103"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb103-1"><a></a><span class="pp">#define my_abs</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="dt">_Generic</span><span class="op">((</span><span class="pp">x</span><span class="op">),</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb103-2"><a></a><span class="pp">    </span><span class="dt">int</span><span class="op">:</span><span class="pp"> abs</span><span class="op">,</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb103-3"><a></a><span class="pp">    </span><span class="dt">float</span><span class="op">:</span><span class="pp"> fabsf</span><span class="op">,</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb103-4"><a></a><span class="pp">    </span><span class="dt">double</span><span class="op">:</span><span class="pp"> fabs </span><span class="op">\</span></span>
<span id="cb103-5"><a></a><span class="op">)(</span><span class="pp">x</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="mathematics-in-c23" class="slide level2">
<h2>Mathematics in C23</h2>
<ul>
<li>New mathematical functions in <code>math.h</code>
<ul>
<li><code>sinpi(x)</code> is the same as <code>sin(pi*x)</code> with better precision</li>
<li><code>exp10</code> et al.</li>
</ul></li>
<li>Checked integer arithmetic in <code>stdckdint.h</code>
<ul>
<li><code>ckd_add</code> et al.</li>
</ul></li>
<li>Support for <code>1'000</code> and <code>1'133.023</code> notation</li>
<li>Decimal floating-point math (IEEE 754-2008/2019)</li>
</ul>
</section>
<section id="syntax-changes-in-c23" class="slide level2">
<h2>Syntax changes in C23</h2>
<ul>
<li><code>nullptr</code> (keyword) rather than <code>NULL</code> (macro)</li>
<li><code>true/false</code> keywords, <code>stdbool.h</code> not required</li>
<li>Unnamed function parameters</li>
<li><code>stdbit.h</code>: bit manipulation functions</li>
<li><code>strdup/strndup</code>: simple string duplication</li>
<li><code>constexpr</code> for compile-time constants</li>
<li><code>static_assert</code> for compile-time asserts</li>
<li><code>typeof</code> to determine type at compile time</li>
</ul>
</section>
<section id="c23-attributes" class="slide level2 smaller">
<h2>C23 attributes</h2>
<ul>
<li>Defensive programming
<ul>
<li><code>[[fallthrough]]</code>: intentional fall-through in switch</li>
<li><code>[[nodiscard]]</code>: don’t ignore return value</li>
<li><code>[[maybe_unused]]</code>: don’t warn if not used (function/parameter)</li>
<li><code>[[deprecated]]</code></li>
</ul></li>
<li>Performance related
<ul>
<li><code>[[unsequenced]]</code>: function has no side-effects, calls can be out-of-order</li>
<li><code>[[reproducible]]</code>: function has no side-effect, calls have to be in-order (e.g., random numbers)</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="wrapping-up" class="title-slide slide level1 center">
<h1>Wrapping up</h1>

</section>
<section id="scientific-programming-landscape-4" class="slide level2">
<h2>Scientific programming landscape</h2>

<img data-src="images/scientific_programming_languages_landscape.png" class="r-stretch"></section>
<section id="more-to-explore" class="slide level2">
<h2>More to explore</h2>
<ul>
<li>How to do HPC =&gt; <a href="https://hpcleuven.github.io/HPC-intro">HPC intro</a> and <a href="https://hpcleuven.github.io/Linux-for-HPC/">Linux for HPC</a></li>
<li>Build systems =&gt; <a href="https://hpcleuven.github.io/CMake-intro/">CMake intro</a> and <a href="https://hpcleuven.github.io/Makefile-intro/">Makefile intro</a></li>
<li>Version control =&gt; <a href="https://github.com/gjbex/Version-control-with-git">Version control with git</a></li>
<li>Optimizing code =&gt; <a href="https://gjbex.github.io/Code-optimization/">Code optimization</a></li>
<li>Debugging code =&gt; <a href="https://gjbex.github.io/Defensive_programming_and_debugging/">Defensive programming and debugging</a></li>
<li>Parallel programming =&gt; <a href="https://github.com/gjbex/Parallel-programming">Parallel programming</a></li>
<li>Setting up an Integrated Development Environment (IDE)</li>
</ul>
</section>
<section id="more-to-explore-1" class="slide level2">
<h2>More to explore</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The calendar of VSC Trainings can be found at <a href="https://www.vscentrum.be/vsctraining">https://www.vscentrum.be/vsctraining</a>. Learning paths that show connections between trainings can be found at <a href="https://gjbex.github.io/">https://gjbex.github.io/</a>.</p>
</div>
</div>
</div>
</section></section>
<section id="wrapping-up-1" class="title-slide slide level1 center">
<h1>Wrapping up</h1>


</section>


    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>