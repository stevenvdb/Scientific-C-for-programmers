<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.3">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>beyond_c_core</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-6172778a27b0bfa6b3b3f65992e46a92.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8fd1faf6fd93e4e6d207ae0f9db51d78.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="outline" class="level2">
<h2 class="anchored" data-anchor-id="outline">Outline</h2>
<div style="display: flex; gap: 1em; flex-wrap: wrap;">
<div style="flex: 1 1 45%;">
<h3 class="anchored">
Day 1
</h3>
<details>
<summary>
Introduction
</summary>
<ul>
<li>
Motivation
</li>
<li>
Context
</li>
<li>
Course overview
</li>
</ul>
</details>
<details>
<summary>
Jumping in
</summary>
<ul>
<li>
Hello, world
</li>
<li>
Temperature conversion
</li>
<li>
Logistic map
</li>
</ul>
</details>
<h3 class="anchored">
Day 2
</h3>
<details>
<summary>
Basics of C
</summary>
<ul>
<li>
Types and operators
</li>
<li>
Control flow
</li>
<li>
Functions
</li>
</ul>
</details>
</div>
<div style="flex: 1 1 45%;">
<h3 class="anchored">
Day 3
</h3>
<details>
<summary>
Advanced C
</summary>
<ul>
<li>
Arrays and pointers
</li>
<li>
Structures
</li>
<li>
Input and output
</li>
</ul>
</details>
<h3 class="anchored">
Day 4
</h3>
<details>
<summary>
Beyond the core of C
</summary>
<ul>
<li>
External libraries
</li>
<li>
Segmentation faults
</li>
<li>
C standards
</li>
</ul>
</details>
<details>
<summary>
Wrapping up
</summary>
</details>
</div>
</div>
</section>
<section id="external-libraries" class="level1">
<h1>External libraries</h1>
<section id="external-libraries-1" class="level2">
<h2 class="anchored" data-anchor-id="external-libraries-1">External libraries</h2>
<div class="incremental">
<ul class="incremental">
<li>There are literally hundreds of potentially useful scientific libraries</li>
<li>The ones discussed here are by no means exhaustive or representative for your case</li>
<li>The intention is to get a feel for how you can proceed to use libraries in general</li>
</ul>
</div>
</section>
<section id="external-libraries-overview" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="external-libraries-overview">External libraries overview</h2>
<div class="fragment">
<ul>
<li>External libraries extend C’s capabilities — especially useful in scientific computing (e.g., linear algebra, FFT, plotting)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Common scientific libraries:
<ul>
<li><strong>GSL</strong> (GNU Scientific Library)</li>
<li><strong>BLAS/LAPACK</strong> (Linear Algebra)</li>
<li><strong>FFTW</strong> (Fast Fourier Transforms)</li>
<li><strong>HDF5</strong> (Hierarchical data format)</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Benefits:
<ul>
<li>Avoid reinventing the wheel</li>
<li>Leverage optimized, tested code</li>
<li>Improve performance and portability</li>
</ul></li>
</ul>
</div>
</section>
<section id="using-external-libraries" class="level2">
<h2 class="anchored" data-anchor-id="using-external-libraries">Using external libraries</h2>
<ul>
<li>Before you can include calls to external libraries in your code, you typically need to include relevant header files
<ul>
<li>Header files define signatures of functions, structs, constants</li>
</ul></li>
<li>To compile code relying on an external library into an executable, you need to link that library
<ul>
<li>Typically <code>-l&lt;libname&gt;</code>, check library documentation</li>
</ul></li>
</ul>
</section>
<section id="static-vs-dynamic-libraries" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="static-vs-dynamic-libraries">Static vs Dynamic Libraries</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 36%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Static Library (.a/.lib)</th>
<th>Dynamic Library (.so/.dll)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Linking time</td>
<td>Compile time</td>
<td>Runtime</td>
</tr>
<tr class="even">
<td>Binary size</td>
<td>Larger (library included)</td>
<td>Smaller (library separate)</td>
</tr>
<tr class="odd">
<td>Portability</td>
<td>Easier to distribute</td>
<td>Requires library on target system</td>
</tr>
<tr class="even">
<td>Updates</td>
<td>Recompile to update</td>
<td>Can update without recompiling</td>
</tr>
<tr class="odd">
<td>Performance</td>
<td>Slightly faster (no indirection)</td>
<td>May have overhead at runtime</td>
</tr>
</tbody>
</table>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <code>gcc -static</code> for static linking, or <code>-l&lt;libname&gt;</code> with <code>-L&lt;path&gt;</code> for dynamic linking</p>
</div>
</div>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Details differ from library to library: check the specific documentation</p>
</div>
</div>
</section>
<section id="gnu-scientific-library" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="gnu-scientific-library">GNU Scientific Library</h2>
<ul>
<li>The <a href="https://www.gnu.org/software/gsl/">GNU Scientific Library</a> (GSL) provides a wide range of mathematical routines</li>
<li>How to get it:
<ul>
<li>On the cluster: load it as a module, <code>module load GSL/2.8-GCC-13.3.0</code> for example</li>
<li>On your machine: install it as a system package, <code>apt-get install libgsl-dev</code> for example</li>
</ul></li>
<li>How to use it:
<ul>
<li>Include the relevant headers in your code</li>
<li>Find relevant link flags with <code>pkg-config --libs gsl</code> for example</li>
</ul></li>
</ul>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>By loading a module on the cluster, some variables are set to make it easier to use libraries. For instance <code>CPATH</code> will include the path of the header files, <code>LD_LIBRARY_PATH</code> will include the path of the libraries.</p>
</div>
</div>
</section>
<section id="minimizing-a-function-with-gsl" class="level2">
<h2 class="anchored" data-anchor-id="minimizing-a-function-with-gsl">Minimizing a function with GSL</h2>
<p>See <a href="https://www.gnu.org/software/gsl/doc/html/min.html">https://www.gnu.org/software/gsl/doc/html/min.html</a> for documentation about one dimensional minimization</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;gsl/gsl_errno.h&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;gsl/gsl_min.h&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;gsl/gsl_math.h&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> a<span class="op">,</span> b<span class="op">,</span> sigma<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Params<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Define a function f according to the GSL rules</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> f<span class="op">(</span><span class="dt">double</span> x<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>params<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    Params <span class="op">*</span>p <span class="op">=</span> <span class="op">(</span>Params <span class="op">*)</span> params<span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> exp<span class="op">(-</span>p<span class="op">-&gt;</span>sigma<span class="op">*</span>x<span class="op">*</span>x<span class="op">)*</span>sin<span class="op">(</span>p<span class="op">-&gt;</span>a <span class="op">+</span> p<span class="op">-&gt;</span>b<span class="op">*</span>x<span class="op">);</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="minimizing-a-function-with-gsl-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="minimizing-a-function-with-gsl-1">Minimizing a function with GSL</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    Params params <span class="op">=</span> <span class="op">{</span><span class="fl">0.3</span><span class="op">,</span> <span class="fl">1.0</span><span class="op">,</span> <span class="fl">0.05</span><span class="op">};</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> minimum <span class="op">=</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">,</span> lower <span class="op">=</span> <span class="op">-</span><span class="fl">3.0</span><span class="op">,</span> upper <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> iter <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> maxIter <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> status<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> gsl_min_fminimizer_type <span class="op">*</span>T <span class="op">=</span> gsl_min_fminimizer_brent<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    gsl_min_fminimizer <span class="op">*</span>minimizer <span class="op">=</span> gsl_min_fminimizer_alloc<span class="op">(</span>T<span class="op">);</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    gsl_function F<span class="op">;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    F<span class="op">.</span>function <span class="op">=</span> <span class="op">&amp;</span>f<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    F<span class="op">.</span>params <span class="op">=</span> <span class="op">(</span><span class="dt">void</span> <span class="op">*)</span> <span class="op">&amp;</span>params<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    gsl_min_fminimizer_set<span class="op">(</span>minimizer<span class="op">,</span> <span class="op">&amp;</span>F<span class="op">,</span> minimum<span class="op">,</span> lower<span class="op">,</span> upper<span class="op">);</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        gsl_min_fminimizer_iterate<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        lower <span class="op">=</span> gsl_min_fminimizer_x_lower<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        upper <span class="op">=</span> gsl_min_fminimizer_x_upper<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        status <span class="op">=</span> gsl_min_test_interval<span class="op">(</span>lower<span class="op">,</span> upper<span class="op">,</span> <span class="fl">1.0e-6</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">);</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>status <span class="op">==</span> GSL_CONTINUE <span class="op">&amp;&amp;</span> <span class="op">++</span>iter <span class="op">&lt;</span> maxIter<span class="op">);</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>status <span class="op">==</span> GSL_SUCCESS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        minimum <span class="op">=</span> gsl_min_fminimizer_x_minimum<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"f reached the minimum </span><span class="sc">%.6f</span><span class="st"> at </span><span class="sc">%.6f</span><span class="st"> after </span><span class="sc">%d</span><span class="st"> iterations</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> f<span class="op">(</span>minimum<span class="op">,</span> F<span class="op">.</span>params<span class="op">),</span> minimum<span class="op">,</span> iter<span class="op">);</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    gsl_min_fminimizer_free<span class="op">(</span>minimizer<span class="op">);</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="blas-basic-linear-algebra-subprograms" class="level2">
<h2 class="anchored" data-anchor-id="blas-basic-linear-algebra-subprograms">BLAS: Basic Linear Algebra Subprograms</h2>
<ul>
<li>Low-level routines for vector and matrix operations</li>
<li>Levels:
<ul>
<li>Level 1: Vector-vector (e.g., dot product)</li>
<li>Level 2: Matrix-vector (e.g., solving triangular systems)</li>
<li>Level 3: Matrix-matrix (e.g., matrix multiplication)</li>
</ul></li>
</ul>
</section>
<section id="lapack-linear-algebra-package" class="level2">
<h2 class="anchored" data-anchor-id="lapack-linear-algebra-package">LAPACK: Linear Algebra PACKage</h2>
<ul>
<li>Built on top of BLAS</li>
<li>High-level routines for:
<ul>
<li>Solving linear systems</li>
<li>Eigenvalue problems</li>
<li>Singular value decomposition</li>
</ul></li>
</ul>
</section>
<section id="blas-lapack" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="blas-lapack">BLAS &amp; LAPACK</h2>
<div class="fragment">
<ul>
<li>Why use them?
<ul>
<li>Highly optimized for performance</li>
<li>Portable across platforms</li>
<li>Widely used in scientific and engineering applications</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Many implementations are available
<ul>
<li>OpenBLAS - Intel MKL - ATLAS</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Often implemented (partially) in Fortran and assembly
<ul>
<li>C bindings nearly always available though</li>
</ul></li>
</ul>
</div>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Link typically happens with <code>-lblas -llapack</code>, but this can be different for optimized implementations like OpenBLAS, Intel MKL, or ATLAS.</p>
</div>
</div>
</section>
<section id="dot-product-in-blas" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="dot-product-in-blas">Dot product in BLAS</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cblas.h&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> x<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">};</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> y<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">4.0</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">,</span> <span class="fl">6.0</span><span class="op">};</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> result <span class="op">=</span> cblas_ddot<span class="op">(</span><span class="dv">3</span><span class="op">,</span> x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Dot product: </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>$ gcc dotproduct<span class="op">.</span>c <span class="op">-</span>o dotproduct <span class="op">-</span>lblas <span class="op">&amp;&amp;</span> <span class="op">./</span>dotproduct</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Dot product<span class="op">:</span> <span class="fl">32.000000</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>On the cluster, use <code>module load OpenBLAS/0.3.27-GCC-13.3.0</code> and link with <code>-lopenblas</code></p>
</div>
</div>
</section>
<section id="hdf5-managing-scientific-data-in-c" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="hdf5-managing-scientific-data-in-c">HDF5: Managing Scientific Data in C</h2>
<ul>
<li>HDF5 (Hierarchical Data Format v5)
<ul>
<li>Designed for storing and organizing large, complex datasets</li>
<li>Supports n-dimensional arrays, tables, images, and metadata</li>
<li>Common in physics, climate modeling, bioinformatics, and engineering</li>
</ul></li>
<li>Features
<ul>
<li>Portable and self-describing binary format</li>
<li>Hierarchical structure: groups and datasets (like folders and files)</li>
<li>Supports compression, parallel I/O, and chunking</li>
</ul></li>
</ul>
</section>
<section id="hdf5-schematic-view-of-an-hdf5-file" class="level2">
<h2 class="anchored" data-anchor-id="hdf5-schematic-view-of-an-hdf5-file">HDF5: schematic view of an HDF5 file</h2>
<p><img src="images/hdf5_structure4.jpg" class="img-fluid"></p>
</section>
<section id="hdf5-writing-a-dataset" class="level2">
<h2 class="anchored" data-anchor-id="hdf5-writing-a-dataset">HDF5: writing a dataset</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"hdf5.h"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    hid_t file_id<span class="op">,</span> dataset_id<span class="op">,</span> dataspace_id<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    hsize_t dims<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">};</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> data<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span> <span class="co">/* initialize with values */</span> <span class="op">};</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    file_id <span class="op">=</span> H5Fcreate<span class="op">(</span><span class="st">"example.h5"</span><span class="op">,</span> H5F_ACC_TRUNC<span class="op">,</span> H5P_DEFAULT<span class="op">,</span> H5P_DEFAULT<span class="op">);</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    dataspace_id <span class="op">=</span> H5Screate_simple<span class="op">(</span><span class="dv">2</span><span class="op">,</span> dims<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    dataset_id <span class="op">=</span> H5Dcreate<span class="op">(</span>file_id<span class="op">,</span> <span class="st">"/mydata"</span><span class="op">,</span> H5T_NATIVE_DOUBLE<span class="op">,</span> dataspace_id<span class="op">,</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                           H5P_DEFAULT<span class="op">,</span> H5P_DEFAULT<span class="op">,</span> H5P_DEFAULT<span class="op">);</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    H5Dwrite<span class="op">(</span>dataset_id<span class="op">,</span> H5T_NATIVE_DOUBLE<span class="op">,</span> H5S_ALL<span class="op">,</span> H5S_ALL<span class="op">,</span> H5P_DEFAULT<span class="op">,</span> data<span class="op">);</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    H5Dclose<span class="op">(</span>dataset_id<span class="op">);</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    H5Sclose<span class="op">(</span>dataspace_id<span class="op">);</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    H5Fclose<span class="op">(</span>file_id<span class="op">);</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="exercises" class="level1">
<h1>Exercises</h1>
<section id="solve-a-linear-system-of-equations-with-gsl" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="solve-a-linear-system-of-equations-with-gsl">Solve a linear system of equations with GSL</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Write a program that balances a chemical equation by solving a linear system of equations using GSL.</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Learn how to call functions in GSL.</li>
</ul>
<p><strong>Instructions:</strong></p>
<ul>
<li>Consider the chemical equation <span class="math inline">\(a C_3H_8 + b O_2 \leftrightarrow c CO_2 + d H_2O\)</span>. Write a program that determines values for a,b,c,d such that the equation is balanced (i.e., each element appears as often on the left hand side as on the right hand side). Make use of <a href="http://gnu.ist.utl.pt/software/gsl/manual/html_node/Linear-Algebra-Examples.html">GSL linear algebra functions</a> to do this.</li>
<li>Bonus: Find a way to make sure the coefficients are integer</li>
</ul>
</section>
<section id="handwriting-recognition" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="handwriting-recognition">Handwriting recognition</h2>
<p><strong>Goal:</strong></p>
<ul>
<li>Train a model that can recognize handwritten digits</li>
</ul>
<p><strong>Learning outcomes:</strong></p>
<ul>
<li>Learn how to read “production” C code without understanding all details</li>
<li>Work with HDF5 and BLAS libraries</li>
</ul>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is not necessary or even wanted to fully understand the mathematics of the model. The following slides contain the essential things you need to know.</p>
</div>
</div>
</section>
<section id="handwriting-recognition-1" class="level2 smaller" data-background-color="lightgrey">
<h2 class="smaller anchored" data-background-color="lightgrey" data-anchor-id="handwriting-recognition-1">Handwriting recognition</h2>
<section id="supervised-machine-learning-models" class="level3">
<h3 class="anchored" data-anchor-id="supervised-machine-learning-models">Supervised machine learning models:</h3>
<div class="incremental">
<ul class="incremental">
<li>Propose a model <span class="math inline">\(y = f(x; A)\)</span> that relates the input <span class="math inline">\(x\)</span> to the output <span class="math inline">\(y\)</span> with a function <span class="math inline">\(f\)</span> that depends on (currently unknown) parameters <span class="math inline">\(A\)</span></li>
<li>Collect a training set of known input-output pairs of <span class="math inline">\(\{x, y\}\)</span> and determine the parameters <span class="math inline">\(A\)</span> such that the model predicts the expected outputs for the training set
<ul class="incremental">
<li>Technically: minimize a cost function using gradient descent</li>
</ul></li>
<li>Use the estimated parameters to compute output for new inputs (inference)</li>
</ul>
</div>
</section>
</section>
<section id="handwriting-recognition-2" class="level2 smaller" data-background-color="lightgrey">
<h2 class="smaller anchored" data-background-color="lightgrey" data-anchor-id="handwriting-recognition-2">Handwriting recognition</h2>
<ul>
<li>Input <span class="math inline">\(\mathbf{x}\)</span>: vector of size <span class="math inline">\(784\)</span> representing grayscale values of an image of <span class="math inline">\(28 \times 28\)</span> pixels</li>
<li>Output <span class="math inline">\(\mathbf{y}\)</span>: vector of size <span class="math inline">\(10\)</span>, representing probabilities that image is classified as integer <span class="math inline">\(\{ 0, 1, ..., 9\}\)</span></li>
<li>Model <span class="math inline">\(\mathbf{y} = \sigma \left( W \mathbf{x} + \mathbf{B} \right)\)</span>
<ul>
<li>Perceptron: neuron whose activation depends on weights, biases and inputs</li>
<li><span class="math inline">\(\sigma\)</span> is an activation function, in this case a softmax</li>
</ul></li>
<li>Parameters: <span class="math inline">\(W\)</span> (<span class="math inline">\(782 \times 10\)</span>) matrix and <span class="math inline">\(\mathbf{B}\)</span> (vector of size 10)</li>
</ul>
<div class="fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is not a state-of-the art model, but does demonstrate the essence of even very modern machine learning.</p>
</div>
</div>
</section>
<section id="handwriting-recognition-3" class="level2 smaller" data-background-color="lightgrey">
<h2 class="smaller anchored" data-background-color="lightgrey" data-anchor-id="handwriting-recognition-3">Handwriting recognition</h2>
<p>An excellent tutorial is available at <a href="https://www.3blue1brown.com/lessons/neural-networks">https://www.3blue1brown.com/lessons/neural-networks</a> (it uses multiple layers, so more parameters than in our case)</p>
<p><img src="images/neural-network-function.png" class="img-fluid"></p>
</section>
<section id="handwriting-recognition-4" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="handwriting-recognition-4">Handwriting recognition</h2>
<p><strong>Instructions:</strong></p>
<ul>
<li>Use <a href="https://github.com/AndrewCarterUK/mnist-neural-network-plain-c">https://github.com/AndrewCarterUK/mnist-neural-network-plain-c</a> as a starting point</li>
<li>Go through the code and try to get a high-level overview, without getting lost in the implementation details</li>
<li>Add checkpointing: allow storing parameters at the end of training in HDF5 format. Also allow reading them back in as initial guess to resume training</li>
<li>Replace the linear algebra operations by calls to BLAS. Compare the performance with the original implementation</li>
<li>Write a companion program that does inference by using precalculated parameters</li>
<li>Implement your own feature that you think would improve the code</li>
</ul>
</section>
<section id="handwriting-recognition-discussion" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="handwriting-recognition-discussion">Handwriting recognition discussion</h2>
<ul>
<li>After training for 500 epochs: accuracty for test set is about 90%</li>
<li>Inference for examples outside of test set:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><img src="images/digitA_3.png" class="img-fluid"></p>
</div><div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span>   0.01%</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span>   0.11%</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span>  99.81%</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span>   0.02%</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span>   0.05%</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Digit</span> prediction: 3</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="handwriting-recognition-discussion-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="handwriting-recognition-discussion-1">Handwriting recognition discussion</h2>
<ul>
<li>After training for 500 epochs: accuracty for test set is about 90%</li>
<li>Inference for examples outside of test set:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><img src="images/digitB_6.png" class="img-fluid"></p>
</div><div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span>   0.05%</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span>   0.01%</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span>  96.88%</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span>   3.06%</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Digit</span> prediction: 3</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="handwriting-recognition-discussion-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="handwriting-recognition-discussion-2">Handwriting recognition discussion</h2>
<ul>
<li>After training for 500 epochs: accuracty for test set is about 90%</li>
<li>Inference for examples outside of test set:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><img src="images/digitC_6.png" class="img-fluid"></p>
</div><div class="column" style="width:55%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span>   0.08%</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span>   0.68%</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span>   0.01%</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span>  99.08%</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span>   0.14%</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="ex">P</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span>   0.00%</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Digit</span> prediction: 6</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
</section>
<section id="segmentation-faults" class="level1">
<h1>Segmentation faults</h1>
<section id="segmentation-faults-1" class="level2">
<h2 class="anchored" data-anchor-id="segmentation-faults-1">Segmentation faults</h2>
<ul>
<li>A <strong>segmentation fault</strong> occurs when a program accesses memory it <strong>does not own</strong>.</li>
<li>Common causes:
<ul>
<li>Dereferencing <strong>NULL</strong> or <strong>uninitialized pointers</strong></li>
<li>Accessing memory <strong>out of bounds</strong> (arrays, strings)</li>
<li>Writing to <strong>read-only memory</strong></li>
</ul></li>
</ul>
</section>
<section id="segmentation-fault-example" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="segmentation-fault-example">Segmentation fault example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode c small-code code-with-copy"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> A<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"A[</span><span class="sc">%5d</span><span class="st">] = </span><span class="sc">%12d\n</span><span class="st">"</span><span class="op">,</span> i<span class="op">,</span> A<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"A[</span><span class="sc">%5d</span><span class="st">] = </span><span class="sc">%12d\n</span><span class="st">"</span><span class="op">,</span> i <span class="op">*</span> <span class="dv">30000</span><span class="op">,</span> A<span class="op">[</span>i <span class="op">*</span> <span class="dv">30000</span><span class="op">]);</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>What will happen when you compile and run this program?</p>
<ul>
<li>The program will not compile</li>
<li>The program will crash when accessing <code>A[0]</code> since its value is not initialized</li>
<li>The program will crash when accessing <code>A[4]</code> since it is outside of the array</li>
<li>The program <em>might</em> crash when accessing any element outside of the array</li>
<li>The program will always run to completion</li>
</ul>
</section>
<section id="segmentation-fault-example-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="segmentation-fault-example-1">Segmentation fault example</h2>
<p>Invalid array access gives undefined behavior, the result can depend on the system</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    0<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    1<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    2<span class="op">]</span> <span class="ex">=</span>      4199005</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    3<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    4<span class="op">]</span> <span class="ex">=</span>  <span class="at">-2103564768</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span><span class="dv">30000</span><span class="op">]</span> <span class="ex">=</span>   1818850658</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span><span class="dv">60000</span><span class="op">]</span> <span class="ex">=</span>    774974819</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Segmentation</span> fault <span class="er">(</span><span class="ex">core</span> dumped<span class="kw">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Some elements of the array (<code>A[2]</code>) have a <em>garbage</em> value
<ul>
<li>Makes sense, elements were not initialized</li>
</ul></li>
<li>Some elements outside of array (<code>A[30000]</code>) have a garbage value
<ul>
<li>Makes sense, you just get what happens to be in memory at <code>(A + 30000)</code></li>
</ul></li>
<li>The access of <code>A[90000]</code> gives a segmentation fault
<ul>
<li>???</li>
</ul></li>
</ul>
</section>
<section id="virtual-vs-physical-memory" class="level2 smaller" data-background-color="lightgrey">
<h2 class="smaller anchored" data-background-color="lightgrey" data-anchor-id="virtual-vs-physical-memory">Virtual vs physical memory</h2>
<div class="columns">
<div class="column" style="width:65%;">
<ul>
<li>As a user/programmer, you see <em>virtual</em> memory</li>
<li>Virtual memory creates the illusion of a large, contiguous, uniform address space
<ul>
<li>Hides fragmentation of physical memory</li>
<li>Delegates managing memory hierarchy (caches, RAM, disk) to OS</li>
<li>Provides safety mechanism to isolate process’ address space</li>
</ul></li>
</ul>
</div><div class="column" style="width:35%;">
<p><img src="images/virtual_memory.svg" class="img-fluid"></p>
</div>
</div>
<div class="fragment">
<ul>
<li>Mapping to phyical memory in page table
<ul>
<li>Out-of-bound memory access can pick up garbage mapping address</li>
<li>You might be accessing another process’ memory, even on read access the CPU throws a segmentation fault</li>
</ul></li>
</ul>
</div>
</section>
<section id="segmentation-fault-example-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="segmentation-fault-example-2">Segmentation fault example</h2>
<p>Invalid array access gives undefined behavior, the result can depend on the system</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    0<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    1<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    2<span class="op">]</span> <span class="ex">=</span>      4199005</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    3<span class="op">]</span> <span class="ex">=</span>            0</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span>    4<span class="op">]</span> <span class="ex">=</span>  <span class="at">-2103564768</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span><span class="dv">30000</span><span class="op">]</span> <span class="ex">=</span>   1818850658</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="va">A</span><span class="op">[</span><span class="dv">60000</span><span class="op">]</span> <span class="ex">=</span>    774974819</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Segmentation</span> fault <span class="er">(</span><span class="ex">core</span> dumped<span class="kw">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Some elements of the array (<code>A[2]</code>) have a <em>garbage</em> value
<ul>
<li>Makes sense, elements were not initialized</li>
</ul></li>
<li>Some elements outside of array (<code>A[30000]</code>) have a garbage value
<ul>
<li>Makes sense, you just get what happens to be in memory at <code>(A + 3000)</code></li>
</ul></li>
<li>The access of <code>A[90000]</code> gives a segmentation fault
<ul>
<li>This virtual address corresponds to a physical address that is not part of the process</li>
<li>The operating system reports this as a segmentation fault</li>
</ul></li>
</ul>
</section>
<section id="handling-segmentation-faults" class="level2">
<h2 class="anchored" data-anchor-id="handling-segmentation-faults">Handling segmentation faults</h2>
<ul>
<li>Do not make coding mistakes :)</li>
<li>Ask the compiler to instrument executable to
<ul>
<li><code>gcc -fsanitize=bounds-strict segmentation_fault.c</code></li>
<li>Can lead to lower performance</li>
</ul></li>
<li>Run the program under a debugger such as <code>gdb</code>
<ul>
<li>Compile with debug symbols (<code>-g</code>)</li>
</ul></li>
</ul>
</section>
</section>
<section id="versions-of-c" class="level1">
<h1>Versions of C</h1>
<section id="versions-of-c-1" class="level2">
<h2 class="anchored" data-anchor-id="versions-of-c-1">Versions of C <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></h2>
</section>
<section id="a-brief-history-of-c" class="level2">
<h2 class="anchored" data-anchor-id="a-brief-history-of-c">A brief history of C</h2>
<ul>
<li>C development starts in the early 1970s</li>
<li>First standard published in 1989: ANSI C or C89</li>
<li>Update in 1999: C99 standard</li>
<li>Update in 2011: C11 standard</li>
<li>Minor bugfixes in 2017: C17 (sometimes referred to as C18)</li>
<li>Update in 2023: C23</li>
</ul>
</section>
<section id="different-c-standards" class="level2">
<h2 class="anchored" data-anchor-id="different-c-standards">Different C standards</h2>
<ul>
<li>The C89 standard is still considered the default</li>
<li>Compiler has to be instructed to use specific standard: <code>gcc -std=c11</code>
<ul>
<li>You need a recent compiler for the most recent standard</li>
</ul></li>
<li>Compilers often do not stick <em>exactly</em> to standard
<ul>
<li><code>gcc</code> provides some C99 constructions by default</li>
<li>Options like <code>-std=c89 -pedantic</code> make it more strict</li>
</ul></li>
</ul>
</section>
<section id="the-c99-standard-additions" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="the-c99-standard-additions">The C99 standard additions</h2>
<ul>
<li>Single-line comments with <code>//</code></li>
<li>Variable length arrays</li>
<li>Mark functions with <code>inline</code> to avoid call overhead</li>
<li>Use <code>restrict</code> to indicate arrays do not overlap</li>
<li>Boolean and complex types in <code>&lt;bool.h&gt;</code> and <code>&lt;complex.h&gt;</code></li>
<li>Type-generic macros in <code>&lt;tgmath.h&gt;</code></li>
<li>IEEE&nbsp;754 floating point support</li>
</ul>
</section>
<section id="inline-functions" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="inline-functions">Inline functions</h2>
<ul>
<li>Function call: expensive
<ul>
<li>call stack must be maintained</li>
<li>stack variables allocated, initialized</li>
</ul></li>
<li>Small functions, called often: lots of overhead</li>
<li>Inline functions: function code inserted in caller
<ul>
<li>good compilers try that anyway</li>
<li>helping compilers: better optimization!</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">inline</span> <span class="dt">double</span> sqr<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">*</span>x<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="restrict-keyword-for-arrays" class="level2">
<h2 class="anchored" data-anchor-id="restrict-keyword-for-arrays">Restrict keyword for arrays</h2>
<ul>
<li>Arrays in C:
<ul>
<li>decay into pointers, just contain address of first element</li>
<li>no semantics for compiler</li>
</ul></li>
<li>Multiple arrays as function arguments, do they overlap?</li>
<li>Help compiler, use <code>restrict</code>
<ul>
<li>programmer assures to compiler that arrays don’t overlap</li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> daxpy_r<span class="op">(</span><span class="dt">double</span> <span class="op">*</span> <span class="dt">restrict</span> z<span class="op">,</span> <span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span> <span class="dt">restrict</span> x<span class="op">,</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>             <span class="dt">double</span> <span class="op">*</span> <span class="dt">restrict</span> y<span class="op">,</span> <span class="dt">int</span> n<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="complex-numbers" class="level2">
<h2 class="anchored" data-anchor-id="complex-numbers">Complex numbers</h2>
<ul>
<li>Types:
<ul>
<li>float complex: single precision</li>
<li>double complex: double precision</li>
<li>long double complex: extended precision</li>
</ul></li>
<li>Declarations in complex.h
<ul>
<li>types</li>
<li>literal: I</li>
<li>functions, e.g., <code>creal</code>, <code>cimag</code>, <code>csqrt</code>, <code>cexp</code>, …</li>
</ul></li>
</ul>
</section>
<section id="type-generic-math" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="type-generic-math">Type-generic math</h2>
<ul>
<li>Automatically selects the correct version of a math function:
<ul>
<li><code>float</code>, <code>double</code>, or <code>long double</code></li>
<li><code>complex</code> or <code>real</code> types</li>
</ul></li>
<li>Cleaner code: No need to manually choose <code>sinf</code>, <code>sin</code>, or <code>sinl</code>.</li>
<li>Type safety: Matches function to argument type at compile time.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;tgmath.h&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> x <span class="op">=</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> y <span class="op">=</span> <span class="fl">0.5</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result1 <span class="op">=</span> sin<span class="op">(</span>x<span class="op">);</span>  <span class="co">// uses sin()</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> result2 <span class="op">=</span> sin<span class="op">(</span>y<span class="op">);</span>   <span class="co">// uses sinf()</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="ieee-754-floating-point-support" class="level2">
<h2 class="anchored" data-anchor-id="ieee-754-floating-point-support">IEEE&nbsp;754 floating point support</h2>
<ul>
<li>float: 4 byte, single precision</li>
<li>double: 8 byte, double precision</li>
<li>long double: 12 byte, extended precision</li>
<li>Rounding well-defined</li>
<li>Support for Inf, -Inf, NaN</li>
</ul>
</section>
<section id="the-c11-standard" class="level2">
<h2 class="anchored" data-anchor-id="the-c11-standard">The C11 standard</h2>
<p>The <code>_Generic</code> Keyword</p>
<ul>
<li><p>Enables <strong>type-generic programming</strong> (like <code>tgmath.h</code>)</p></li>
<li><p>Example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define my_abs</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="dt">_Generic</span><span class="op">((</span><span class="pp">x</span><span class="op">),</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="dt">int</span><span class="op">:</span><span class="pp"> abs</span><span class="op">,</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="dt">float</span><span class="op">:</span><span class="pp"> fabsf</span><span class="op">,</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="dt">double</span><span class="op">:</span><span class="pp"> fabs </span><span class="op">\</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="op">)(</span><span class="pp">x</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="mathematics-in-c23" class="level2">
<h2 class="anchored" data-anchor-id="mathematics-in-c23">Mathematics in C23</h2>
<ul>
<li>New mathematical functions in <code>math.h</code>
<ul>
<li><code>sinpi(x)</code> is the same as <code>sin(pi*x)</code> with better precision</li>
<li><code>exp10</code> et al.</li>
</ul></li>
<li>Checked integer arithmetic in <code>stdckdint.h</code>
<ul>
<li><code>ckd_add</code> et al.</li>
</ul></li>
<li>Support for <code>1'000</code> and <code>1'133.023</code> notation</li>
<li>Decimal floating-point math (IEEE 754-2008/2019)</li>
</ul>
</section>
<section id="syntax-changes-in-c23" class="level2">
<h2 class="anchored" data-anchor-id="syntax-changes-in-c23">Syntax changes in C23</h2>
<ul>
<li><code>nullptr</code> (keyword) rather than <code>NULL</code> (macro)</li>
<li><code>true/false</code> keywords, <code>stdbool.h</code> not required</li>
<li>Unnamed function parameters</li>
<li><code>stdbit.h</code>: bit manipulation functions</li>
<li><code>strdup/strndup</code>: simple string duplication</li>
<li><code>constexpr</code> for compile-time constants</li>
<li><code>static_assert</code> for compile-time asserts</li>
<li><code>typeof</code> to determine type at compile time</li>
</ul>
</section>
<section id="c23-attributes" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="c23-attributes">C23 attributes</h2>
<ul>
<li>Defensive programming
<ul>
<li><code>[[fallthrough]]</code>: intentional fall-through in switch</li>
<li><code>[[nodiscard]]</code>: don’t ignore return value</li>
<li><code>[[maybe_unused]]</code>: don’t warn if not used (function/parameter)</li>
<li><code>[[deprecated]]</code></li>
</ul></li>
<li>Performance related
<ul>
<li><code>[[unsequenced]]</code>: function has no side-effects, calls can be out-of-order</li>
<li><code>[[reproducible]]</code>: function has no side-effect, calls have to be in-order (e.g., random numbers)</li>
</ul></li>
</ul>
</section>
</section>
<section id="wrapping-up" class="level1">
<h1>Wrapping up</h1>
<section id="scientific-programming-landscape" class="level2">
<h2 class="anchored" data-anchor-id="scientific-programming-landscape">Scientific programming landscape</h2>
<p><img src="images/scientific_programming_languages_landscape.png" class="img-fluid"></p>
</section>
<section id="more-to-explore" class="level2">
<h2 class="anchored" data-anchor-id="more-to-explore">More to explore</h2>
<ul>
<li>How to do HPC =&gt; <a href="https://hpcleuven.github.io/HPC-intro">HPC intro</a> and <a href="https://hpcleuven.github.io/Linux-for-HPC/">Linux for HPC</a></li>
<li>Build systems =&gt; <a href="https://hpcleuven.github.io/CMake-intro/">CMake intro</a> and <a href="https://hpcleuven.github.io/Makefile-intro/">Makefile intro</a></li>
<li>Version control =&gt; <a href="https://github.com/gjbex/Version-control-with-git">Version control with git</a></li>
<li>Optimizing code =&gt; <a href="https://gjbex.github.io/Code-optimization/">Code optimization</a></li>
<li>Debugging code =&gt; <a href="https://gjbex.github.io/Defensive_programming_and_debugging/">Defensive programming and debugging</a></li>
<li>Parallel programming =&gt; <a href="https://github.com/gjbex/Parallel-programming">Parallel programming</a></li>
<li>Setting up an Integrated Development Environment (IDE)</li>
</ul>
</section>
<section id="more-to-explore-1" class="level2">
<h2 class="anchored" data-anchor-id="more-to-explore-1">More to explore</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The calendar of VSC Trainings can be found at <a href="https://www.vscentrum.be/vsctraining">https://www.vscentrum.be/vsctraining</a>. Learning paths that show connections between trainings can be found at <a href="https://gjbex.github.io/">https://gjbex.github.io/</a>.</p>
</div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Adapted from https://github.com/gjbex/Scientific-C<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>